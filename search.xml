<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>9.案例</title>
      <link href="/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/"/>
      <url>/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="163邮箱邮件发送"><a class="markdownIt-Anchor" href="#163邮箱邮件发送"></a> 163邮箱邮件发送</h1><p>代码链接：<a href="https://pan.wo.cn/s/1J1c4w90901">https://pan.wo.cn/s/1J1c4w90901</a>  提取码：1Spc</p><p>参考博客：<a href="https://developer.huawei.com/consumer/cn/blog/topic/03148160059378015">https://developer.huawei.com/consumer/cn/blog/topic/03148160059378015</a></p><p>在module.json5配置文件加上对权限的声明：</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.INTERNET&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入所需的模块</span></span><br><span class="line"><span class="keyword">import</span> socket <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.socket&#x27;</span>; <span class="comment">// 网络套接字模块，用于TCP/TLS通信</span></span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">&#x27;@ohos.util&#x27;</span>; <span class="comment">// 工具模块，用于Base64编码/解码等</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口定义</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">LocalAddress</span> &#123;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>; <span class="comment">// 本地绑定地址</span></span><br><span class="line">  <span class="attr">family</span>: <span class="built_in">number</span>; <span class="comment">// 地址族（IPv4=1, IPv6=2）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ServerAddress</span> &#123;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>; <span class="comment">// 服务器地址</span></span><br><span class="line">  <span class="attr">port</span>: <span class="built_in">number</span>; <span class="comment">// 服务器端口</span></span><br><span class="line">  <span class="attr">family</span>: <span class="built_in">number</span>; <span class="comment">// 地址族</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MessageValue</span> &#123;</span><br><span class="line">  <span class="attr">message</span>: <span class="title class_">ArrayBuffer</span>; <span class="comment">// 接收到的消息数据（二进制格式）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SecureOptions</span> &#123;</span><br><span class="line">  <span class="attr">protocols</span>: socket.<span class="property">Protocol</span>[]; <span class="comment">// 支持的TLS协议版本</span></span><br><span class="line">  <span class="attr">cipherSuite</span>: <span class="built_in">string</span>; <span class="comment">// 加密套件配置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ConnectOptions</span> &#123;</span><br><span class="line">  <span class="attr">address</span>: <span class="title class_">ServerAddress</span>; <span class="comment">// 服务器地址信息</span></span><br><span class="line">  <span class="attr">secureOptions</span>: <span class="title class_">SecureOptions</span>; <span class="comment">// TLS安全选项</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局TLSSocket实例</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">tlsSocket</span>: socket.<span class="property">TLSSocket</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">bindLocal</span>: <span class="built_in">boolean</span> = <span class="literal">false</span> <span class="comment">// Socket是否已绑定本地地址</span></span><br><span class="line">  <span class="attr">isServerResponse</span>: <span class="built_in">boolean</span> = <span class="literal">false</span> <span class="comment">// 是否收到服务器响应</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">serverAddr</span>: <span class="built_in">string</span> = <span class="string">&quot;smtp.163.com&quot;</span> <span class="comment">// SMTP服务器地址</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">serverPort</span>: <span class="built_in">number</span> = <span class="number">465</span> <span class="comment">// SMTP TLS端口</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">userName</span>: <span class="built_in">string</span> = <span class="string">&quot;staseaiot@163.com&quot;</span> <span class="comment">// 邮箱用户名</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">passwd</span>: <span class="built_in">string</span> = <span class="string">&quot;DAtTEFxcvXt76ByV&quot;</span> <span class="comment">// 邮箱授权码（不是登录密码）</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">rcptList</span>: <span class="built_in">string</span> = <span class="string">&quot;1970884166@qq.com&quot;</span> <span class="comment">// 收件人列表（逗号分隔）</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mailTitle</span>: <span class="built_in">string</span> = <span class="string">&quot;意见反馈&quot;</span> <span class="comment">// 邮件标题</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mailFrom</span>: <span class="built_in">string</span> = <span class="string">&quot;staseaiot@163.com&quot;</span> <span class="comment">// 发件人邮箱</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mailContent</span>: <span class="built_in">string</span> = <span class="string">&quot;This is greeting from Harmony OS&quot;</span> <span class="comment">// 邮件内容</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">canSend</span>: <span class="built_in">boolean</span> = <span class="literal">false</span> <span class="comment">// 是否可以发送邮件（登录成功后设为true）</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// UI构建函数</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;邮件发送客户端（163邮箱 - 465 TLS）&quot;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 服务器地址输入</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;邮箱服务器地址：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">120</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">serverAddr</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">serverAddr</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 服务器端口输入</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;邮箱服务器端口：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">120</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">serverPort</span>.<span class="title function_">toString</span>() &#125;)</span><br><span class="line">            .<span class="title function_">type</span>(<span class="title class_">InputType</span>.<span class="property">Number</span>)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">serverPort</span> = <span class="built_in">parseInt</span>(value) &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 用户名输入</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;邮箱用户名：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">90</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">userName</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">userName</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 密码输入和登录按钮</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;登录密码(授权码)：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">130</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">passwd</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">passwd</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&quot;登录&quot;</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="title function_">login</span>() &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">70</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 收件人输入</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;收件人邮箱：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">90</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">placeholder</span>: <span class="string">&quot;多个使用逗号分隔&quot;</span>, <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">rcptList</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">rcptList</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 邮件标题输入</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;标题：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">mailTitle</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">mailTitle</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 发件人邮箱输入</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;发件人邮箱：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">90</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">mailFrom</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">mailFrom</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 邮件内容输入和发送按钮</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;邮件内容：&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">TextArea</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">mailContent</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">mailContent</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">120</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&quot;发送&quot;</span>)</span><br><span class="line">            .<span class="title function_">enabled</span>(<span class="variable language_">this</span>.<span class="property">canSend</span>) <span class="comment">// 仅在登录成功后可用</span></span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="title function_">sendMail</span>() &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建新的TLSSocket实例</span></span><br><span class="line">  <span class="title function_">createNewSocket</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tlsSocket) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123; tlsSocket.<span class="title function_">close</span>(); &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    tlsSocket = socket.<span class="title function_">constructTLSSocketInstance</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bindLocal</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 绑定Socket到本地地址并设置监听器</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">bindSocket</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createNewSocket</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> <span class="attr">localAddress</span>: <span class="title class_">LocalAddress</span> = &#123; <span class="attr">address</span>: <span class="string">&quot;0.0.0.0&quot;</span>, <span class="attr">family</span>: <span class="number">1</span> &#125;; <span class="comment">// 绑定到所有IPv4地址</span></span><br><span class="line">      <span class="keyword">await</span> tlsSocket!.<span class="title function_">bind</span>(localAddress);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: bind success&quot;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">bindLocal</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: bind fail - <span class="subst">$&#123;e.message || e&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听服务器消息</span></span><br><span class="line">    tlsSocket!.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="function">(<span class="params"><span class="attr">value</span>: <span class="title class_">MessageValue</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isServerResponse</span> = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">let</span> msg = <span class="title function_">buf2String</span>(value.<span class="property">message</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`S: <span class="subst">$&#123;msg&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听错误事件</span></span><br><span class="line">    tlsSocket!.<span class="title function_">on</span>(<span class="string">&quot;error&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`E: Socket 错误 - <span class="subst">$&#123;err.message || err.code || <span class="string">&#x27;未知 TLS 错误&#x27;</span>&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;详细错误对象:&quot;</span>, err);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听连接关闭事件</span></span><br><span class="line">    tlsSocket!.<span class="title function_">on</span>(<span class="string">&quot;close&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 连接已被服务器断开（可能是空闲超时）&quot;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 发送按钮已禁用，请重新点击&#x27;登录&#x27;或&#x27;发送&#x27;来重连&quot;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">canSend</span> = <span class="literal">false</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 清理Socket资源</span></span><br><span class="line">  <span class="title function_">cleanupSocket</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tlsSocket) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123; tlsSocket.<span class="title function_">close</span>(); &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">      tlsSocket = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bindLocal</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isServerResponse</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SMTP登录流程</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">bindSocket</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> <span class="attr">serverAddress</span>: <span class="title class_">ServerAddress</span> = &#123; <span class="attr">address</span>: <span class="variable language_">this</span>.<span class="property">serverAddr</span>, <span class="attr">port</span>: <span class="variable language_">this</span>.<span class="property">serverPort</span>, <span class="attr">family</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 配置TLS选项</span></span><br><span class="line">      <span class="keyword">const</span> <span class="attr">secureOptions</span>: <span class="title class_">SecureOptions</span> = &#123;</span><br><span class="line">        <span class="attr">protocols</span>: [socket.<span class="property">Protocol</span>.<span class="property">TLSv12</span>, socket.<span class="property">Protocol</span>.<span class="property">TLSv13</span>], <span class="comment">// 支持TLS 1.2和1.3</span></span><br><span class="line">        <span class="attr">cipherSuite</span>: <span class="string">&#x27;TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256&#x27;</span> <span class="comment">// 加密套件</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> <span class="attr">connectOptions</span>: <span class="title class_">ConnectOptions</span> = &#123;</span><br><span class="line">        <span class="attr">address</span>: serverAddress,</span><br><span class="line">        <span class="attr">secureOptions</span>: secureOptions</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 连接SMTP服务器</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C: 正在连接 <span class="subst">$&#123;<span class="variable language_">this</span>.serverAddr&#125;</span>:<span class="subst">$&#123;<span class="variable language_">this</span>.serverPort&#125;</span> (TLS)...`</span>);</span><br><span class="line">      <span class="keyword">await</span> tlsSocket!.<span class="title function_">connect</span>(connectOptions);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: TLS 连接成功！&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 等待服务器欢迎消息（220）</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">wait4ServerResponse</span>(<span class="number">10000</span>);</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;未收到 220 欢迎消息&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// SMTP握手流程</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">&quot;EHLO harmonyos.next&quot;</span>); <span class="comment">// 发送EHLO命令</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">&quot;AUTH LOGIN&quot;</span>); <span class="comment">// 开始认证</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// Base64编码的用户名和密码</span></span><br><span class="line">      <span class="keyword">let</span> loginName = <span class="title function_">string2Base64</span>(<span class="variable language_">this</span>.<span class="property">userName</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(loginName);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> passWd = <span class="title function_">string2Base64</span>(<span class="variable language_">this</span>.<span class="property">passwd</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(passWd);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;  <span class="comment">// 简化判断（实际应检查235响应码）</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">canSend</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 登录成功！（235 Authentication successful）&quot;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 可以开始发送邮件&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;登录失败，请检查邮箱/授权码&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: 登录失败 - <span class="subst">$&#123;e.message || e&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 发送邮件</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">sendMail</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">canSend</span> || !tlsSocket) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 连接不可用，正在自动尝试重连...&quot;</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">login</span>();</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">canSend</span>) <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 开始发送邮件...&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// SMTP发送流程</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">`MAIL FROM:&lt;<span class="subst">$&#123;<span class="variable language_">this</span>.mailFrom&#125;</span>&gt;`</span>); <span class="comment">// 发件人</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 收件人列表（支持多个）</span></span><br><span class="line">      <span class="keyword">let</span> rcptMails = <span class="variable language_">this</span>.<span class="property">rcptList</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> rcpt <span class="keyword">of</span> rcptMails) &#123;</span><br><span class="line">        rcpt = rcpt.<span class="title function_">trim</span>();</span><br><span class="line">        <span class="keyword">if</span> (rcpt) <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">`RCPT TO:&lt;<span class="subst">$&#123;rcpt&#125;</span>&gt;`</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">&quot;DATA&quot;</span>); <span class="comment">// 准备发送数据</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 构建邮件头</span></span><br><span class="line">      <span class="keyword">let</span> mailBody = <span class="string">`From: <span class="subst">$&#123;<span class="variable language_">this</span>.mailFrom&#125;</span>\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`To: <span class="subst">$&#123;<span class="variable language_">this</span>.rcptList&#125;</span>\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`Subject: =?utf-8?B?<span class="subst">$&#123;string2Base64(<span class="variable language_">this</span>.mailTitle)&#125;</span>?=\r\n`</span>; <span class="comment">// Base64编码标题</span></span><br><span class="line">      mailBody += <span class="string">`Date: <span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().toUTCString()&#125;</span>\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`Content-Type: text/plain; charset=&quot;utf-8&quot;\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`Content-Transfer-Encoding: base64\r\n\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`<span class="subst">$&#123;string2Base64(<span class="variable language_">this</span>.mailContent)&#125;</span>\r\n`</span>; <span class="comment">// Base64编码内容</span></span><br><span class="line">      mailBody += <span class="string">&quot;.\r\n&quot;</span>; <span class="comment">// SMTP数据结束标记</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 分块发送邮件内容（避免大包）</span></span><br><span class="line">      <span class="keyword">const</span> chunkSize = <span class="number">2048</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mailBody.<span class="property">length</span>; i += chunkSize) &#123;</span><br><span class="line">        <span class="keyword">const</span> chunk = mailBody.<span class="title function_">substring</span>(i, i + chunkSize);</span><br><span class="line">        <span class="keyword">await</span> tlsSocket!.<span class="title function_">send</span>(chunk);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C: [chunk sent, length=<span class="subst">$&#123;chunk.length&#125;</span>]`</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 等待服务器确认</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">wait4ServerResponse</span>(<span class="number">15000</span>);</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;服务器未确认邮件接收&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: 邮件发送成功！连接保持打开，可继续发送下一封&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: 发送失败 - <span class="subst">$&#123;e.message || e&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 执行SMTP命令并等待响应</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">exeCmdAndWait4Response</span>(<span class="params"><span class="attr">cmd</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!tlsSocket) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Socket 未初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isServerResponse</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> fullCmd = cmd + <span class="string">&quot;\r\n&quot;</span>; <span class="comment">// SMTP命令以CRLF结束</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> tlsSocket.<span class="title function_">send</span>(fullCmd);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C: <span class="subst">$&#123;cmd&#125;</span>`</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (sendErr) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: 发送命令失败 - <span class="subst">$&#123;sendErr.message || sendErr&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(sendErr.<span class="property">message</span> || sendErr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">wait4ServerResponse</span>(<span class="number">10000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 等待服务器响应（轮询方式）</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">wait4ServerResponse</span>(<span class="params"><span class="attr">timeoutMs</span>: <span class="built_in">number</span> = <span class="number">10000</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Date</span>.<span class="title function_">now</span>() - start &gt; timeoutMs) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`等待响应超时 (<span class="subst">$&#123;timeoutMs&#125;</span>ms)`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">sleep</span>(<span class="number">100</span>); <span class="comment">// 每100毫秒检查一次</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Base64 编码函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">string2Base64</span>(<span class="params"><span class="attr">src</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> textEncoder = <span class="keyword">new</span> util.<span class="title class_">TextEncoder</span>();</span><br><span class="line">    <span class="keyword">let</span> encodeValue = textEncoder.<span class="title function_">encodeInto</span>(src); <span class="comment">// 字符串转Uint8Array</span></span><br><span class="line">    <span class="keyword">let</span> tool = <span class="keyword">new</span> util.<span class="title class_">Base64Helper</span>();</span><br><span class="line">    <span class="keyword">return</span> tool.<span class="title function_">encodeToStringSync</span>(encodeValue); <span class="comment">// Base64编码</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Base64 失败:&quot;</span>, e);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ArrayBuffer 转字符串函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">buf2String</span>(<span class="params"><span class="attr">buf</span>: <span class="title class_">ArrayBuffer</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> msgArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(buf);</span><br><span class="line">    <span class="keyword">let</span> textDecoder = util.<span class="property">TextDecoder</span>.<span class="title function_">create</span>(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> textDecoder.<span class="title function_">decodeWithStream</span>(msgArray); <span class="comment">// UTF-8解码</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;解码失败:&quot;</span>, e);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;[解码失败]&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步休眠函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sleep</span>(<span class="params"><span class="attr">time</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, time));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="天气"><a class="markdownIt-Anchor" href="#天气"></a> 天气</h1><p>代码链接：<a href="https://pan.wo.cn/s/1X1A4u98932">https://pan.wo.cn/s/1X1A4u98932</a>   提取码：FxuX</p><p>位置定位：<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-positioning#section1774418211717">https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-positioning#section1774418211717</a></p><p>在module.json5中添加网络访问权限：</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.INTERNET&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>utils/HttpUtil.ts</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// utils/HttpUtil.ts</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">&#x27;@ohos.util&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ZlibModule</span> &#123;</span><br><span class="line">  <span class="title function_">unzip</span>(<span class="attr">data</span>: <span class="title class_">ArrayBuffer</span>, <span class="attr">callback</span>: <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">Error</span>, <span class="attr">result</span>: <span class="title class_">ArrayBuffer</span></span>) =&gt;</span> <span class="built_in">void</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">requireNapi</span>(<span class="params"><span class="attr">moduleName</span>: <span class="built_in">string</span></span>): <span class="title class_">ZlibModule</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检查数据是否为 GZIP 格式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isGzipData</span>(<span class="params"><span class="attr">data</span>: <span class="title class_">ArrayBuffer</span> | <span class="title class_">Uint8Array</span></span>): <span class="built_in">boolean</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> uint8Array = data <span class="keyword">instanceof</span> <span class="title class_">Uint8Array</span> ? data : <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(data);</span><br><span class="line">  <span class="keyword">return</span> uint8Array.<span class="property">length</span> &gt;= <span class="number">2</span> &amp;&amp; uint8Array[<span class="number">0</span>] === <span class="number">0x1F</span> &amp;&amp; uint8Array[<span class="number">1</span>] === <span class="number">0x8B</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用鸿蒙系统 zlib 解压 GZIP 数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">ungzipData</span>(<span class="params"><span class="attr">compressedData</span>: <span class="title class_">ArrayBuffer</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">zlib</span>: <span class="title class_">ZlibModule</span> = <span class="title function_">requireNapi</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line">      zlib.<span class="title function_">unzip</span>(compressedData, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">Error</span>, <span class="attr">result</span>: <span class="title class_">ArrayBuffer</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> decoder = <span class="keyword">new</span> util.<span class="title class_">TextDecoder</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> uint8Result = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(result);</span><br><span class="line">        <span class="keyword">const</span> output = decoder.<span class="title function_">decodeWithStream</span>(uint8Result);</span><br><span class="line">        <span class="title function_">resolve</span>(output);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;zlib 加载失败&#x27;</span>, error);</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;zlib 解压失败&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 网络请求工具类 - 使用 <span class="doctag">@ohos</span>.net.http，支持 GZIP 自动解压或手动处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> url 请求地址</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> 响应数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> request&lt;T&gt;(<span class="attr">url</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;T&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;发起请求:&#x27;</span>, url);</span><br><span class="line">    <span class="keyword">const</span> httpRequest = http.<span class="title function_">createHttp</span>();</span><br><span class="line">    httpRequest.<span class="title function_">request</span>(url, &#123;</span><br><span class="line">      <span class="attr">method</span>: http.<span class="property">RequestMethod</span>.<span class="property">GET</span>,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip&#x27;</span>, <span class="comment">// 允许压缩</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 鸿蒙http模块不支持responseType参数</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求响应码:&#x27;</span>, response.<span class="property">responseCode</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;响应数据类型:&#x27;</span>, <span class="keyword">typeof</span> response.<span class="property">result</span>);</span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">responseCode</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> <span class="attr">dataStr</span>: <span class="built_in">string</span>;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// 处理数据的函数</span></span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">processData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="comment">// 解析 JSON</span></span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;尝试解析 JSON，数据前50字符:&#x27;</span>, dataStr.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">50</span>));</span><br><span class="line">              <span class="keyword">const</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(dataStr) <span class="keyword">as</span> T;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;JSON 解析成功&#x27;</span>);</span><br><span class="line">              <span class="title function_">resolve</span>(result);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;处理响应失败:&#x27;</span>, error);</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;原始数据前200:&#x27;</span>, (response.<span class="property">result</span> <span class="keyword">as</span> <span class="built_in">string</span>)?.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">200</span>));</span><br><span class="line">              <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;处理响应失败: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> response.<span class="property">result</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;收到字符串数据，长度:&#x27;</span>, response.<span class="property">result</span>.<span class="property">length</span>);</span><br><span class="line">            <span class="comment">// 系统已自动解压，直接使用</span></span><br><span class="line">            dataStr = response.<span class="property">result</span>;</span><br><span class="line">            <span class="title function_">processData</span>();</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.<span class="property">result</span> <span class="keyword">instanceof</span> <span class="title class_">ArrayBuffer</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果是 ArrayBuffer，手动处理</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;收到 ArrayBuffer 数据，长度:&#x27;</span>, response.<span class="property">result</span>.<span class="property">byteLength</span>);</span><br><span class="line">            <span class="keyword">const</span> uint8 = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(response.<span class="property">result</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_">isGzipData</span>(uint8)) &#123;</span><br><span class="line">              <span class="title function_">ungzipData</span>(response.<span class="property">result</span>).<span class="title function_">then</span>(<span class="function"><span class="params">decompressed</span> =&gt;</span> &#123;</span><br><span class="line">                dataStr = decompressed;</span><br><span class="line">                <span class="comment">// 继续处理逻辑</span></span><br><span class="line">                <span class="title function_">processData</span>();</span><br><span class="line">              &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">error</span>: <span class="title class_">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;解压失败: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">return</span>; <span class="comment">// 等待异步操作完成</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> decoder = <span class="keyword">new</span> util.<span class="title class_">TextDecoder</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">              dataStr = decoder.<span class="title function_">decodeWithStream</span>(uint8);</span><br><span class="line">              <span class="comment">// 继续处理逻辑</span></span><br><span class="line">              <span class="title function_">processData</span>();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;未知响应数据类型&#x27;</span>));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// ArrayBuffer数据在各自的处理分支中调用processData()</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;数据处理失败:&#x27;</span>, error);</span><br><span class="line">          <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;数据处理失败: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`请求失败，状态码：<span class="subst">$&#123;response.responseCode&#125;</span>`</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">error</span>: <span class="title class_">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;网络请求失败:&#x27;</span>, error);</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;网络请求失败: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      httpRequest.<span class="title function_">destroy</span>(); <span class="comment">// 必须销毁</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>service/WeatherService.ts</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// service/WeatherService.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">DailyForecast</span>,</span><br><span class="line">  <span class="title class_">RealTimeWeather</span>,</span><br><span class="line">  <span class="title class_">WeatherResponse</span>,</span><br><span class="line">  <span class="title class_">LocationResponse</span>,</span><br><span class="line">  <span class="title class_">RealTimeWeatherResponse</span>,</span><br><span class="line">  <span class="title class_">DailyForecastResponse</span>,</span><br><span class="line">  <span class="title class_">LocationItem</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../model/WeatherModel&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/HttpUtil&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 和风天气API配置</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_KEY</span> = <span class="string">&#x27;dc6b637284d547fb9427f5caf4475554&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_HOST</span> = <span class="string">&#x27;https://q53yfrtevq.re.qweatherapi.com&#x27;</span>; <span class="comment">// 你的专属域名</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据城市获取天气数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> city 城市名称</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getWeatherByCity</span>(<span class="params"><span class="attr">city</span>: <span class="built_in">string</span></span>): <span class="title class_">Promise</span>&lt;<span class="title class_">WeatherResponse</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 获取城市Location ID - 移除禁用压缩参数，让服务器正常 gzip，fetch 自动处理</span></span><br><span class="line">    <span class="keyword">const</span> baseParams = <span class="string">`location=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(city)&#125;</span>&amp;key=<span class="subst">$&#123;API_KEY&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">const</span> locationUrl = <span class="string">`<span class="subst">$&#123;API_HOST&#125;</span>/geo/v2/city/lookup?<span class="subst">$&#123;baseParams&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求位置URL:&#x27;</span>, locationUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> locationRes = <span class="keyword">await</span> request&lt;<span class="title class_">LocationResponse</span>&gt;(locationUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;位置响应成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!locationRes.<span class="property">location</span> || locationRes.<span class="property">location</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;未找到该城市的天气数据&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> locationId = locationRes.<span class="property">location</span>[<span class="number">0</span>].<span class="property">id</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;找到城市ID:&#x27;</span>, locationId, <span class="string">&#x27;城市名:&#x27;</span>, locationRes.<span class="property">location</span>[<span class="number">0</span>].<span class="property">name</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 获取实时天气 - 移除禁用压缩参数</span></span><br><span class="line">    <span class="keyword">const</span> weatherParams = <span class="string">`location=<span class="subst">$&#123;locationId&#125;</span>&amp;key=<span class="subst">$&#123;API_KEY&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">const</span> realTimeUrl = <span class="string">`<span class="subst">$&#123;API_HOST&#125;</span>/v7/weather/now?<span class="subst">$&#123;weatherParams&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求实时天气URL:&#x27;</span>, realTimeUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> realTimeRes = <span class="keyword">await</span> request&lt;<span class="title class_">RealTimeWeatherResponse</span>&gt;(realTimeUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;实时天气响应成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 获取未来3天预报</span></span><br><span class="line">    <span class="keyword">const</span> dailyUrl = <span class="string">`<span class="subst">$&#123;API_HOST&#125;</span>/v7/weather/3d?<span class="subst">$&#123;weatherParams&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求天气预报URL:&#x27;</span>, dailyUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dailyRes = <span class="keyword">await</span> request&lt;<span class="title class_">DailyForecastResponse</span>&gt;(dailyUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;天气预报响应成功&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据转换（保持不变）</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">realTime</span>: <span class="title class_">RealTimeWeather</span> = &#123;</span><br><span class="line">      <span class="attr">temp</span>: realTimeRes.<span class="property">now</span>.<span class="property">temp</span>,</span><br><span class="line">      <span class="attr">text</span>: realTimeRes.<span class="property">now</span>.<span class="property">text</span>,</span><br><span class="line">      <span class="attr">windDir</span>: realTimeRes.<span class="property">now</span>.<span class="property">windDir</span>,</span><br><span class="line">      <span class="attr">windScale</span>: realTimeRes.<span class="property">now</span>.<span class="property">windScale</span>,</span><br><span class="line">      <span class="attr">humidity</span>: realTimeRes.<span class="property">now</span>.<span class="property">humidity</span>,</span><br><span class="line">      <span class="attr">updateTime</span>: realTimeRes.<span class="property">updateTime</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">dailyForecasts</span>: <span class="title class_">DailyForecast</span>[] = dailyRes.<span class="property">daily</span>.<span class="title function_">map</span>((<span class="attr">item</span>: <span class="title class_">DailyForecast</span>): <span class="function"><span class="params">DailyForecast</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">fxDate</span>: item.<span class="property">fxDate</span>,</span><br><span class="line">      <span class="attr">tempMax</span>: item.<span class="property">tempMax</span>,</span><br><span class="line">      <span class="attr">tempMin</span>: item.<span class="property">tempMin</span>,</span><br><span class="line">      <span class="attr">textDay</span>: item.<span class="property">textDay</span></span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;数据处理完成&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123; realTime, dailyForecasts &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取天气失败:&#x27;</span>, error);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(error.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>model/WeatherModel.ts</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// model/WeatherModel.ts</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实时天气数据模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">RealTimeWeather</span> &#123;</span><br><span class="line">  <span class="attr">temp</span>: <span class="built_in">string</span>; <span class="comment">// 温度</span></span><br><span class="line">  <span class="attr">text</span>: <span class="built_in">string</span>; <span class="comment">// 天气状况（晴/雨/多云）</span></span><br><span class="line">  <span class="attr">windDir</span>: <span class="built_in">string</span>; <span class="comment">// 风向</span></span><br><span class="line">  <span class="attr">windScale</span>: <span class="built_in">string</span>; <span class="comment">// 风力等级</span></span><br><span class="line">  <span class="attr">humidity</span>: <span class="built_in">string</span>; <span class="comment">// 湿度</span></span><br><span class="line">  <span class="attr">updateTime</span>: <span class="built_in">string</span>; <span class="comment">// 更新时间</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 未来预报数据模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">DailyForecast</span> &#123;</span><br><span class="line">  <span class="attr">fxDate</span>: <span class="built_in">string</span>; <span class="comment">// 日期</span></span><br><span class="line">  <span class="attr">tempMax</span>: <span class="built_in">string</span>; <span class="comment">// 最高温</span></span><br><span class="line">  <span class="attr">tempMin</span>: <span class="built_in">string</span>; <span class="comment">// 最低温</span></span><br><span class="line">  <span class="attr">textDay</span>: <span class="built_in">string</span>; <span class="comment">// 白天天气状况</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 天气响应体模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WeatherResponse</span> &#123;</span><br><span class="line">  <span class="attr">realTime</span>: <span class="title class_">RealTimeWeather</span>;</span><br><span class="line">  <span class="attr">dailyForecasts</span>: <span class="title class_">DailyForecast</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 位置查询响应模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">LocationItem</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">LocationResponse</span> &#123;</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">LocationItem</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实时天气响应模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">RealTimeWeatherResponse</span> &#123;</span><br><span class="line">  <span class="attr">now</span>: <span class="title class_">RealTimeWeather</span>;</span><br><span class="line">  <span class="attr">updateTime</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 未来预报响应模型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">DailyForecastResponse</span> &#123;</span><br><span class="line">  <span class="attr">daily</span>: <span class="title class_">DailyForecast</span>[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pages/WeatherPage.ts</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DailyForecast</span>, <span class="title class_">RealTimeWeather</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/WeatherModel&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getWeatherByCity &#125; <span class="keyword">from</span> <span class="string">&#x27;../service/WeatherService&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WeatherPage</span> &#123;</span><br><span class="line">  <span class="comment">// 状态管理</span></span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">cityName</span>: <span class="built_in">string</span> = <span class="string">&#x27;北京&#x27;</span>; <span class="comment">// 默认查询北京</span></span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">inputCity</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">realTimeWeather</span>: <span class="title class_">RealTimeWeather</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">dailyForecasts</span>: <span class="title class_">DailyForecast</span>[] = [];</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">isLoading</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">errorMsg</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 页面加载时初始化数据</span></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">fetchWeatherData</span>(<span class="variable language_">this</span>.<span class="property">cityName</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// 标题区域</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;鸿蒙天气&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span>, <span class="attr">bottom</span>: <span class="number">15</span> &#125;)</span><br><span class="line">        .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 城市查询区域</span></span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">placeholder</span>: <span class="string">&#x27;请输入城市名称...&#x27;</span>, <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">inputCity</span> &#125;)</span><br><span class="line">          .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">inputCity</span> = value;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;70%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">radius</span>: <span class="number">8</span>, <span class="attr">color</span>: <span class="string">&#x27;#E5E5E5&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;查询&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#007DFF&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          .<span class="title function_">borderRadius</span>(<span class="number">8</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">inputCity</span>.<span class="title function_">trim</span>()) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">fetchWeatherData</span>(<span class="variable language_">this</span>.<span class="property">inputCity</span>.<span class="title function_">trim</span>());</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span>, <span class="attr">right</span>: <span class="number">15</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 加载状态提示</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isLoading</span>) &#123;</span><br><span class="line">        <span class="title class_">LoadingProgress</span>()</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 错误提示</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">errorMsg</span>) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">errorMsg</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="string">&#x27;#FF4D4F&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 实时天气展示</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">realTimeWeather</span>) &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.cityName&#125;</span> 实时天气`</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span> &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.temp&#125;</span>°C`</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">48</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>);</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">realTimeWeather</span>.<span class="property">text</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">5</span> &#125;);</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`更新时间：<span class="subst">$&#123;<span class="variable language_">this</span>.formatTime(<span class="variable language_">this</span>.realTimeWeather.updateTime)&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="string">&#x27;#999&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">15</span> &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 天气详情</span></span><br><span class="line">          <span class="title class_">Grid</span>() &#123;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">buildWeatherInfoItem</span>(<span class="string">&#x27;风向&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.windDir&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">buildWeatherInfoItem</span>(<span class="string">&#x27;风力&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.windScale&#125;</span>级`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">buildWeatherInfoItem</span>(<span class="string">&#x27;湿度&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.humidity&#125;</span>%`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">30</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="number">12</span>)</span><br><span class="line">        .<span class="title function_">shadow</span>(&#123; <span class="attr">radius</span>: <span class="number">4</span>, <span class="attr">color</span>: <span class="string">&#x27;#00000010&#x27;</span>, <span class="attr">offsetX</span>: <span class="number">0</span>, <span class="attr">offsetY</span>: <span class="number">2</span> &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 未来预报展示</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dailyForecasts</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;未来3天预报&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dailyForecasts</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">DailyForecast</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="property">fxDate</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>);</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="property">textDay</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>);</span><br><span class="line">                <span class="title class_">Text</span>(<span class="string">`↑<span class="subst">$&#123;item.tempMax&#125;</span>°C`</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>(<span class="string">&#x27;#FF4D4F&#x27;</span>);</span><br><span class="line">                <span class="title class_">Text</span>(<span class="string">`↓<span class="subst">$&#123;item.tempMin&#125;</span>°C`</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>(<span class="string">&#x27;#007DFF&#x27;</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              .<span class="title function_">padding</span>(<span class="number">15</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">8</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span>, <span class="attr">right</span>: <span class="number">15</span> &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F8F8F8&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 构建天气信息子项</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">buildWeatherInfoItem</span>(<span class="params"><span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(title)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="string">&#x27;#999&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">5</span> &#125;);</span><br><span class="line">      <span class="title class_">Text</span>(value)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 格式化时间</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">formatTime</span>(<span class="attr">timeStr</span>: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> timeStr.<span class="title function_">replace</span>(<span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27; &#x27;</span>).<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取天气数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">async</span> <span class="title function_">fetchWeatherData</span>(<span class="params"><span class="attr">city</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">errorMsg</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> weatherData = <span class="keyword">await</span> <span class="title function_">getWeatherByCity</span>(city);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cityName</span> = city;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">realTimeWeather</span> = weatherData.<span class="property">realTime</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dailyForecasts</span> = weatherData.<span class="property">dailyForecasts</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">errorMsg</span> = error.<span class="property">message</span> || <span class="string">&#x27;获取天气数据失败，请重试&#x27;</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;获取天气失败：&#x27;</span>, error);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0.C语言概述</title>
      <link href="/2026/01/28/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/C%E8%AF%AD%E8%A8%80/0-C%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/"/>
      <url>/2026/01/28/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/C%E8%AF%AD%E8%A8%80/0-C%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<a href="https://player.bilibili.com/player.html?bvid=BV1sM4y1v7ci&autoplay=0," title="基础,https:&#x2F;&#x2F;www.faviconextractor.com&#x2F;favicon&#x2F;bilibili.com?larger&#x3D;true, https:&#x2F;&#x2F;player.bilibili.com&#x2F;player.html?bvid&#x3D;BV1sM4y1v7ci&amp;autoplay&#x3D;0" target=""></a><a href="https://player.bilibili.com/player.html?bvid=BV1s64y1M7ZV&autoplay=0," title="进阶,https:&#x2F;&#x2F;www.faviconextractor.com&#x2F;favicon&#x2F;bilibili.com?larger&#x3D;true, https:&#x2F;&#x2F;player.bilibili.com&#x2F;player.html?bvid&#x3D;BV1s64y1M7ZV&amp;autoplay&#x3D;0" target=""></a><h1 id="写代码过程"><a class="markdownIt-Anchor" href="#写代码过程"></a> 写代码过程</h1><p>编辑器：程序员写代码的过程</p><p>编译器：查看代码的语法错误，生成汇编语言</p><p>汇编语言：将生成好汇编语言生成二进制语言（目标文件）</p><p>连接器：将生成好的二进制语言+用到的库+启动代码==&gt;可执行代码</p><h1 id="完整代码分析"><a class="markdownIt-Anchor" href="#完整代码分析"></a> 完整代码分析</h1><blockquote><p>行注释：</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//注释内容，行注释</span></span><br></pre></td></tr></table></figure><blockquote><p>块注释：</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    意思：块注释（不能嵌套）</span></span><br><span class="line"><span class="comment">    内容</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><blockquote><p>符号： ;         意思：C语言语句结束标志</p></blockquote><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//行注释:</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span><span class="comment">//std 标准 i输入 o输出（标准的输入输出头文件）</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 块注释 不能嵌套</span></span><br><span class="line"><span class="comment">    main 是程序的入口 有且仅有一个</span></span><br><span class="line"><span class="comment">    main左边的int 代表的是函数的返回值类型</span></span><br><span class="line"><span class="comment">    ()里面函数的形参（函数外部将数据传递到函数内部的桥梁）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc,<span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//函数的功能都在&#123;&#125;里面实现</span></span><br><span class="line">    <span class="comment">//使用任何东西 必先存在</span></span><br><span class="line">    <span class="comment">//printf:将&quot;&quot;中的字符串 输出到 终端上</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello iot\n&quot;</span>);<span class="comment">//来至系统库文件</span></span><br><span class="line">    <span class="comment">//;c语言的语句结束标记</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果你的代码 一闪而过 可以用带阻塞的代码</span></span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="变量-函数在不同c文件中使用"><a class="markdownIt-Anchor" href="#变量-函数在不同c文件中使用"></a> 变量、函数在不同.c文件中使用</h1><blockquote><p>extern本质：告诉编译器 变量、函数 来至其他源文件</p><p>注意：static用于全局变量或函数前时，它将该变量或函数的可见性限制在定义它的文件内部</p></blockquote><p>如果.c文件中的变量或函数，在对应的.h文件中声明了变量或函数，在别的 .c 文件中只需要生命对应的头文件，即可访问别的.C文件中的函数或变量，若不生命对应的头文件，则需要时候外加extern 来声明变量或函数</p>]]></content>
      
      
      <categories>
          
          <category> C语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学术文献大全</title>
      <link href="/2025/10/19/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E5%AD%A6%E6%9C%AF%E6%96%87%E7%8C%AE%E5%A4%A7%E5%85%A8/"/>
      <url>/2025/10/19/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E5%AD%A6%E6%9C%AF%E6%96%87%E7%8C%AE%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="知网"><a class="markdownIt-Anchor" href="#知网"></a> 知网</h1><p>通过注册广州图书馆，进入知网，下面注册广州图书馆，扫描二维码注册即可</p><img src="https://s2.loli.net/2025/12/28/3a1VmTUMGv2SRgX.webp" alt="e32cd70c93c05fa3f264e8d6f22d9fd6" style="zoom:50%;" /><p>注册后通过 <a href="https://www.gzlib.org.cn/">广州图书馆</a>，登录后进入 <a href="https://www.gzlib.org.cn/digitalresources.jhtml">这个页面</a>，然后点击下面图片打开知网，打开后会自动登录广州图书馆的账号，无需重新登录账号</p><img src="https://s2.loli.net/2025/12/28/pL3WJsd9Ec6arqO.webp" alt="image-20251019151458848" style="zoom:50%;" /><h2 id="学术引用"><a class="markdownIt-Anchor" href="#学术引用"></a> 学术引用</h2><p>进入知网后，点击“高级索引”</p><img src="https://s2.loli.net/2025/12/28/fMDoy2eWvlNmHTJ.webp" alt="image-20251019151843774" style="zoom:50%;" /><p>填写对应需要搜索的信息后检索，点击“引号图标”即可引用</p><img src="https://s2.loli.net/2025/12/28/AKvWOXDqETpNa5P.webp" alt="image-20251019152549811" style="zoom:50%;" /><p>选择第一项即可</p><img src="https://s2.loli.net/2025/12/28/tE8SLdRg4qVACKn.webp" alt="image-20251019152708866" style="zoom:50%;" /><h1 id="谷歌学术"><a class="markdownIt-Anchor" href="#谷歌学术"></a> 谷歌学术</h1><p>镜像网址：<a href="https://ac.scmor.com/">https://ac.scmor.com/</a></p><p>官方网址：<a href="https://scholar.google.com/schhp?hl=zh-CN&amp;as_sdt=0,5">https://scholar.google.com/schhp?hl=zh-CN&amp;as_sdt=0,5</a></p><h1 id="百度学术"><a class="markdownIt-Anchor" href="#百度学术"></a> 百度学术</h1><p>官方网址：<a href="https://xueshu.baidu.com/?source=chemnav.net">https://xueshu.baidu.com/?source=chemnav.net</a></p><h1 id="查重"><a class="markdownIt-Anchor" href="#查重"></a> 查重</h1><p>PaperPass，每日5篇免费查重，<a href="https://www.paperpass.com/panel/index">网址</a></p><p>PaperBye，每天免费查重3篇，<a href="https://www.paperbye.com/paper/uploadText.html?from=register">网址</a></p><p>FreeCheck，每天免费查重1篇，<a href="https://www.freecheck.cn/member/uploadreport">网址</a></p><p>Copyleaks，还不知道限制，<a href="https://app.copyleaks.com/zh/dashboard/v1/account/new-scan">网址</a></p><p>学信网万方，应届生1次免费查重，<a href="https://chsi.wanfangtech.net/">网址</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学术文献 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>星海物联用户服务协议</title>
      <link href="/2025/10/05/%E6%9D%82%E9%A1%B9/TOS/"/>
      <url>/2025/10/05/%E6%9D%82%E9%A1%B9/TOS/</url>
      
        <content type="html"><![CDATA[<h1 id="星海物联用户服务协议"><a class="markdownIt-Anchor" href="#星海物联用户服务协议"></a> 星海物联用户服务协议</h1><p>星仔 2025-09-262025-09-26</p><h2 id="星海物联用户服务协议-2"><a class="markdownIt-Anchor" href="#星海物联用户服务协议-2"></a> 星海物联用户服务协议</h2><p>更新日期：2025 年 9 月 26 日</p><h5 id="1-关于我们"><a class="markdownIt-Anchor" href="#1-关于我们"></a> 1. 关于我们</h5><p>感谢您选择使用星海物联（软件或服务名称）。</p><p>星海物联（软件或服务名称）是由林旭新个人开发（以下简称 “我们” 或 “XX”）提供与运营。</p><p>星海物联用户服务协议是林旭新与用户（以下简称 “您”）关于使用星海物联软件服务所订立的有效协议。</p><h5 id="2-协议范围-目的及确认方式"><a class="markdownIt-Anchor" href="#2-协议范围-目的及确认方式"></a> 2. 协议范围、目的及确认方式</h5><p>本用户服务协议及附属协议，以及页面展示的单项协议或规则、操作提示（以下合称为 “本协议”）是我们为您提供星海物联服务所依据的条款，不可分割，您需同时遵守。</p><p>请您仔细阅读本协议的全部内容，特别是字体加粗部分。</p><p>如您对本协议内容及页面提示信息有疑问，请勿进行下一步操作。如您使用星海物联服务即视为您已阅读并同意本协议的约束。</p><p>如果您不同意本协议的任意内容，或无法准确理解条款内容，请停止使用，不要进行后续操作。</p><h5 id="3-使用本服务的要求"><a class="markdownIt-Anchor" href="#3-使用本服务的要求"></a> 3. 使用本服务的要求</h5><p><strong>3.1 您具备完全民事行为能力，方可使用星海物联服务，若您为无民事行为能力或为限制民事行为能力，请告知您的监护人，在您监护人的指导下阅读本协议，并在取得您监护人同意的前提下使用星海物联服务；</strong></p><p><strong>3.2 您明确声明和保证：您具备足够的法律权利或授权来签署和履行本协议；您对于本协议的签署和履行不会对您须履行的任何其他协议、安排造成冲突或导致违约；</strong></p><p>3.3 如您所属的国家或地区排除本协议的全部或部分内容，则您应立即停止使用星海物联服务，否则，您继续使用星海物联服务视为您同意承担相关的法律风险或法律责任。</p><h5 id="4-服务内容"><a class="markdownIt-Anchor" href="#4-服务内容"></a> 4. 服务内容</h5><p>星海物联（服务名称）是第三方服务器（服务主体机构简称）通过互联网（含移动互联网）为您提供的星海物联服务平台。</p><h5 id="5-用户使用规则"><a class="markdownIt-Anchor" href="#5-用户使用规则"></a> 5. 用户使用规则</h5><p><strong>5.1 您使用您身份要素来进行的操作、发出的指令视为您本来做出，您应对您使用身份要素进行的所有行为产生的结果（包括但不限于签署各类协议、发布信息、支付购买商品及服务及披露信息等）负责，因您的原因造成的账户、密码等信息被冒用、盗用或非法使用，由此引起的风险和损失需要由您自行承担；</strong></p><p><strong>5.2 您在使用星海物联服务时，请务必仔细填写并核对您的用户名、性别、手机号、密码、生日等信息，确保其真实、准确、完整有效；</strong></p><p><strong>5.3 请您结合自身实际需求，充分考虑用户名、性别、手机号、密码、生日等信息，确认并选择使用星海物联服务；</strong></p><p><strong>5.4 您知悉并同意，如因为您自身出现输入错误、操作不当、选择错误等情形，您需自行承担所受到的经济损失及后果。</strong></p><h5 id="6-免责声明"><a class="markdownIt-Anchor" href="#6-免责声明"></a> 6. 免责声明</h5><p><strong>第三方服务基于互联网及电信网络提供服务，在您使用星海物联服务之前，应对电子商务业务、AI 服务可能蕴含的风险有一定的了解。</strong></p><p><strong>由于网络故障、系统检修、维护或不稳定，或黑客攻击，或电力部门技术调整或故障，或银行等原因，导致设备模块服务存在失败、中断或延迟的，不是第三方服务（服务主体机构简称）违约，但第三方服务（服务主体机构简称）将尽一切努力恢复正常服务。</strong></p><p><strong>第三方服务（服务主体机构简称）为技术服务平台仅按现状提供服务，在法律允许的范围内，第三方服务（服务主体机构简称）对以下情形导致的服务中断、延迟受阻不承担责任：</strong></p><p><strong>（1） 受到计算机病毒、木马或其他恶意程序、黑客攻击的破坏；</strong></p><p><strong>（2） 您、第三方的电脑软件、系统、硬件、网络和通信线路出现故障；</strong></p><p><strong>（3） 您操作不当，包括但不限于提交错误的信息，或程序出错；</strong></p><p><strong>（4） 其他第三方服务（服务主体机构简称）无法控制或合理预见的情形。</strong></p><h5 id="7-用户禁止性规定"><a class="markdownIt-Anchor" href="#7-用户禁止性规定"></a> 7. 用户禁止性规定</h5><p><strong>您在使用本软件时必须遵守法律法规，不得利用本软件提供的服务从事违法违规行为，包括但不限于：</strong></p><p>（1） 发布、传送、传播、存储危害国家安全统一、破坏社会稳定、违反公序良俗、侮辱、诽谤、淫秽、暴力以及任何违反国家法律法规的内容；</p><p>（2） 发布、传送、传播、存储侵害他人知识产权、商业秘密等合法权利的内容；</p><p>（3） 恶意虚构事实、隐瞒真相以误导、欺骗他人；</p><p>（4） 发布、传送、传播广告信息及垃圾信息；</p><p>（5） 其他法律法规禁止的行为。</p><p><strong>如因您违反本条约定，导致任何第三方损害的，您应独立承担责任；第三方服务（服务主体机构名称）因此遭受损失的，您也应当一并赔偿。</strong></p><h5 id="8-对本协议的修订"><a class="markdownIt-Anchor" href="#8-对本协议的修订"></a> 8. 对本协议的修订</h5><p>第三方服务（服务主体机构名称）有权在必要时修改本协议条款，您可以在本软件的最新版本中查阅相关协议条款。</p><p>更新后的协议条款一旦公布即代替原来的协议条款，我们会在服务页面上及时发布对本协议的变更。若对本协议的修订会严重影响您或严重限制您对本服务的访问或使用，我们会在变更之前的合理时间内通知您。对于为了满足安全、法律或监管要求而对本服务作出的修订，我们可能无法满足前述的预告时间要求，但我们会尽快通知您。</p><p><strong>本协议条款变更后，如果您不接受修改后的协议，请立即停止使用本服务；如果您继续访问或使用本服务，即被视为您已接受修改后的协议。</strong></p><h5 id="9-适用法律及管辖"><a class="markdownIt-Anchor" href="#9-适用法律及管辖"></a> 9. 适用法律及管辖</h5><p><strong>本协议的订立、执行、解释及争议的解决均适用中华人民共和国法律。</strong></p><p>您同意，本协议签订地为__中国广东省省佛山市市南海区区__（服务主体机构注册地址，到城市区域）。</p><p>在合同履行过程中双方如发生纠纷，应协商解决；<strong>协商不成的，双方应向协议签订地有管辖权的人民法院以诉讼的方式解决。</strong></p><h5 id="10-联系我们"><a class="markdownIt-Anchor" href="#10-联系我们"></a> 10. 联系我们</h5><p>如您对本协议有任何疑问，请通过邮箱（xinzai6856@163.com）联系我们。</p>]]></content>
      
      
      <categories>
          
          <category> 杂项 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 星海物联协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.功能测试</title>
      <link href="/2025/09/25/%E8%BD%AF%E6%B5%8B/2-%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
      <url>/2025/09/25/%E8%BD%AF%E6%B5%8B/2-%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>2xx：表示成功，如：200、202、204等</p><p>3xx：表示数据路径发生给改变，需要重定向，如：302、304等</p><p>4xx：表示客户端问题，如：404、403等</p><p>5xx：表示服务器错误，如：500、503等</p>]]></content>
      
      
      <categories>
          
          <category> 软测 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows相关设置</title>
      <link href="/2025/09/23/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/Windows%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/"/>
      <url>/2025/09/23/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/Windows%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="win11-使用-win10的文件资源管理器"><a class="markdownIt-Anchor" href="#win11-使用-win10的文件资源管理器"></a> Win11 使用 Win10的文件资源管理器</h1><p>在 Windows 11 中恢复旧文件资源管理器 首先打开记事本并粘贴以下文本代码，然后保存，将记事本重命名为：文件名.reg，如：<code>file.reg</code>，然后双击添加注册表即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_CURRENT_USER\Software\Classes\CLSID\&#123;2aa9162e-c906-4dd9-ad0b-3d24a8eef5a0&#125;]</span><br><span class="line">@=&quot;CLSID_ItemsViewAdapter&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CURRENT_USER\Software\Classes\CLSID\&#123;2aa9162e-c906-4dd9-ad0b-3d24a8eef5a0&#125;\InProcServer32]</span><br><span class="line">@=&quot;C:\\Windows\\System32\\Windows.UI.FileExplorer.dll_&quot;</span><br><span class="line">&quot;ThreadingModel&quot;=&quot;Apartment&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CURRENT_USER\Software\Classes\CLSID\&#123;6480100b-5a83-4d1e-9f69-8ae5a88e9a33&#125;]</span><br><span class="line">@=&quot;File Explorer Xaml Island View Adapter&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CURRENT_USER\Software\Classes\CLSID\&#123;6480100b-5a83-4d1e-9f69-8ae5a88e9a33&#125;\InProcServer32]</span><br><span class="line">@=&quot;C:\\Windows\\System32\\Windows.UI.FileExplorer.dll_&quot;</span><br><span class="line">&quot;ThreadingModel&quot;=&quot;Apartment&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Toolbar\ShellBrowser]</span><br><span class="line">&quot;ITBar7Layout&quot;=hex:13,00,00,00,00,00,00,00,00,00,00,00,20,00,00,00,10,00,01,00,\</span><br><span class="line">  00,00,00,00,01,00,00,00,01,07,00,00,5e,01,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,\</span><br><span class="line">  00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br></pre></td></tr></table></figure><p>关闭 Windows 10 的文件资源管理器，切换回 Windows 11</p><p>再次打开记事本，把下面的文本粘贴进去，保存同样的 .reg 文件，双击执行即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00 </span><br><span class="line"></span><br><span class="line">[-HKEY_CURRENT_USER\Software\Classes\CLSID\&#123;2aa9162e-c906-4dd9-ad0b-3d24a8eef5a0&#125;] </span><br><span class="line"></span><br><span class="line">[-HKEY_CURRENT_USER\Software\Classes\CLSID\&#123;6480100b-5a83-4d1e-9f69-8ae5a88e9a33&#125;]</span><br></pre></td></tr></table></figure><h1 id="win11右键修改成win10"><a class="markdownIt-Anchor" href="#win11右键修改成win10"></a> Win11右键修改成Win10</h1><p><code>win + r</code>以管理员运行命令窗口，输入下列代码，重启电脑或文件管理区</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reg add &quot;HKCU\Software\Classes\CLSID\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\InprocServer32&quot; /f /ve</span><br></pre></td></tr></table></figure><p>恢复，与上相同方法</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reg delete &quot;HKCU\Software\Classes\CLSID\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;&quot; /f</span><br></pre></td></tr></table></figure><h1 id="win11关闭桌面拖动到此处分享"><a class="markdownIt-Anchor" href="#win11关闭桌面拖动到此处分享"></a> Win11关闭桌面拖动到此处分享</h1><p><img src="https://s2.loli.net/2025/12/28/Gsrf3TnK8NhERdZ.png" alt="" /></p><p>在管理员命令窗口中输入下面代码后回车执行，然后重启电脑</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reg add &quot;HKLM\SYSTEM\ControlSet001\Control\FeatureManagement\Overrides\14\3895955085&quot; /v EnabledState /t REG_DWORD /d 1 /f &amp; reg add &quot;HKLM\SYSTEM\ControlSet001\Control\FeatureManagement\Overrides\14\3895955085&quot; /v EnabledStateOptions /t REG_DWORD /d 0 /f</span><br></pre></td></tr></table></figure><h1 id="家庭版系统增加hyper-v"><a class="markdownIt-Anchor" href="#家庭版系统增加hyper-v"></a> 家庭版系统增加Hyper-V</h1><p>新建txt文件，将下面复制进去，改名为<code>Hyper-V.bat</code>，以管理员身份运行，然后重启电脑</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pushd &quot;%~dp0&quot;</span><br><span class="line"></span><br><span class="line">dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txt</span><br><span class="line"></span><br><span class="line">for /f %%i in (&#x27;findstr /i . hyper-v.txt 2^&gt;nul&#x27;) do dism /online /norestart /add-package:&quot;%SystemRoot%\servicing\Packages\%%i&quot;</span><br><span class="line"></span><br><span class="line">del hyper-v.txt</span><br><span class="line"></span><br><span class="line">Dism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL</span><br></pre></td></tr></table></figure><h1 id="win10系统复制或新建文件后需要刷新的解决办法"><a class="markdownIt-Anchor" href="#win10系统复制或新建文件后需要刷新的解决办法"></a> Win10系统复制或新建文件后需要刷新的解决办法</h1><p>按Win + r输入 regedit 后回车，在注册表中依次展开并定位到HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control，在Control 文件夹下新建一个名为Updata项，再刚创建的Updata文件夹下再创建一个UpdataMode项，然后再新建一个可扩充字符串值，名为：DWORD，值为：0</p><img src="https://s2.loli.net/2025/12/28/PYOrItKf836WEwd.png" alt="新建项的方法" style="zoom:50%;" /><img src="https://s2.loli.net/2025/12/28/6YnwEXKQRotWAVc.png" alt="新建可扩充字符串值方法" style="zoom:50%;" /><h1 id="火狐浏览器优化"><a class="markdownIt-Anchor" href="#火狐浏览器优化"></a> 火狐浏览器优化</h1><p>iTab 标签设置：</p><p><a href="https://itab.link/install/firefox.html">🌏Firefox安装教程 | iTab新标签页</a></p><p>配置滚轮切换标签：</p><p><a href="https://linux.do/t/topic/359819">火狐浏览器两个非常适合国人的配置项——滚轮切换标签页、双击关闭标签页</a></p><p>配置双击关闭标签：</p><p><a href="https://blog.csdn.net/weixin_45498383/article/details/127865392">开启火狐浏览器 Firefox 原生「双击关闭标签页」功能_firefox双击关闭标签页-CSDN博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术积累 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows相关设置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.MySQL进阶</title>
      <link href="/2025/09/14/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/2-MySQL%E8%BF%9B%E9%98%B6/"/>
      <url>/2025/09/14/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/2-MySQL%E8%BF%9B%E9%98%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="视图"><a class="markdownIt-Anchor" href="#视图"></a> 视图</h1><p>一个虚拟表，非真实存在，其本质是根据SQL语句获取动态的数据集，并为其命名，用户使用时只需使用视图名称即可获取结果集，并可以将其当作表来使用</p><p>数据库中只存放了视图的定义，而并没有存放视图中的数据。这些数据存放在原来的表中，表中的数据发生改变，显示在视图中的数据也会发生改变</p><p>作用：</p><ul><li>把重复使用的查询封装成视图重复使用，同时可以使复杂的查询易于理解和使用</li><li>安全原因，如果一张表中有很多数据，很多信息不希望让所有人看到，此时可以使用视图视</li></ul><h2 id="创建视图"><a class="markdownIt-Anchor" href="#创建视图"></a> 创建视图</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">or</span> replace] [algorithm <span class="operator">=</span> &#123;undefined <span class="operator">|</span> <span class="keyword">merge</span> <span class="operator">|</span> temptable&#125;]</span><br><span class="line"><span class="keyword">view</span> view_name [(column_list)]</span><br><span class="line"><span class="keyword">as</span> select_statement</span><br><span class="line">[<span class="keyword">with</span> [<span class="keyword">cascaded</span> <span class="operator">|</span> <span class="keyword">local</span>] <span class="keyword">check</span> option]</span><br><span class="line"></span><br><span class="line"><span class="comment">/*参数说明：</span></span><br><span class="line"><span class="comment">    algorithm：可选项，表示视图选择的算法</span></span><br><span class="line"><span class="comment">    view_name ：表示要创建的视图名称</span></span><br><span class="line"><span class="comment">    column_list：可选项，指定视图中各个属性的名词，默认情况下与SELECT语句中的查询的属性相同</span></span><br><span class="line"><span class="comment">    select_statement：表示一个完整的查询语句，将查询记录导入视图中</span></span><br><span class="line"><span class="comment">    [with [cascaded | local] check option]：可选项，表示更新视图时要保证在该视图的权限范围之内*/</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view1_emp</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表和视图</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">full</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用视图</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> view1_emp;</span><br></pre></td></tr></table></figure><h2 id="修改视图"><a class="markdownIt-Anchor" href="#修改视图"></a> 修改视图</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> 视图名 <span class="keyword">as</span> <span class="keyword">select</span>语句;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> view1_emp</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> a.deptno,a.dname,a.loc,b.ename,b.sal</span><br><span class="line"><span class="keyword">from</span> dept a,emp b <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno;</span><br></pre></td></tr></table></figure><h2 id="更新视图"><a class="markdownIt-Anchor" href="#更新视图"></a> 更新视图</h2><p>在update(修改)、delete(删除) 或 insert(插入) 等语句中更新视图(实际修改是原表的数据)</p><p>视图中虽然可以更新数据，但是有很多的限制。一般情况下，最好将视图作为查询数据的虚拟表，而不要通过视图更新数据。因为，使用视图更新数据时，如果没有全面考虑在视图中更新数据的限制，就可能会造成数据更新失败</p><p>不可更新的情况：</p><ul><li>聚合函数（sum(), min(), max(), count()等）</li><li>distinct</li><li>group by</li><li>having</li><li>union或union all</li><li>位于选择列表中的子查询</li><li>join</li><li>FROM子句中的不可更新视图</li><li>where子句中的子查询，引用from子句中的表。</li><li>仅引用文字值（在该情况下，没有要更新的基本表）</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> view1_emp <span class="keyword">set</span> ename <span class="operator">=</span> <span class="string">&#x27;周瑜&#x27;</span> <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;刘备&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 由于原表还有其它列，但视图没法看到添加只有两列其它列没添加，则添加不成功</span></span><br><span class="line"><span class="keyword">insert into</span> view1_emp <span class="keyword">values</span>(<span class="string">&#x27;孙权&#x27;</span>,<span class="string">&#x27;文员&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="重命名视图"><a class="markdownIt-Anchor" href="#重命名视图"></a> 重命名视图</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- rename table 视图名 to 新视图名; </span></span><br><span class="line">rename <span class="keyword">table</span> view1_emp <span class="keyword">to</span> my_view1</span><br></pre></td></tr></table></figure><h2 id="删除视图"><a class="markdownIt-Anchor" href="#删除视图"></a> 删除视图</h2><p>删除视图时，只能删除视图的定义，不会删除数据</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- drop view 视图名[,视图名…];</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> if <span class="keyword">exists</span> view_student;</span><br></pre></td></tr></table></figure><h1 id="存储过程"><a class="markdownIt-Anchor" href="#存储过程"></a> 存储过程</h1><p>SQL 语言层面的代码封装与重用，可以实现一些比较复杂的逻辑功能，类似于JAVA语言中的方法</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter 自定义结束符号</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> 储存名([ <span class="keyword">in</span> ,<span class="keyword">out</span> ,<span class="keyword">inout</span> ] 参数名 数据类形...)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">sql</span>语句</span><br><span class="line"><span class="keyword">end</span> 自定义的结束符合</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 自定义结束符</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="comment">-- 创建</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc01()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"> <span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用</span></span><br><span class="line"><span class="keyword">call</span> proc01;</span><br></pre></td></tr></table></figure><h2 id="变量定义"><a class="markdownIt-Anchor" href="#变量定义"></a> 变量定义</h2><h3 id="局部变量"><a class="markdownIt-Anchor" href="#局部变量"></a> 局部变量</h3><p>用户自定义，在 begin/end 块中有效</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法(声明变量)： </span></span><br><span class="line"><span class="keyword">declare</span> 变量名 变量类型及范围 [<span class="keyword">default</span> var_value]; </span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc02()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> var_name01 <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;aaa&#x27;</span>;<span class="comment">-- 定义局部变量</span></span><br><span class="line">    <span class="keyword">set</span> var_name01 <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;<span class="comment">-- 给变量赋值</span></span><br><span class="line">    <span class="keyword">select</span> var_name01;<span class="comment">-- 输出变量的值</span></span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">call</span> proc02();</span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc02()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">-- 定义局部变量</span></span><br><span class="line">    <span class="keyword">declare</span> var_name01 <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>);<span class="comment">-- 长度7，小数2</span></span><br><span class="line">    <span class="keyword">set</span> var_name01 <span class="operator">=</span> <span class="number">12.2</span>;<span class="comment">-- 给变量赋值</span></span><br><span class="line">    <span class="keyword">select</span> var_name01;<span class="comment">-- 输出变量的值</span></span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc02();</span><br></pre></td></tr></table></figure><p>还可以使用 <strong>SELECT…INTO</strong> 语句为变量赋值</p><p>当将查询结果赋值给变量时，返回结果只能是单行单列</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> col_name [...] <span class="keyword">into</span> var_name[,...] </span><br><span class="line"><span class="keyword">from</span> table_name wehre <span class="keyword">condition</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">col_name：查询字段名称</span></span><br><span class="line"><span class="comment">var_name：变量名称</span></span><br><span class="line"><span class="comment">table_name：表的名称</span></span><br><span class="line"><span class="comment">condition：查询条件*/</span></span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc03()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> my_ename <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">-- 从emp表中查询empno为1001的ename赋值给变量my_ename</span></span><br><span class="line">    <span class="keyword">select</span> ename <span class="keyword">into</span> my_ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="number">1001</span>;</span><br><span class="line">    <span class="comment">-- 输出变量的值</span></span><br><span class="line">    <span class="keyword">select</span> my_ename;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">call</span> proc03();</span><br></pre></td></tr></table></figure><h3 id="用户变量"><a class="markdownIt-Anchor" href="#用户变量"></a> 用户变量</h3><p>用户自定义，当前会话(连接)有效</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法(不需要提前声明，使用即声明)： </span></span><br><span class="line"><span class="variable">@var_name</span></span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc04()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">set</span> <span class="variable">@var_name01</span> <span class="operator">=</span> <span class="string">&#x27;ZS&#x27;</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="variable">@var_name01</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">call</span> proc04();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 外部也可以访问用户变量</span></span><br><span class="line"><span class="keyword">select</span> <span class="variable">@var_name01</span>;</span><br></pre></td></tr></table></figure><h3 id="系统变量"><a class="markdownIt-Anchor" href="#系统变量"></a> 系统变量</h3><p>对全局变量的修改会影响到整个服务器，但是对会话变量的修改，只会影响到当前的会话（也就是当前的数据库连接）</p><h4 id="全局变量"><a class="markdownIt-Anchor" href="#全局变量"></a> 全局变量</h4><p>由服务器自动将它们初始化为默认值，可以通过更改 <code>my.ini</code> 这个文件来更改</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line">@<span class="variable">@global</span>.var_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看全局变量</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> variables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看某全局变量</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.auto_increment_increment;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改全局变量的值</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> sort_buffer_size <span class="operator">=</span> <span class="number">40000</span>;</span><br><span class="line"><span class="keyword">set</span> @<span class="variable">@global</span>.sort_buffer_size <span class="operator">=</span> <span class="number">33000</span>;</span><br></pre></td></tr></table></figure><h4 id="会话变量"><a class="markdownIt-Anchor" href="#会话变量"></a> 会话变量</h4><p>每次建立一个新的连接的时候，MYSQL会将当前所有全局变量的值复制一份，来做为会话变量</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法：</span></span><br><span class="line">@<span class="variable">@session</span>.var_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看会话变量</span></span><br><span class="line"><span class="keyword">show</span> session variables;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看某会话变量 </span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@session</span>.auto_increment_increment;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改会话变量的值</span></span><br><span class="line"><span class="keyword">set</span> session sort_buffer_size <span class="operator">=</span> <span class="number">50000</span>; </span><br><span class="line"><span class="keyword">set</span> @<span class="variable">@session</span>.sort_buffer_size <span class="operator">=</span> <span class="number">50000</span> ;</span><br></pre></td></tr></table></figure><h2 id="参数传递"><a class="markdownIt-Anchor" href="#参数传递"></a> 参数传递</h2><h3 id="in"><a class="markdownIt-Anchor" href="#in"></a> in</h3><p>传入的参数</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 传入员工编号，查找员工信息</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc06(<span class="keyword">in</span> empno01 <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> empno01;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc06(<span class="number">1001</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 封装有参数的存储过程，可以通过传入部门名和薪资，查询指定部门，并且薪资大于指定值的员工信息</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> dec_param0x(<span class="keyword">in</span> dname <span class="type">varchar</span>(<span class="number">50</span>), <span class="keyword">in</span> sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept a, emp b <span class="keyword">where</span> b.sal <span class="operator">&gt;</span> sal <span class="keyword">and</span> a.dname <span class="operator">=</span> dname;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> dec_param0x(<span class="string">&#x27;学工部&#x27;</span>,<span class="number">20000</span>);</span><br></pre></td></tr></table></figure><h3 id="out"><a class="markdownIt-Anchor" href="#out"></a> out</h3><p>从存储过程内部传值给调用者</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc08(<span class="keyword">in</span> in_empno <span class="type">int</span>, <span class="keyword">out</span> out_ename <span class="type">varchar</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">-- 查询emp表中empno与传进来的参数in_empno一致的ename并且赋值给out_ename返回</span></span><br><span class="line">    <span class="keyword">select</span> ename <span class="keyword">into</span> out_ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> in_empno;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc08(<span class="number">1001</span>,<span class="variable">@o_ename</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@o_ename</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 封装有参数的存储过程，传入员工编号，返回员工名字和薪资</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc09(<span class="keyword">in</span> empno <span class="type">int</span> , <span class="keyword">out</span> out_ename <span class="type">varchar</span>(<span class="number">50</span>) , <span class="keyword">out</span> out_sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> ename,sal <span class="keyword">into</span> out_ename,out_sal <span class="keyword">from</span> emp <span class="keyword">where</span> emp.empno <span class="operator">=</span> empno;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">call</span> proc09(<span class="number">1001</span>, <span class="variable">@o_dname</span>,<span class="variable">@o_sal</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@o_dname</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@o_sal</span>;</span><br></pre></td></tr></table></figure><h3 id="inout"><a class="markdownIt-Anchor" href="#inout"></a> inout</h3><p>从外部传入的参数经过修改后返回的变量</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc10(<span class="keyword">inout</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">set</span> num <span class="operator">=</span> num <span class="operator">*</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@inout_num</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">call</span> proc10(<span class="variable">@inout_num</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@inout_num</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 传入员工名，拼接部门号，传入薪资，求出年薪</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc10(<span class="keyword">inout</span> inout_ename <span class="type">varchar</span>(<span class="number">50</span>), <span class="keyword">inout</span> inout_sal <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span>  concat(deptno,&quot;_&quot;,inout_ename) <span class="keyword">into</span> inout_ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> inout_ename;</span><br><span class="line">  <span class="keyword">set</span> inout_sal <span class="operator">=</span> inout_sal <span class="operator">*</span> <span class="number">12</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@inout_ename</span> <span class="operator">=</span> <span class="string">&#x27;关羽&#x27;</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@inout_sal</span> <span class="operator">=</span> <span class="number">3000</span>;</span><br><span class="line"><span class="keyword">call</span> proc10(<span class="variable">@inout_ename</span>, <span class="variable">@inout_sal</span>) ;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@inout_ename</span> ;</span><br><span class="line"><span class="keyword">select</span> <span class="variable">@inout_sal</span> ;</span><br></pre></td></tr></table></figure><h2 id="流程控制"><a class="markdownIt-Anchor" href="#流程控制"></a> 流程控制</h2><h3 id="分支语句"><a class="markdownIt-Anchor" href="#分支语句"></a> 分支语句</h3><h4 id="if"><a class="markdownIt-Anchor" href="#if"></a> if</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line">if search_condition_1 <span class="keyword">then</span> statement_list_1</span><br><span class="line">    [elseif search_condition_2 <span class="keyword">then</span> statement_list_2] ...</span><br><span class="line">    [<span class="keyword">else</span> statement_list_n]</span><br><span class="line"><span class="keyword">end</span> if</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输入学生的成绩，来判断成绩的级别：</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_12_if(<span class="keyword">in</span> score <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    if score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;不及格&#x27;</span>;</span><br><span class="line">    elseif score <span class="operator">&lt;</span> <span class="number">80</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;及格&#x27;</span>;</span><br><span class="line">    elseif score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">and</span> score <span class="operator">&lt;</span> <span class="number">90</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;良好&#x27;</span>;</span><br><span class="line">    elseif score <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">and</span> socre <span class="operator">&lt;=</span> <span class="number">100</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;优秀&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc_12_if(<span class="number">88</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 输入员工的名字，判断工资的情况。</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc12_if(<span class="keyword">in</span> in_ename <span class="type">varchar</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> <span class="keyword">result</span> <span class="type">varchar</span>(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">declare</span> var_sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">select</span> sal <span class="keyword">into</span>  var_sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> in_ename;</span><br><span class="line">    if var_sal <span class="operator">&lt;</span> <span class="number">10000</span> </span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;试用薪资&#x27;</span>;</span><br><span class="line">    elseif var_sal <span class="operator">&lt;</span> <span class="number">30000</span></span><br><span class="line">        <span class="keyword">then</span> <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;转正薪资&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">set</span> <span class="keyword">result</span> <span class="operator">=</span> <span class="string">&#x27;元老薪资&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="keyword">end</span>$$</span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">call</span> proc12_if(<span class="string">&#x27;庞统&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="case"><a class="markdownIt-Anchor" href="#case"></a> case</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 语法一（类比java的switch）：</span></span><br><span class="line"><span class="keyword">case</span> case_value</span><br><span class="line">    <span class="keyword">when</span> when_value <span class="keyword">then</span> statement_list</span><br><span class="line">    [<span class="keyword">when</span> when_value <span class="keyword">then</span> statement_list] ...</span><br><span class="line">    [<span class="keyword">else</span> statement_list]</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 语法二：</span></span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">    <span class="keyword">when</span> search_condition <span class="keyword">then</span> statement_list</span><br><span class="line">    [<span class="keyword">when</span> search_condition <span class="keyword">then</span> statement_list] ...</span><br><span class="line">    [<span class="keyword">else</span> statement_list]</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> pro14_case(<span class="keyword">in</span> pay_type <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">case</span> pay_type</span><br><span class="line">        <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="keyword">select</span> <span class="string">&#x27;微信支付&#x27;</span>;</span><br><span class="line">        <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="keyword">select</span> <span class="string">&#x27;支付宝支付&#x27;</span>;</span><br><span class="line">        <span class="keyword">when</span> <span class="number">3</span> <span class="keyword">then</span> <span class="keyword">select</span> <span class="string">&#x27;银行卡支付&#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">select</span> <span class="string">&#x27;其它支付&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> pro14_case(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 语法二</span></span><br><span class="line">delimiter  $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_15_case(<span class="keyword">in</span> score <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">case</span></span><br><span class="line">        <span class="keyword">when</span> score <span class="operator">&lt;</span> <span class="number">60</span> </span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;不及格&#x27;</span>;</span><br><span class="line">        <span class="keyword">when</span>  score <span class="operator">&lt;</span> <span class="number">80</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;及格&#x27;</span> ;</span><br><span class="line">        <span class="keyword">when</span> score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">and</span> score <span class="operator">&lt;</span> <span class="number">90</span></span><br><span class="line">        <span class="keyword">then</span> </span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;良好&#x27;</span>;</span><br><span class="line">        <span class="keyword">when</span> score <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">and</span> score <span class="operator">&lt;=</span> <span class="number">100</span></span><br><span class="line">        <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;优秀&#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">select</span> <span class="string">&#x27;成绩错误&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">case</span>;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc_15_case(<span class="number">88</span>);</span><br></pre></td></tr></table></figure><h3 id="循环语句"><a class="markdownIt-Anchor" href="#循环语句"></a> 循环语句</h3><p>leave：类似于 break，跳出，结束当前所在的循环</p><p>iterate：类似于 continue，继续，结束本次循环，继续下一次</p><h4 id="while"><a class="markdownIt-Anchor" href="#while"></a> while</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">【标签:】while 循环条件 do</span><br><span class="line">    循环体;</span><br><span class="line"><span class="keyword">end</span> while【标签】;</span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc16_while(<span class="keyword">in</span> insertCount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    while i <span class="operator">&lt;=</span> insertCount do</span><br><span class="line">        <span class="keyword">insert into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> while;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc16_while(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>leave：跳出整个循环</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 只插入前五条数据</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc17_leave(<span class="keyword">in</span> insertCount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    label:while i <span class="operator">&lt;=</span> insertCount do</span><br><span class="line">        <span class="keyword">insert into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        if i <span class="operator">=</span> <span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">            leave label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> while label;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc17_leave(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><p>iterate：跳出本次循环</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc18_iterate(<span class="keyword">in</span> insertCount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    label:while i <span class="operator">&lt;</span> insertCount do</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">        if i <span class="operator">=</span> <span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">            iterate label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">        <span class="keyword">insert into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span> while label;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc18_iterate(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><h4 id="repeat"><a class="markdownIt-Anchor" href="#repeat"></a> repeat</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 条件表达式为真时跳出循环</span></span><br><span class="line">[标签:]repeat </span><br><span class="line"> 循环体;</span><br><span class="line">until 条件表达式</span><br><span class="line"><span class="keyword">end</span> repeat [标签];</span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc18_repeat(<span class="keyword">in</span> insertCount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    repeat</span><br><span class="line">        <span class="keyword">insert into</span> <span class="keyword">user</span>(uid,username,password) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">        until i <span class="operator">&gt;</span> insertCount</span><br><span class="line">    <span class="keyword">end</span> repeat;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc18_repeat(<span class="number">10</span>);</span><br></pre></td></tr></table></figure><h4 id="loop"><a class="markdownIt-Anchor" href="#loop"></a> loop</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">标签: loop</span><br><span class="line">  循环体;</span><br><span class="line">  if 条件表达式 <span class="keyword">then</span> </span><br><span class="line">     leave 标签; </span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> loop;</span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc19_loop(<span class="keyword">in</span> insertCount <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    label: loop</span><br><span class="line">        <span class="keyword">insert into</span> <span class="keyword">user</span>(uid,username,`password`) <span class="keyword">values</span>(i,concat(<span class="string">&#x27;user-&#x27;</span>,i),<span class="string">&#x27;123456&#x27;</span>);</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">        if i <span class="operator">&gt;</span> insertCount</span><br><span class="line">            <span class="keyword">then</span></span><br><span class="line">                leave label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">    <span class="keyword">end</span> loop label;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc19_loop(<span class="number">20</span>);</span><br></pre></td></tr></table></figure><h2 id="游标"><a class="markdownIt-Anchor" href="#游标"></a> 游标</h2><p>用来存储查询结果集的数据类型, 在存储过程和函数中可以使用光标对结果集进行循环的处理</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 声明语法</span></span><br><span class="line"><span class="keyword">declare</span> 游标名 <span class="keyword">cursor</span> <span class="keyword">for</span> 结果集;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 打开语法</span></span><br><span class="line"><span class="keyword">open</span> 游标名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 取值语法，需要定义变量来保存结果集每一列</span></span><br><span class="line"><span class="keyword">fetch</span> 游标名 <span class="keyword">into</span> 变量名 [, 变量名<span class="number">1</span>] ...;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关闭语法</span></span><br><span class="line"><span class="keyword">close</span> 游标名;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc19_cursor(<span class="keyword">in</span> in_dname <span class="type">varchar</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">-- 定义局部变量</span></span><br><span class="line">    <span class="keyword">declare</span> var_empno <span class="type">int</span>;</span><br><span class="line">    <span class="keyword">declare</span> var_ename <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">declare</span> var_sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 声明游标</span></span><br><span class="line">    <span class="keyword">declare</span> my_cursor <span class="keyword">cursor</span> <span class="keyword">for</span></span><br><span class="line">        <span class="keyword">select</span> empno,ename,sal</span><br><span class="line">        <span class="keyword">from</span> dept a,emp b</span><br><span class="line">        <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno <span class="keyword">and</span> a.dname <span class="operator">=</span> in_dname;</span><br><span class="line">    <span class="comment">-- 打开语法</span></span><br><span class="line">    <span class="keyword">open</span> my_cursor;</span><br><span class="line">    <span class="comment">-- 取值语法</span></span><br><span class="line">    label: loop</span><br><span class="line">        <span class="keyword">fetch</span> my_cursor <span class="keyword">into</span> var_empno, var_ename, var_sal;</span><br><span class="line">        <span class="keyword">select</span> var_empno, var_ename, var_sal;</span><br><span class="line">    <span class="keyword">end</span> loop label;<span class="comment">-- 后续需要用句柄来结束循环</span></span><br><span class="line">    <span class="comment">-- 关闭语法</span></span><br><span class="line">    <span class="keyword">close</span> my_cursor;</span><br><span class="line"><span class="keyword">end</span> $$;</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> proc19_cursor(<span class="string">&#x27;销售部&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="异常处理"><a class="markdownIt-Anchor" href="#异常处理"></a> 异常处理</h2><p>存储过程提供了对异常处理的功能：通过定义HANDLER来完成异常声明的实现</p><p>在语法中，变量声明、游标声明、handler声明是必须按照先后顺序书写的，否则创建存储过程出错</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> handler_action handler</span><br><span class="line">    <span class="keyword">FOR</span> condition_value [, condition_value] ...</span><br><span class="line">    statement</span><br><span class="line"></span><br><span class="line"><span class="comment">/* handler_action：CONTINUE(继续向下执行)、 EXIT(退出程序)、UNDO</span></span><br><span class="line"><span class="comment">condition_value：</span></span><br><span class="line"><span class="comment">    mysql_error_code(错误码)</span></span><br><span class="line"><span class="comment">    condition_name(错误条件的名称)</span></span><br><span class="line"><span class="comment">    SQLWARNING(警告条件)</span></span><br><span class="line"><span class="comment">    NOT FOUND(没有找到数据)</span></span><br><span class="line"><span class="comment">    SQLEXCEPTION(异常条件)</span></span><br><span class="line"><span class="comment">statement：异常触发之后执行什么</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use mysql7_procedure;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> if <span class="keyword">exists</span> proc21_cursor_handler;</span><br><span class="line"><span class="comment">-- 需求：输入一个部门名，查询该部门员工的编号、名字、薪资 ，将查询的结果集添加游标</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc20_cursor(<span class="keyword">in</span> in_dname <span class="type">varchar</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">-- 定义局部变量</span></span><br><span class="line">    <span class="keyword">declare</span> var_empno <span class="type">int</span>;</span><br><span class="line">    <span class="keyword">declare</span> var_ename <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">declare</span> var_sal <span class="type">decimal</span>(<span class="number">7</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">declare</span> flag <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>; <span class="comment">-- ---------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 声明游标</span></span><br><span class="line">    <span class="keyword">declare</span> my_cursor <span class="keyword">cursor</span> <span class="keyword">for</span></span><br><span class="line">        <span class="keyword">select</span> empno,ename,sal</span><br><span class="line">        <span class="keyword">from</span> dept a, emp b</span><br><span class="line">        <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.deptno <span class="keyword">and</span> a.dname <span class="operator">=</span> in_dname;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 定义句柄，当数据未发现时将标记位设置为0</span></span><br><span class="line">    <span class="keyword">declare</span> continue handler <span class="keyword">for</span> <span class="keyword">not</span> found <span class="keyword">set</span> flag <span class="operator">=</span> <span class="number">0</span>;   </span><br><span class="line">    <span class="comment">-- 打开游标</span></span><br><span class="line">    <span class="keyword">open</span> my_cursor;</span><br><span class="line">    <span class="comment">-- 通过游标获取值</span></span><br><span class="line">    label:loop</span><br><span class="line">        <span class="keyword">fetch</span> my_cursor <span class="keyword">into</span> var_empno, var_ename,var_sal;</span><br><span class="line">        <span class="comment">-- 判断标志位</span></span><br><span class="line">        if flag <span class="operator">=</span> <span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">select</span> var_empno, var_ename,var_sal;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            leave label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">    <span class="keyword">end</span> loop label;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 关闭游标</span></span><br><span class="line">    <span class="keyword">close</span> my_cursor;</span><br><span class="line"><span class="keyword">end</span> $$;</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">call</span> proc21_cursor_handler(<span class="string">&#x27;销售部&#x27;</span>);</span><br></pre></td></tr></table></figure><p>综合：每天一张表，存当天的统计数据，就要求提前生产这些表——每月月底创建下一个月每天的表</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 使用数据库mysql7_procedure</span></span><br><span class="line">use mysql7_procedure;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果存在同名的存储过程，则删除它</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> if <span class="keyword">exists</span> proc22_demo;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更改默认的语句结束符，以便在存储过程中可以使用分号</span></span><br><span class="line">delimiter $$</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建存储过程proc22_demo</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc22_demo()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">-- 声明整型变量用于存储年份、月份和月份中的天数</span></span><br><span class="line">  <span class="keyword">declare</span> next_year <span class="type">int</span>;</span><br><span class="line">  <span class="keyword">declare</span> next_month <span class="type">int</span>;</span><br><span class="line">  <span class="keyword">declare</span> next_month_day <span class="type">int</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">-- 声明字符型变量用于存储格式化的月份和天数</span></span><br><span class="line">  <span class="keyword">declare</span> next_month_str <span class="type">char</span>(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">declare</span> next_month_day_str <span class="type">char</span>(<span class="number">2</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">-- 声明字符型变量用于存储表名</span></span><br><span class="line">  <span class="keyword">declare</span> table_name_str <span class="type">char</span>(<span class="number">10</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">-- 声明整型变量作为循环索引，并初始化为1</span></span><br><span class="line">  <span class="keyword">declare</span> t_index <span class="type">int</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 获取下个月的年份</span></span><br><span class="line">  <span class="keyword">set</span> next_year <span class="operator">=</span> <span class="keyword">year</span>(date_add(now(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">month</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 获取下个月是几月</span></span><br><span class="line">  <span class="keyword">set</span> next_month <span class="operator">=</span> <span class="keyword">month</span>(date_add(now(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">month</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 获取下个月最后一天是几号</span></span><br><span class="line">  <span class="keyword">set</span> next_month_day <span class="operator">=</span> dayofmonth(LAST_DAY(date_add(now(), <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">month</span>)));</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 如果月份小于10，则在前面补零</span></span><br><span class="line">  if next_month <span class="operator">&lt;</span> <span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">set</span> next_month_str <span class="operator">=</span> concat(<span class="string">&#x27;0&#x27;</span>, next_month);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">set</span> next_month_str <span class="operator">=</span> concat(<span class="string">&#x27;&#x27;</span>, next_month);</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 循环直到下个月的最后一天</span></span><br><span class="line">  while t_index <span class="operator">&lt;=</span> next_month_day do</span><br><span class="line">    <span class="comment">-- 如果天数小于10，则在前面补零</span></span><br><span class="line">    if t_index <span class="operator">&lt;</span> <span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">set</span> next_month_day_str <span class="operator">=</span> concat(<span class="string">&#x27;0&#x27;</span>, t_index);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">set</span> next_month_day_str <span class="operator">=</span> concat(<span class="string">&#x27;&#x27;</span>, t_index);</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 构建表名，格式为：user_YYYY_MM_DD</span></span><br><span class="line">    <span class="keyword">set</span> table_name_str <span class="operator">=</span> concat(next_year, <span class="string">&#x27;_&#x27;</span>, next_month_str, <span class="string">&#x27;_&#x27;</span>, next_month_day_str);</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 拼接创建表的SQL语句</span></span><br><span class="line">    <span class="keyword">set</span> <span class="variable">@create_table_sql</span> <span class="operator">=</span> concat(</span><br><span class="line">      <span class="string">&#x27;create table user_&#x27;</span>,</span><br><span class="line">      table_name_str,</span><br><span class="line">      <span class="string">&#x27;(`uid` INT, `ename` varchar(50), `information` varchar(50)) COLLATE=\&#x27;</span>utf8_general_ci\<span class="string">&#x27; ENGINE=InnoDB&#x27;</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 准备并执行动态SQL语句</span></span><br><span class="line">    <span class="keyword">prepare</span> create_table_stmt <span class="keyword">FROM</span> <span class="variable">@create_table_sql</span>;</span><br><span class="line">    <span class="keyword">execute</span> create_table_stmt;</span><br><span class="line">    <span class="comment">-- 释放预编译语句</span></span><br><span class="line">    <span class="keyword">DEALLOCATE</span> <span class="keyword">prepare</span> create_table_stmt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 更新循环索引</span></span><br><span class="line">    <span class="keyword">set</span> t_index <span class="operator">=</span> t_index <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">end</span> while;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"><span class="comment">-- 将语句结束符改回分号</span></span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用存储过程proc22_demo</span></span><br><span class="line"><span class="keyword">call</span> proc22_demo();</span><br></pre></td></tr></table></figure><h1 id="存储函数自定义函数"><a class="markdownIt-Anchor" href="#存储函数自定义函数"></a> 存储函数(自定义函数)</h1><p>一般用于计算和返回一个值，可以将经常需要使用的计算或功能写成一个函数</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> func_name ([param_name type[,...]])</span><br><span class="line"><span class="keyword">returns</span> type</span><br><span class="line">[characteristic ...] </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    routine_body</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参数说明：</span></span><br><span class="line"><span class="comment">    func_name ：存储函数的名称</span></span><br><span class="line"><span class="comment">    param_name type：可选项，指定存储函数的参数</span></span><br><span class="line"><span class="comment">    type参数用于指定存储函数的参数类型，该类型可以是MySQL数据库中所有支持的类型</span></span><br><span class="line"><span class="comment">    RETURNS type：指定返回值的类型</span></span><br><span class="line"><span class="comment">    characteristic：可选项，指定存储函数的特性</span></span><br><span class="line"><span class="comment">    routine_body：SQL代码内容*/</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 允许创建函数权限</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> log_bin_trust_function_creators <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">-- 创建存储函数-没有输输入参数</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> myfunc1_emp() <span class="keyword">returns</span> <span class="type">int</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">-- 定义局部变量</span></span><br><span class="line">    <span class="keyword">declare</span> cnt <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> cnt <span class="keyword">from</span> emp;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用存储函数</span></span><br><span class="line"><span class="keyword">select</span> myfunc1_emp();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建存储过程-有输入参数</span></span><br><span class="line"><span class="comment">-- 传入一个员工编号，返回员工名字</span></span><br><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> myfun2_emp(in_empno <span class="type">int</span>) <span class="keyword">returns</span> <span class="type">varchar</span>(<span class="number">50</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> out_ename <span class="type">varchar</span>(<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">select</span> ename <span class="keyword">into</span> out_ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> in_empno;</span><br><span class="line">    <span class="keyword">return</span> out_ename;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用存储函数</span></span><br><span class="line"><span class="keyword">select</span> myfun2_emp(<span class="number">1008</span>);</span><br></pre></td></tr></table></figure><h1 id="触发器"><a class="markdownIt-Anchor" href="#触发器"></a> 触发器</h1><h1 id="索引"><a class="markdownIt-Anchor" href="#索引"></a> 索引</h1><h1 id="事务"><a class="markdownIt-Anchor" href="#事务"></a> 事务</h1>]]></content>
      
      
      <categories>
          
          <category> MySQL数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.MySQL基础</title>
      <link href="/2025/09/14/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/1-MySQL%E5%9F%BA%E7%A1%80/"/>
      <url>/2025/09/14/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/1-MySQL%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th style="text-align:center">关键字</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">database</td><td style="text-align:center">库</td></tr><tr><td style="text-align:center">table</td><td style="text-align:center">表</td></tr><tr><td style="text-align:center">create</td><td style="text-align:center">创建</td></tr><tr><td style="text-align:center">drop</td><td style="text-align:center">删除(数据库或表)</td></tr><tr><td style="text-align:center">alter</td><td style="text-align:center">修改</td></tr><tr><td style="text-align:center">update</td><td style="text-align:center">数据修改</td></tr><tr><td style="text-align:center">insert into</td><td style="text-align:center">插入</td></tr><tr><td style="text-align:center">where</td><td style="text-align:center">筛选</td></tr><tr><td style="text-align:center">delete from</td><td style="text-align:center">删除(数据)</td></tr><tr><td style="text-align:center">select</td><td style="text-align:center">查询</td></tr></tbody></table><h1 id="查看所有数据库"><a class="markdownIt-Anchor" href="#查看所有数据库"></a> 查看所有数据库</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查看所有数据库</span></span><br><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure><h1 id="查看当前数据库所有的表"><a class="markdownIt-Anchor" href="#查看当前数据库所有的表"></a> 查看当前数据库所有的表</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure><h1 id="查看指定表的创建语句"><a class="markdownIt-Anchor" href="#查看指定表的创建语句"></a> 查看指定表的创建语句</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create table</span> 查看的表名;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create table</span> student;</span><br></pre></td></tr></table></figure><h1 id="查看表结构"><a class="markdownIt-Anchor" href="#查看表结构"></a> 查看表结构</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">desc</span> 表名;</span><br><span class="line"><span class="keyword">desc</span> student;</span><br></pre></td></tr></table></figure><h1 id="创建数据库"><a class="markdownIt-Anchor" href="#创建数据库"></a> 创建数据库</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database 创建数据库名字;</span><br><span class="line"><span class="keyword">create</span> database mydb1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- if not exists：当数据库mydbq不存在时才创建</span></span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> 创建数据库名字;</span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> mydbq;</span><br></pre></td></tr></table></figure><h1 id="使用哪个数据库"><a class="markdownIt-Anchor" href="#使用哪个数据库"></a> 使用哪个数据库</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use 使用的数据库名;</span><br><span class="line">use mydb1;</span><br></pre></td></tr></table></figure><h1 id="删除数据库"><a class="markdownIt-Anchor" href="#删除数据库"></a> 删除数据库</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> database 删除的数据库名;</span><br><span class="line"><span class="keyword">drop</span> database mydb1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- if exists：当数据库mydb1存在时才删除</span></span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> 删除的数据库名;</span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> mydb1;</span><br></pre></td></tr></table></figure><h1 id="修改数据库编码默认utf8"><a class="markdownIt-Anchor" href="#修改数据库编码默认utf8"></a> 修改数据库编码（默认utf8）</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> database 修改的数据库名 <span class="keyword">character set</span> 编码格式;</span><br><span class="line"><span class="keyword">alter</span> database mydb1 <span class="keyword">character set</span> utf8;</span><br></pre></td></tr></table></figure><h1 id="创建表"><a class="markdownIt-Anchor" href="#创建表"></a> 创建表</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建表是构建一张空表，指定这个表的名字，这个表有几列，每一列叫什么名字，以及每一列存储的数据类型</span></span><br><span class="line"><span class="comment">-- 字段名：每一列的名字，中括号中的内容可以省略也可以添加</span></span><br><span class="line"><span class="keyword">create table</span> [if <span class="keyword">not</span> <span class="keyword">exists</span>]表名(</span><br><span class="line">  字段名<span class="number">1</span> 类型[(宽度)] [约束条件] [comment <span class="string">&#x27;字段说明&#x27;</span>],</span><br><span class="line">  字段名<span class="number">2</span> 类型[(宽度)] [约束条件] [comment <span class="string">&#x27;字段说明&#x27;</span>],</span><br><span class="line">  字段名<span class="number">3</span> 类型[(宽度)] [约束条件] [comment <span class="string">&#x27;字段说明&#x27;</span>]</span><br><span class="line">)[表的一些设置];</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> student(</span><br><span class="line">  sid <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  gender <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">  age <span class="type">int</span>,</span><br><span class="line">  birth <span class="type">date</span>,</span><br><span class="line">  address <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  score <span class="keyword">double</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型"></a> 数据类型</h1><table><thead><tr><th style="text-align:center">数据类型</th><th style="text-align:center">描述</th><th style="text-align:center">大小</th></tr></thead><tbody><tr><td style="text-align:center">tinyint</td><td style="text-align:center">非常小的整数</td><td style="text-align:center">1 byte</td></tr><tr><td style="text-align:center">smallint</td><td style="text-align:center">较小的整数</td><td style="text-align:center">2 byte</td></tr><tr><td style="text-align:center">mediumint</td><td style="text-align:center">中等大小的整数</td><td style="text-align:center">3 byte</td></tr><tr><td style="text-align:center">int或integer</td><td style="text-align:center">普通大小的整数</td><td style="text-align:center">4 byte</td></tr><tr><td style="text-align:center">bigint</td><td style="text-align:center">大整数</td><td style="text-align:center">8 byte</td></tr><tr><td style="text-align:center">float</td><td style="text-align:center">单精度浮点数</td><td style="text-align:center">4 byte</td></tr><tr><td style="text-align:center">double</td><td style="text-align:center">双精度浮点数</td><td style="text-align:center">8 byte</td></tr><tr><td style="text-align:center">decimal</td><td style="text-align:center">小数，精度和标度可变</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">varchar</td><td style="text-align:center">变长字符串，0-65535</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">date</td><td style="text-align:center">日期，格式为YYYY-MM-DD</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">datetime</td><td style="text-align:center">混合日期和时间值(1000-01-01 00:00:00~9999-12-31 23:59:59)</td><td style="text-align:center">8</td></tr><tr><td style="text-align:center">timestamp</td><td style="text-align:center">混合日期和时间值 时间戳(获取当前时区时间)</td><td style="text-align:center">4</td></tr></tbody></table><h1 id="删除表"><a class="markdownIt-Anchor" href="#删除表"></a> 删除表</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> student;</span><br></pre></td></tr></table></figure><h1 id="修改表结构"><a class="markdownIt-Anchor" href="#修改表结构"></a> 修改表结构</h1><h2 id="表添加列"><a class="markdownIt-Anchor" href="#表添加列"></a> 表添加列</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> 表名 <span class="keyword">add</span> 列名 类型(长度) [约束];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为student表添加一个新的字段为：系别 dept 类型为 varchar(20)</span></span><br><span class="line"><span class="keyword">alter table</span> student <span class="keyword">add</span> dept <span class="type">varchar</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure><h2 id="修改列名和类型"><a class="markdownIt-Anchor" href="#修改列名和类型"></a> 修改列名和类型</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> 表名 change 旧列名 新列名 类型(长度) 约束; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为student表的dept字段更换为department varchar(30)</span></span><br><span class="line"><span class="keyword">alter table</span> student change dept department <span class="type">varchar</span>(<span class="number">30</span>);</span><br></pre></td></tr></table></figure><h2 id="删除列"><a class="markdownIt-Anchor" href="#删除列"></a> 删除列</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> 表名 <span class="keyword">drop</span> 列名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除student表中department这列</span></span><br><span class="line"><span class="keyword">alter table</span> student <span class="keyword">drop</span> department;</span><br></pre></td></tr></table></figure><h2 id="修改表名"><a class="markdownIt-Anchor" href="#修改表名"></a> 修改表名</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">rename <span class="keyword">table</span> 表名 <span class="keyword">to</span> 新表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将表student改名成 stu</span></span><br><span class="line">rename <span class="keyword">table</span> student <span class="keyword">to</span> stu;</span><br></pre></td></tr></table></figure><h1 id="表的增删改dml"><a class="markdownIt-Anchor" href="#表的增删改dml"></a> 表的增删改(DML)</h1><h2 id="插入数据"><a class="markdownIt-Anchor" href="#插入数据"></a> 插入数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 向某些列插入值</span></span><br><span class="line"><span class="comment">-- 值要与列名的数据类型保持一致</span></span><br><span class="line"><span class="keyword">insert into</span> 表 (列名<span class="number">1</span>,列名<span class="number">2</span>,列名<span class="number">3.</span>..) <span class="keyword">values</span> (值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3.</span>..);</span><br><span class="line"><span class="comment">-- 向表中所有列插入值</span></span><br><span class="line"><span class="keyword">insert into</span> 表 <span class="keyword">values</span> (值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3.</span>..);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> student(sid,name,gender,age,birth,address,score)</span><br><span class="line">    <span class="keyword">values</span> (<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;2001-11-12&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,<span class="number">13.9</span>),</span><br><span class="line">    (<span class="number">1002</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">15</span>,<span class="string">&#x27;2001-11-12&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>,<span class="number">10.9</span>);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">insert into</span> student <span class="keyword">values</span> (<span class="number">1003</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">34</span>,<span class="string">&#x27;1992-12-01&#x27;</span>,<span class="string">&#x27;深圳&#x27;</span>,<span class="number">23</span>);</span><br></pre></td></tr></table></figure><h2 id="数据修改"><a class="markdownIt-Anchor" href="#数据修改"></a> 数据修改</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将字段名那一列全部行都修改</span></span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="operator">=</span>值,字段名<span class="operator">=</span>值...;</span><br><span class="line"><span class="comment">-- 满足条件的行才修改</span></span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="operator">=</span>值,字段名<span class="operator">=</span>值... <span class="keyword">where</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将所有学生的地址修改为重庆</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address<span class="operator">=</span><span class="string">&#x27;重庆&#x27;</span>;</span><br><span class="line"><span class="comment">-- id为1002的学生的地址修改为北京</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address<span class="operator">=</span><span class="string">&#x27;北京&#x27;</span> <span class="keyword">where</span> sid <span class="operator">=</span> <span class="number">1002</span>;</span><br><span class="line"><span class="comment">-- id为1001的学生的地址修改为上海，成绩修成绩修改为100</span></span><br><span class="line"><span class="keyword">update</span> student <span class="keyword">set</span> address<span class="operator">=</span><span class="string">&#x27;上海&#x27;</span>,score<span class="operator">=</span><span class="number">100</span> <span class="keyword">where</span> sid <span class="operator">=</span> <span class="number">1001</span>;</span><br></pre></td></tr></table></figure><h2 id="数据删除"><a class="markdownIt-Anchor" href="#数据删除"></a> 数据删除</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件];</span><br><span class="line"><span class="comment">-- 整个表删除，然后再创建该表</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名; 或者 <span class="keyword">truncate</span> 表名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除sid为1004的学生数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student <span class="keyword">where</span> sid <span class="operator">=</span> <span class="number">1003</span>;</span><br><span class="line"><span class="comment">-- 2.删除表所有数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- 3.清空表数据</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> student;</span><br><span class="line"><span class="keyword">truncate</span> student;</span><br></pre></td></tr></table></figure><h1 id="约束"><a class="markdownIt-Anchor" href="#约束"></a> 约束</h1><h2 id="主键约束"><a class="markdownIt-Anchor" href="#主键约束"></a> 主键约束</h2><p>主键可以是一个列或者多个列的组合，其值能唯一地标识表中的每一行，方便在RDBMS中尽快的找到某一行</p><p><code>不允许重复，不允许空值</code>，每个表最多只允许<code>一个主键</code>，当创建主键的约束时，系统默认会在所在的列和列组合上建立对应的唯一索引</p><p>关键字：<code>primary key</code></p><h3 id="添加单列主键"><a class="markdownIt-Anchor" href="#添加单列主键"></a> 添加单列主键</h3><p>方式1：在定义字段的同时指定主键</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> 表名(</span><br><span class="line">   ...</span><br><span class="line">   <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">primary key</span></span><br><span class="line">   ...</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> emp1(</span><br><span class="line">    <span class="comment">-- 将eid添加主键约束</span></span><br><span class="line">    eid <span class="type">int</span> <span class="keyword">primary key</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>方式2：在定义字段之后再指定主键</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> 表名(</span><br><span class="line">   ...</span><br><span class="line">    <span class="comment">-- []里面可以省略</span></span><br><span class="line">   [<span class="keyword">constraint</span> <span class="operator">&lt;</span>约束名<span class="operator">&gt;</span>] <span class="keyword">primary key</span> [字段名]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> emp2(</span><br><span class="line">    eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span>,</span><br><span class="line">    <span class="comment">-- constraint pk1可以省略</span></span><br><span class="line">    <span class="keyword">constraint</span> pk1 <span class="keyword">primary key</span>(eid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="添加多列联合主键"><a class="markdownIt-Anchor" href="#添加多列联合主键"></a> 添加多列联合主键</h3><ul><li>主键由一张表中多个字段组成，只要主键的字段不完全相同即可但任何一个都不能为空</li><li>当主键是由多个字段组成时，不能直接在字段名后面声明主键约束</li><li>一张表只能有一个主键，联合主键也是一个主键</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> 表名(</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">primary key</span> (字段<span class="number">1</span>，字段<span class="number">2</span>，…,字段n)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> emp3(</span><br><span class="line">    eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span>,</span><br><span class="line">    <span class="keyword">constraint</span> pk2 <span class="keyword">primary key</span> (eid,deptId)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">2001</span>,<span class="number">23</span>);</span><br><span class="line"><span class="comment">-- eid 和 deptId两个都相同添加不了</span></span><br><span class="line"><span class="comment">-- insert into emp3 values(1001,&#x27;李四&#x27;,2001,23);</span></span><br><span class="line"><span class="comment">-- 只要两个有一个不同即可添加，但是两个任何一个都不能为空</span></span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="number">2002</span>,<span class="number">23</span>);</span><br></pre></td></tr></table></figure><h3 id="修改表结构添加主键"><a class="markdownIt-Anchor" href="#修改表结构添加主键"></a> 修改表结构添加主键</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> 表名(</span><br><span class="line">   ...</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">add</span> <span class="keyword">primary key</span>（字段列表);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> emp4(</span><br><span class="line">    eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加单列主键</span></span><br><span class="line"><span class="keyword">alter table</span> emp4 <span class="keyword">add</span> <span class="keyword">primary key</span>(eid);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> emp5(</span><br><span class="line">    eid <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    deptId <span class="type">int</span>,</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加联合主键</span></span><br><span class="line"><span class="keyword">alter table</span> emp5 <span class="keyword">add</span> <span class="keyword">primary key</span>(name,eid);</span><br></pre></td></tr></table></figure><h3 id="删除主键"><a class="markdownIt-Anchor" href="#删除主键"></a> 删除主键</h3><p>修改表结构实现删除主键，删除主键不分单列主键或多列联合主键，删除全删</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> <span class="operator">&lt;</span>数据表名<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">primary key</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除单列主键</span></span><br><span class="line"><span class="keyword">alter table</span> emp1 <span class="keyword">drop</span> <span class="keyword">primary key</span>;</span><br><span class="line"><span class="comment">-- 删除多列联合主键</span></span><br><span class="line"><span class="keyword">alter table</span> emp5 <span class="keyword">drop</span> <span class="keyword">primary key</span>;</span><br></pre></td></tr></table></figure><h2 id="自增长约束"><a class="markdownIt-Anchor" href="#自增长约束"></a> 自增长约束</h2><p>当主键定义为自增长后，这个主键的值就不再需要用户输入数据了，而由数据库系统根据定义自动赋值。每增加一条记录，主键会自动以相同的步长进行增长</p><blockquote><p>给字段添加 <code>auto_increment</code> 属性来实现主键自增长</p><ul><li>初始值是 1，每新增一条记录，字段值自动加 1</li><li>一个表中只能有一个字段使用 auto_increment约束，且该字段必须有唯一索引，以避免序号重复（即为主键或主键的一部分）</li><li>字段必须具备 NOT NULL 属性</li><li>字段只能是整数类型(TINYINT、SMALLINT、INT、BIGINT )</li><li>增长的最大值为该字段数据类型的最大值</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">字段名 数据类型 <span class="keyword">primary key</span> auto_increment</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加自增站约束</span></span><br><span class="line"><span class="keyword">create table</span> t_user1(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 从1开始自增长，每次加1</span></span><br><span class="line"><span class="keyword">insert into</span> t_user1 <span class="keyword">values</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> t_user1(name) <span class="keyword">values</span>(<span class="string">&#x27;李四&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p><strong>指定自增字段初始值</strong></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 方式一：创建表时指定</span></span><br><span class="line"><span class="keyword">create table</span> t_user2(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">)auto_increment<span class="operator">=</span><span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：创建表之后指定</span></span><br><span class="line"><span class="keyword">create table</span> t_user3(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 通过修改表结构来指定初始值</span></span><br><span class="line"><span class="keyword">alter table</span> t_user3 auto_increment <span class="operator">=</span> <span class="number">200</span>;</span><br></pre></td></tr></table></figure><blockquote><p><code>delete</code>** 和 <strong><code>truncate</code></strong> 在删除后自增列的变化**</p></blockquote><ul><li>delete 数据之后自动增长从断点开始</li><li>truncate 数据之后自动增长从默认起始值开始</li></ul><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- delete删除数据之后，自增长还是在最后一个值基础上加1</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_user2;</span><br><span class="line"><span class="comment">-- 如最后一个id值为100，则删除重新添加数据之后从101开始</span></span><br><span class="line"><span class="keyword">insert into</span> t_user2(name) <span class="keyword">values</span>(<span class="string">&#x27;李四&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- truncate删除之后，自增长从1开始</span></span><br><span class="line"><span class="keyword">truncate</span> t_user3;</span><br><span class="line"><span class="keyword">insert into</span> t_user3(name) <span class="keyword">values</span>(<span class="string">&#x27;李四&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="非空约束"><a class="markdownIt-Anchor" href="#非空约束"></a> 非空约束</h2><p>使用了非空约束的字段，如果用户在添加数据时没有指定值，数据库系统就会报错</p><blockquote><p>添加</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 方式一：创建表时指定</span></span><br><span class="line">字段名 数据类型 <span class="keyword">not null</span>;</span><br><span class="line"><span class="keyword">create table</span> t_user6(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span>,<span class="comment">-- 指定非空约束</span></span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- insert into t_user6(id) values(1001);name、address为空报错</span></span><br><span class="line"><span class="comment">-- 控制字符串可以</span></span><br><span class="line"><span class="keyword">insert into</span> t_user6(id,name,address) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">-- 字符串为NULL</span></span><br><span class="line"><span class="keyword">insert into</span> t_user6(id,name,address) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;NULL&#x27;</span>,<span class="string">&#x27;NULL&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：创建表之后通过修改表结构指定</span></span><br><span class="line"><span class="keyword">alter table</span> 表名 modify 字段 类型 <span class="keyword">not null</span>;</span><br><span class="line"><span class="keyword">create table</span> t_user7(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter table</span> t_user7 modify name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span>;</span><br></pre></td></tr></table></figure><blockquote><p>删除</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> t_user7 modify name <span class="type">varchar</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure><h2 id="唯一约束"><a class="markdownIt-Anchor" href="#唯一约束"></a> 唯一约束</h2><p>一个表可以有多个唯一约束，可以包含NULL值</p><blockquote><p>添加</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 方式一：创建表时指定</span></span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">unique</span></span><br><span class="line"><span class="keyword">create table</span> t_user8(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    phone_number <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert into</span> t_user8 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">138</span>);</span><br><span class="line"><span class="comment">-- phone_number不能重复</span></span><br><span class="line"><span class="comment">-- insert into t_user8 values(1001,&#x27;张三&#x27;,138);</span></span><br><span class="line"><span class="comment">-- 在mysql中NULL和任何值都不相同，甚至和自己都不相同</span></span><br><span class="line"><span class="keyword">insert into</span> t_user8 <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;张1&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">insert into</span> t_user8 <span class="keyword">values</span>(<span class="number">1003</span>,<span class="string">&#x27;张2&#x27;</span>,<span class="keyword">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：创建表之后通过修改表结构指定</span></span><br><span class="line"><span class="keyword">alter table</span> 表名 <span class="keyword">add constraint</span> 约束名 <span class="keyword">unique</span>(列);</span><br><span class="line"><span class="keyword">create table</span> t_user9(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    phone_number <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter table</span> t_user9 <span class="keyword">add constraint</span> unique_pn <span class="keyword">unique</span>(phone_number);</span><br></pre></td></tr></table></figure><blockquote><p>删除</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">drop</span> index <span class="operator">&lt;</span>唯一约束名<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用第二种创建的约束删除</span></span><br><span class="line"><span class="keyword">alter table</span> t_user9 <span class="keyword">drop</span> index unique_pn;</span><br><span class="line"><span class="comment">-- 使用第一种创建的约束删除，约束名为约束那一列的列名</span></span><br><span class="line"><span class="keyword">alter table</span> t_user8 <span class="keyword">drop</span> index phone_number;</span><br></pre></td></tr></table></figure><h2 id="默认约束"><a class="markdownIt-Anchor" href="#默认约束"></a> 默认约束</h2><p>默认值约束用来指定某列的默认值</p><blockquote><p>创建</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 方式一：创建表时指定</span></span><br><span class="line"><span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> <span class="keyword">default</span> <span class="operator">&lt;</span>默认值<span class="operator">&gt;</span>;</span><br><span class="line"><span class="keyword">create table</span> t_user10(</span><br><span class="line">    id <span class="type">INT</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;北京&#x27;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- address没给定值，默认为北京</span></span><br><span class="line"><span class="keyword">insert into</span> t_user10(id,name) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;李四&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：创建表之后通过修改表结构指定</span></span><br><span class="line"><span class="keyword">alter table</span> 表名 modify 列名 类型 <span class="keyword">default</span> 默认值;</span><br><span class="line"><span class="keyword">create table</span> t_user11(</span><br><span class="line">    id <span class="type">INT</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">alter table</span> t_user11 modify address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="string">&#x27;深圳&#x27;</span>;</span><br><span class="line"><span class="keyword">insert into</span> t_user11(id,name) <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;李四&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>删除</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> modify <span class="keyword">column</span> <span class="operator">&lt;</span>字段名<span class="operator">&gt;</span> <span class="operator">&lt;</span>类型<span class="operator">&gt;</span> <span class="keyword">default</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter table</span> t_user11 modify address <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">default</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><h2 id="零填充约束"><a class="markdownIt-Anchor" href="#零填充约束"></a> 零填充约束</h2><p>插入数据时，当该字段的值的长度小于定义的长度时，会在该值的前面补上相应的0</p><blockquote><p>创建</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> t_user12(</span><br><span class="line">    id <span class="type">int</span> zerofill,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert into</span> t_user12 <span class="keyword">values</span>(<span class="number">20</span>,<span class="string">&#x27;李四&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>删除</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> t_user12 modify id <span class="type">int</span>;</span><br></pre></td></tr></table></figure><h1 id="基本查询"><a class="markdownIt-Anchor" href="#基本查询"></a> 基本查询</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  [<span class="keyword">all</span> <span class="operator">|</span> <span class="keyword">distinct</span>]</span><br><span class="line">  <span class="operator">&lt;</span>目标列的表达式<span class="number">1</span><span class="operator">&gt;</span> [别名],</span><br><span class="line">  <span class="operator">&lt;</span>目标列的表达式<span class="number">2</span><span class="operator">&gt;</span> [别名]...</span><br><span class="line"><span class="keyword">from</span> <span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [别名],<span class="operator">&lt;</span>表名或视图名<span class="operator">&gt;</span> [别名]...</span><br><span class="line">[<span class="keyword">where</span><span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">group</span> <span class="keyword">by</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> </span><br><span class="line">[<span class="keyword">having</span> <span class="operator">&lt;</span>条件表达式<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">order</span> <span class="keyword">by</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]]</span><br><span class="line">[limit <span class="operator">&lt;</span>数字或者列表<span class="operator">&gt;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 简化版</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="operator">|</span>列名 <span class="keyword">from</span> 表 <span class="keyword">where</span> 条件</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询所有商品</span></span><br><span class="line"><span class="keyword">select</span> pid,pname,price,category_id <span class="keyword">from</span> product;</span><br><span class="line"><span class="comment">-- *：代表所有列</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品名和商品价格</span></span><br><span class="line"><span class="keyword">select</span> 列名<span class="number">1</span>,列名<span class="number">2</span> <span class="keyword">from</span> product;</span><br><span class="line"><span class="keyword">select</span> pname,price <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 别名查询.使用的关键字是as（as可以省略的）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product 别名;</span><br><span class="line"><span class="comment">-- 别名在多表查询有作用，表别名</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">as</span> p;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product p;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 列别名</span></span><br><span class="line"><span class="keyword">select</span> pname <span class="keyword">as</span> 别名,price 别名 <span class="keyword">from</span> product;</span><br><span class="line"><span class="keyword">select</span> pname <span class="keyword">as</span> <span class="string">&#x27;商品名&#x27;</span>,price <span class="string">&#x27;商品价格&#x27;</span> <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去掉重复值</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> 列名 <span class="keyword">from</span> product;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> price <span class="keyword">from</span> product;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> <span class="operator">*</span> <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询结果是表达式（运算查询）：将所有商品的价格+10元进行显示</span></span><br><span class="line"><span class="keyword">select</span> pname, price<span class="operator">+</span><span class="number">10</span> 别名 <span class="keyword">from</span> product;</span><br><span class="line"><span class="keyword">select</span> pname, price<span class="operator">+</span><span class="number">10</span> new_price <span class="keyword">from</span> product;</span><br></pre></td></tr></table></figure><h2 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h2><table><thead><tr><th style="text-align:center">算术运算符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center"><strong>+</strong></td><td style="text-align:center">加法运算</td></tr><tr><td style="text-align:center"><strong>-</strong></td><td style="text-align:center">减法运算</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">乘法运算</td></tr><tr><td style="text-align:center"><strong>/</strong> 或 <strong>DIV</strong></td><td style="text-align:center">除法运算，返回商</td></tr><tr><td style="text-align:center"><strong>%</strong> 或 <strong>MOD</strong></td><td style="text-align:center">求余运算，返回余数</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将每件商品的价格加10</span></span><br><span class="line"><span class="keyword">select</span> pname,price <span class="operator">+</span><span class="number">10</span> <span class="keyword">as</span> new_price <span class="keyword">from</span> product;</span><br><span class="line"><span class="comment">-- 将所有商品的价格上调10%</span></span><br><span class="line"><span class="keyword">select</span> pname,price <span class="operator">*</span><span class="number">1.1</span> <span class="keyword">as</span> new_price <span class="keyword">from</span> product;</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">比较运算符</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center"><strong>=</strong></td><td style="text-align:center">等于</td></tr><tr><td style="text-align:center"><strong>&lt;</strong>  <strong>和</strong>  <strong>&lt;=</strong></td><td style="text-align:center">小于和小于等于</td></tr><tr><td style="text-align:center"><strong>&gt;</strong>  <strong>和</strong>  <strong>&gt;=</strong></td><td style="text-align:center">大于和大于等于</td></tr><tr><td style="text-align:center"><strong>&lt;=&gt;</strong></td><td style="text-align:center">完全等于，两个操作码均为NULL时，其所得值为1；而当一个操作码为NULL时，其所得值为0</td></tr><tr><td style="text-align:center"><strong>&lt;&gt;</strong> <strong>或!=</strong></td><td style="text-align:center">不等于</td></tr><tr><td style="text-align:center"><strong>IS NULL</strong> <strong>或</strong> <strong>ISNULL</strong></td><td style="text-align:center">判断一个值是否为  NULL</td></tr><tr><td style="text-align:center"><strong>IS NOT NULL</strong></td><td style="text-align:center">判断一个值是否不为  NULL</td></tr><tr><td style="text-align:center"><strong>least</strong></td><td style="text-align:center">当有两个或多个参数时，返回最小值</td></tr><tr><td style="text-align:center"><strong>greatest</strong></td><td style="text-align:center">当有两个或多个参数时，返回最大值</td></tr><tr><td style="text-align:center"><strong>between and</strong></td><td style="text-align:center">判断一个值是否落在两个值之间</td></tr><tr><td style="text-align:center"><strong>in</strong></td><td style="text-align:center">判断一个值是IN列表中的任意一个值</td></tr><tr><td style="text-align:center"><strong>NOT IN</strong></td><td style="text-align:center">判断一个值不是IN列表中的任意一个值</td></tr><tr><td style="text-align:center"><strong>like</strong></td><td style="text-align:center">通配符匹配</td></tr><tr><td style="text-align:center"><strong>regexp</strong></td><td style="text-align:center">正则表达式匹配</td></tr></tbody></table><table><thead><tr><th style="text-align:center"><strong>逻辑运算符</strong></th><th style="text-align:center"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center"><strong>NOT</strong> 或 <strong>!</strong></td><td style="text-align:center">逻辑非</td></tr><tr><td style="text-align:center"><strong>AND</strong> 或 <strong>&amp;&amp;</strong></td><td style="text-align:center">逻辑与</td></tr><tr><td style="text-align:center"><strong>OR</strong> 或 **</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>XOR</strong></td><td style="text-align:center">逻辑异或</td></tr></tbody></table><table><thead><tr><th style="text-align:center"><strong>位运算符</strong></th><th style="text-align:center"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center">**</td><td style="text-align:center">**</td></tr><tr><td style="text-align:center"><strong>&amp;</strong></td><td style="text-align:center">按位与</td></tr><tr><td style="text-align:center"><strong>^</strong></td><td style="text-align:center">按位异或</td></tr><tr><td style="text-align:center"><strong>&lt;&lt;</strong></td><td style="text-align:center">按位左移</td></tr><tr><td style="text-align:center"><strong>&gt;&gt;</strong></td><td style="text-align:center">按位右移</td></tr><tr><td style="text-align:center"><strong>~</strong></td><td style="text-align:center">按位取反，反转所有比特</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询商品名称为“海尔洗衣机”的商品所有信息：</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="operator">=</span> <span class="string">&#x27;海尔洗衣机&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询价格为800商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询价格不是800的所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">!=</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&lt;&gt;</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> <span class="keyword">not</span> (price <span class="operator">=</span> <span class="number">800</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品价格大于60元的所有商品信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品价格在200到1000之间所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="keyword">between</span> <span class="number">200</span> <span class="keyword">and</span> <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;=</span> <span class="number">200</span> <span class="keyword">and</span> price <span class="operator">&lt;=</span> <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;=</span> <span class="number">200</span> <span class="operator">&amp;&amp;</span> price <span class="operator">&lt;=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品价格是200或800的所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="keyword">in</span> (<span class="number">200</span>,<span class="number">800</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">=</span> <span class="number">200</span> <span class="keyword">or</span> price <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">=</span> <span class="number">200</span> <span class="operator">||</span> price <span class="operator">=</span> <span class="number">800</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询含有‘裤&#x27;字的所有商品</span></span><br><span class="line"><span class="comment">-- %：用来匹配任意字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;%裤&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询以&#x27;海&#x27;开头的所有商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;海%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询第二个字为&#x27;蔻&#x27;的所有商品</span></span><br><span class="line"><span class="comment">-- _：匹配单个字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname <span class="keyword">like</span> <span class="string">&#x27;_蔻%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询category_id为null的商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询category_id不为null分类的商品</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="keyword">is</span> <span class="keyword">not null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用least求最小值</span></span><br><span class="line"><span class="keyword">select</span> least(<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>) <span class="keyword">as</span> small_number;</span><br><span class="line"><span class="comment">-- 如果最小或最大值，有为null，则不会比较，结果直接为null</span></span><br><span class="line"><span class="keyword">select</span> least(<span class="number">10</span>,<span class="keyword">null</span>,<span class="number">20</span>) <span class="keyword">as</span> small_number; <span class="comment">-- null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用greatest求最大值</span></span><br><span class="line"><span class="keyword">select</span> greatest(<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>) <span class="keyword">as</span> small_number;</span><br><span class="line"><span class="keyword">select</span> least(<span class="number">10</span>,<span class="keyword">null</span>,<span class="number">20</span>) <span class="keyword">as</span> small_number; <span class="comment">-- null</span></span><br></pre></td></tr></table></figure><h2 id="排序查询"><a class="markdownIt-Anchor" href="#排序查询"></a> 排序查询</h2><blockquote><p>对读取的数据进行排序使用 <code>order by</code> 子句来设定你想按哪个字段哪种方式来进行排序，再返回搜索结果</p><p>asc代表升序，desc代表降序，如果不写默认升序</p><p>放在查询语句的最后面，LIMIT子句除外</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line"> 字段名<span class="number">1</span>，字段名<span class="number">2</span>，……</span><br><span class="line"><span class="keyword">from</span> 表名</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 字段名<span class="number">1</span> [<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]，字段名<span class="number">2</span>[<span class="keyword">asc</span><span class="operator">|</span><span class="keyword">desc</span>]……</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用价格排序(降序)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在价格排序(降序)的基础上，以分类排序(降序)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>, category_id <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示商品的价格(去重复)，并排序(降序)</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> price <span class="keyword">from</span> product <span class="keyword">order</span> <span class="keyword">by</span> price <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><h2 id="聚合查询"><a class="markdownIt-Anchor" href="#聚合查询"></a> 聚合查询</h2><p>纵向查询，对一列的值进行计算，返回一个单一的值，会忽略空值</p><table><thead><tr><th style="text-align:center"><strong>聚合函数</strong></th><th style="text-align:center"><strong>作用</strong></th></tr></thead><tbody><tr><td style="text-align:center"><strong>count()</strong></td><td style="text-align:center">统计指定列不为NULL的记录行数</td></tr><tr><td style="text-align:center"><strong>sum()</strong></td><td style="text-align:center">计算指定列的数值和，如果指定列类型不是数值类型，计算结果为0</td></tr><tr><td style="text-align:center"><strong>max()</strong></td><td style="text-align:center">计算指定列的最大值，如果指定列是字符串类型，那么使用字符串排序运算</td></tr><tr><td style="text-align:center"><strong>min()</strong></td><td style="text-align:center">计算指定列的最小值，如果指定列是字符串类型，那么使用字符串排序运算</td></tr><tr><td style="text-align:center"><strong>avg()</strong></td><td style="text-align:center">计算指定列的平均值，如果指定列类型不是数值类型，那么计算结果为0</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询商品的总条数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(pid) <span class="keyword">from</span> product;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询价格大于200商品的总条数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(pid) <span class="keyword">from</span> product <span class="keyword">where</span> price <span class="operator">&gt;</span> <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询分类为&#x27;c001&#x27;的所有商品的总和</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(price) <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="operator">=</span> <span class="string">&#x27;c001&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品的最大价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(price) <span class="keyword">from</span>product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品的最小价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(price) <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(price) max_price,<span class="built_in">min</span>(price) min_price <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询分类为&#x27;c002&#x27;所有商品的平均价格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">from</span> product <span class="keyword">where</span> category_id <span class="operator">=</span> <span class="string">&#x27;c003&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>NULL值的处理</p></blockquote><p>count函数：参数为星号（*），则统计所有记录的个数，参数为某字段，不统计含null值的记录个数</p><p>sum和avg函数：忽略null值的存在</p><p>max和min函数：忽略null值的存在</p><h2 id="分组查询"><a class="markdownIt-Anchor" href="#分组查询"></a> 分组查询</h2><p>使用<code>group by</code>字句对查询信息进行分组</p><blockquote><p>SELECT子句之后，只能出现分组的字段和统计函数，其他的字段不能出现</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 按照分组字段进行分组，每个分组字段相同的变成一张临时表</span></span><br><span class="line"><span class="comment">-- 再按照字段的规则进行查询</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>,字段<span class="number">2</span>… <span class="keyword">from</span> 表名 <span class="keyword">group</span> <span class="keyword">by</span> 分组字段<span class="number">1</span>,... <span class="keyword">having</span> 分组条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  统计各个分类商品的个数</span></span><br><span class="line"><span class="keyword">select</span> category_id,<span class="built_in">count</span>(pid) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> category_id;</span><br></pre></td></tr></table></figure><blockquote><p>分组之后条件筛选 - <code>having</code></p></blockquote><blockquote><p>[!CAUTION]</p><p><code>where</code>子句：筛选 FROM 子句中指定的操作所产生的行</p><p><code>group by</code>子句：分组 WHERE 子句的输出</p><p><code>having</code>子句：从分组的结果中筛选行</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 统计各个分类商品的个数，且只显示个数大于4的信息</span></span><br><span class="line"><span class="keyword">select</span> category_id,<span class="built_in">count</span>(pid) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> category_id <span class="keyword">having</span> <span class="built_in">count</span>(pid) <span class="operator">&gt;</span> <span class="number">4</span>;</span><br></pre></td></tr></table></figure><h2 id="分页查询"><a class="markdownIt-Anchor" href="#分页查询"></a> 分页查询</h2><p>由于数据量很大，显示屏长度有限，因此对数据需要采取分页显示方式</p><p>例如数据共有30条，每页显示5条，第一页显示1-5条，第二页显示6-10条</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 方式1-显示前n条</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>，字段<span class="number">2.</span>.. <span class="keyword">from</span> 表明 limit n</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2-分页显示</span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>，字段<span class="number">2.</span>.. <span class="keyword">from</span> 表明 limit m,n</span><br><span class="line"></span><br><span class="line"><span class="comment">-- m: 整数，表示从第几条索引开始，计算方式 ：(当前页-1) * 每页显示条数</span></span><br><span class="line"><span class="comment">-- n: 整数，表示查询多少条数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询product表的前5条记录</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product limit <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从第4条开始显示，显示5条 </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product limit <span class="number">3</span>,<span class="number">5</span>;</span><br></pre></td></tr></table></figure><h2 id="导入表格"><a class="markdownIt-Anchor" href="#导入表格"></a> 导入表格</h2><p>将一张表的数据导入到另一张表中，<code>目标表必须存在</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将查询出来的表插入前面的表，两个表列需要一致</span></span><br><span class="line"><span class="keyword">insert into</span> Table2(field1,field2,…) <span class="keyword">select</span> value1,value2,… <span class="keyword">from</span> Table1</span><br><span class="line"><span class="comment">-- 全部导入</span></span><br><span class="line"><span class="keyword">insert into</span> Table2 <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Table1</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">create table</span> test(</span><br><span class="line">    pname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    price <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 导入test表格</span></span><br><span class="line"><span class="keyword">insert into</span> test(pname,price) <span class="keyword">select</span> pname,price <span class="keyword">from</span> product;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> test1(</span><br><span class="line">    category_id <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    product_count <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert into</span> test1 <span class="keyword">select</span> category_id, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> product <span class="keyword">group</span> <span class="keyword">by</span> category_id;</span><br></pre></td></tr></table></figure><h2 id="正则表达式"><a class="markdownIt-Anchor" href="#正则表达式"></a> 正则表达式</h2><p>本身就是一个字符串，用来检索、替换哪些符合某个规则的文本</p><p>通过<code>REGEXP</code>关键字支持正则表达式进行字符串匹配</p><table><thead><tr><th style="text-align:center"><strong>模式</strong></th><th style="text-align:center"><strong>描述</strong></th></tr></thead><tbody><tr><td style="text-align:center"><strong>^</strong></td><td style="text-align:center">匹配输入字符串的开始位置</td></tr><tr><td style="text-align:center"><strong>$</strong></td><td style="text-align:center">匹配输入字符串的结束位置</td></tr><tr><td style="text-align:center"><strong>.</strong></td><td style="text-align:center">匹配除 “\n” 之外的任何单个字符</td></tr><tr><td style="text-align:center"><strong>[…]</strong></td><td style="text-align:center">字符集合。匹配所包含的任意一个字符。例如：’[abc]’ 可以匹配 “plain” 中的 ‘a’</td></tr><tr><td style="text-align:center"><strong>[^…]</strong></td><td style="text-align:center">负值字符集合。匹配未包含的任意字符。例如：’[^abc]’ 可以匹配  “plain” 中的’p’</td></tr><tr><td style="text-align:center">**p1</td><td style="text-align:center">p2</td></tr><tr><td style="text-align:center">*****</td><td style="text-align:center">匹配前面的子表达式零次或多次。例如：zo* 能匹配 “z” 以及 “zoo” *等价于{0,}</td></tr><tr><td style="text-align:center"><strong>+</strong></td><td style="text-align:center">匹配前面的子表达式一次或多次。例如：‘zo+’ 能匹配  “zo” 以及  “zoo”，但不能匹配  “z”。+ 等价于  {1,}</td></tr><tr><td style="text-align:center"><strong>{n}</strong></td><td style="text-align:center">n 是一个非负整数。匹配确定的 n 次。例如：‘o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o</td></tr><tr><td style="text-align:center"><strong>{n,m}</strong></td><td style="text-align:center">m 和 n 均为非负整数，其中n  &lt;= m。最少匹配 n 次且最多匹配 m 次</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ^ 在字符串开头处进行匹配</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;^a&#x27;</span>;  <span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname regexp <span class="string">&#x27;^海&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- $ 在字符串末尾开始匹配</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;a$&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;c$&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> product <span class="keyword">where</span> pname regexp <span class="string">&#x27;水$&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- . 匹配任意字符(除了换行符)</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;.b&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- [...] 括号内任意单个字符是否有与之匹配的</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;[xyz]&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;[xaz]&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- [^...] 没有出现在括号内任意的字符</span></span><br><span class="line"><span class="comment">-- 注意^符合只有在[]内才是取反的意思，在别的地方都是表示开始处匹配</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;a&#x27;</span> regexp <span class="string">&#x27;[^abc]&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;[^axz]&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a* 匹配0个或多个a,包括空字符串。 可以作为占位符使用.有没有指定字符都可以匹配到数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;stab&#x27;</span> regexp <span class="string">&#x27;.ta*b&#x27;</span>; <span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;&#x27;</span> regexp <span class="string">&#x27;a*&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- a+ 匹配1个或者多个a,但是不包括空字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;stab&#x27;</span> regexp <span class="string">&#x27;.ta+b&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;stb&#x27;</span> regexp <span class="string">&#x27;.ta+b&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a? 匹配0个或者1个a</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;stb&#x27;</span> regexp <span class="string">&#x27;ta?b&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;staab&#x27;</span> regexp <span class="string">&#x27;ta?b&#x27;</span>; <span class="comment">-- 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a1|a2 匹配a1或者a2</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;a&#x27;</span> regexp <span class="string">&#x27;a|b&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;c&#x27;</span> regexp <span class="string">&#x27;a|b&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;a&#x27;</span> regexp <span class="string">&#x27;^(a|b)&#x27;</span>;<span class="comment">-- 1,以a或b开头的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a&#123;m&#125; 匹配m个a(小于等于m个)</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> regexp <span class="string">&#x27;a&#123;1&#125;b&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;aaad&#x27;</span> regexp <span class="string">&#x27;a&#123;6&#125;d&#x27;</span>; <span class="comment">-- 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a&#123;m,&#125; 匹配m个或更多个u</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;auuuuuc&#x27;</span> regexp <span class="string">&#x27;au&#123;3,&#125;c&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;auuc&#x27;</span> regexp <span class="string">&#x27;au&#123;3,&#125;c&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- a&#123;m,n&#125; 匹配m到n个a,包含m和n</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;auuuuc&#x27;</span> regexp <span class="string">&#x27;au&#123;2,3&#125;c&#x27;</span>;<span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;auuuc&#x27;</span> regexp <span class="string">&#x27;au&#123;2,3&#125;c&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- (abc) abc作为一个序列匹配，不用括号括起来都是用单个字符去匹配，如果要把多个字符作为一个整体去匹配就需要用到括号，所以括号适合上面的所有情况</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;xababy&#x27;</span> regexp <span class="string">&#x27;x(abab)y&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;xababy&#x27;</span> regexp <span class="string">&#x27;x(ab)*y&#x27;</span>;<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;xababy&#x27;</span> regexp <span class="string">&#x27;x(ab)&#123;1,2&#125;y&#x27;</span>;<span class="comment">-- 1</span></span><br></pre></td></tr></table></figure><h1 id="多表操作"><a class="markdownIt-Anchor" href="#多表操作"></a> 多表操作</h1><h2 id="多表关系"><a class="markdownIt-Anchor" href="#多表关系"></a> 多表关系</h2><blockquote><p>一对多/多对一关系</p></blockquote><p>部门和员工</p><p>分析：一个部门有多个员工，一个员工只能对应一个部门</p><p>实现原则：在多的一方建立外键，指向一的一方的主键</p><blockquote><p>多对多关系</p></blockquote><p>学生和课程</p><p>分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择</p><p>原则：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，将多对多的关系，拆成一对多的关系，中间表至少要有两个外键，这两个外键分别指向原来的那两张表的主键</p><h2 id="外键约束"><a class="markdownIt-Anchor" href="#外键约束"></a> 外键约束</h2><p>经常与主键约束一起使用，对于两个具有关联关系的表而言，相关联字段中主键所在的表就是主表（父表）外键所在的表就是从表（子表）</p><img src="https://s2.loli.net/2025/12/28/kiWqYz2xU49NL7J.jpg" style="zoom:50%;" /><ul><li>外键中列的数据类型必须和主表主键中对应列的数据类型相同</li><li>必须给主表定义主键</li><li>主表必须已经存在于数据库中，或者是当前正在创建的表</li></ul><h3 id="添加外键约束"><a class="markdownIt-Anchor" href="#添加外键约束"></a> 添加外键约束</h3><p>通过 <code>foreign key</code> 关键字来指定外键</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建表时设置外键约束</span></span><br><span class="line">[<span class="keyword">constraint</span> 外键名] <span class="keyword">foreign key</span> (字段名) [，字段名<span class="number">2</span>，…] <span class="keyword">references</span> 主表名 主键列<span class="number">1</span> [，主键列<span class="number">2</span>，…]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表后设置外键约束</span></span><br><span class="line"><span class="keyword">alter table</span> 数据表名 <span class="keyword">add constraint</span> 外键名 <span class="keyword">foreign key</span>(列名) <span class="keyword">references</span> 主表名 (<span class="operator">&lt;</span>列名<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept(</span><br><span class="line">    deptno <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary key</span>, <span class="comment">-- 部门号 主键列</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) <span class="comment">-- 部门名字</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在创建表时设置外键约束</span></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp(</span><br><span class="line">    eid <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary key</span>,<span class="comment">-- 员工编号</span></span><br><span class="line">    ename <span class="type">varchar</span>(<span class="number">20</span>),<span class="comment">-- 员工名字</span></span><br><span class="line">    age <span class="type">int</span>,<span class="comment">-- 员工年龄</span></span><br><span class="line">    dept_id <span class="type">varchar</span>(<span class="number">20</span>),<span class="comment">-- 员工所属部门</span></span><br><span class="line">    <span class="keyword">constraint</span> emp_fk <span class="keyword">foreign key</span> (dept_id) <span class="keyword">references</span> dept(deptno) <span class="comment">-- 外键约束</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp1(</span><br><span class="line">    eid <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary key</span>,<span class="comment">-- 员工编号</span></span><br><span class="line">    ename <span class="type">varchar</span>(<span class="number">20</span>),<span class="comment">-- 员工名字</span></span><br><span class="line">    age <span class="type">int</span>,<span class="comment">-- 员工年龄</span></span><br><span class="line">    dept_id <span class="type">varchar</span>(<span class="number">20</span>)<span class="comment">-- 员工所属部门</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 创建表后设置外键约束</span></span><br><span class="line"><span class="keyword">alter table</span> emp1 <span class="keyword">add constraint</span> emp_fk1 <span class="keyword">foreign key</span>(dept_id) <span class="keyword">references</span> dept(deptno); </span><br></pre></td></tr></table></figure><h3 id="删除外键约束"><a class="markdownIt-Anchor" href="#删除外键约束"></a> 删除外键约束</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter table</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">foreign key</span> <span class="operator">&lt;</span>外键约束名<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter table</span> emp1 <span class="keyword">drop</span> <span class="keyword">foreign key</span> emp_fk1;</span><br></pre></td></tr></table></figure><h3 id="外键约束下的数据操作"><a class="markdownIt-Anchor" href="#外键约束下的数据操作"></a> 外键约束下的数据操作</h3><blockquote><p>数据插入</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"> <span class="comment">-- 添加主表数据</span></span><br><span class="line"> <span class="comment">-- 注意必须先给主表添加数据</span></span><br><span class="line"><span class="keyword">insert into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;研发部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> dept <span class="keyword">values</span>(<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;人事部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加从表数据</span></span><br><span class="line"><span class="comment">-- 注意给从表添加数据时，外键列的值不能随便写，必须依赖主表的主键列</span></span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;乔峰&#x27;</span>,<span class="number">20</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;段誉&#x27;</span>,<span class="number">21</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;虚竹&#x27;</span>,<span class="number">23</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;阿紫&#x27;</span>,<span class="number">18</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;扫地僧&#x27;</span>,<span class="number">35</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;李秋水&#x27;</span>,<span class="number">33</span>, <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;鸠摩智&#x27;</span>,<span class="number">50</span>, <span class="string">&#x27;1003&#x27;</span>); </span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span>(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;天山童姥&#x27;</span>,<span class="number">60</span>, <span class="string">&#x27;1005&#x27;</span>); <span class="comment">-- 不可以(外键需要添加主键有的)</span></span><br></pre></td></tr></table></figure><blockquote><p>删除数据</p></blockquote><p>主表的数据被从表依赖时，不能删除，否则可以删除</p><p>从表的数据可以随便删除</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 1001部门号被外键绑定，不能删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="string">&#x27;1001&#x27;</span>;</span><br><span class="line"><span class="comment">-- 1004部门号没有被外键依赖，可以删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="string">&#x27;1004&#x27;</span>;</span><br><span class="line"><span class="comment">-- 从表数据随便删</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> eid <span class="operator">=</span> <span class="string">&#x27;7&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="多对多关系"><a class="markdownIt-Anchor" href="#多对多关系"></a> 多对多关系</h3><img src="https://s2.loli.net/2025/12/28/UbQOFf3X4TapMsR.jpg" style="zoom:50%;" /><p>修改和删除时，中间从表可以随便删除和修改，但是两边的主表受从表依赖的数据不能删除或者修改</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建学生表student(左侧主表)</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> student(</span><br><span class="line">    sid <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    gender <span class="type">varchar</span> (<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建课程表course(右侧主表)</span></span><br><span class="line"><span class="keyword">create table</span> course(</span><br><span class="line">    cid <span class="type">int</span> <span class="keyword">primary key</span> auto_increment,</span><br><span class="line">    cidname <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建中间表student_course/score(从表)</span></span><br><span class="line"><span class="keyword">create table</span> score(</span><br><span class="line">    sid <span class="type">int</span>,</span><br><span class="line">    cid <span class="type">int</span>,</span><br><span class="line">    score <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 建立外键约束(2次)</span></span><br><span class="line"><span class="keyword">alter table</span> score <span class="keyword">add</span> <span class="keyword">foreign key</span>(sid) <span class="keyword">references</span> student(sid);</span><br><span class="line"><span class="keyword">alter table</span> score <span class="keyword">add</span> <span class="keyword">foreign key</span>(cid) <span class="keyword">references</span> course(cid);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给学生表添加数据</span></span><br><span class="line"><span class="keyword">insert into</span> student <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;小龙女&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">    (<span class="number">2</span>,<span class="string">&#x27;阿紫&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">    (<span class="number">3</span>,<span class="string">&#x27;周芷若&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="comment">-- 给课程表添加数据</span></span><br><span class="line"><span class="keyword">insert into</span> course <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;语文&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;数学&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;英语&#x27;</span>);</span><br><span class="line"><span class="comment">-- 给中间表添加数据</span></span><br><span class="line"><span class="keyword">insert into</span> score <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">58</span>),(<span class="number">1</span>,<span class="number">3</span>,<span class="number">50</span>),(<span class="number">2</span>,<span class="number">1</span>,<span class="number">89</span>),(<span class="number">2</span>,<span class="number">2</span>,<span class="number">64</span>),(<span class="number">3</span>,<span class="number">2</span>,<span class="number">25</span>),(<span class="number">3</span>,<span class="number">3</span>,<span class="number">82</span>);</span><br></pre></td></tr></table></figure><h2 id="多表联合查询"><a class="markdownIt-Anchor" href="#多表联合查询"></a> 多表联合查询</h2><h3 id="交叉连接查询了解"><a class="markdownIt-Anchor" href="#交叉连接查询了解"></a> 交叉连接查询(了解)</h3><p>一张表的每一行去和另外一张表的任意一行进行匹配</p><p>假如A表有m行数据，B表有n行数据，则返回m*n行数据</p><p>笛卡尔积会产生很多冗余的数据，后期的其他查询可以在该集合的基础上进行条件筛选</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表<span class="number">1</span>,表<span class="number">2</span>,表<span class="number">3</span>….; </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3,emp3;</span><br></pre></td></tr></table></figure><h3 id="内连接查询"><a class="markdownIt-Anchor" href="#内连接查询"></a> 内连接查询</h3><blockquote><p>[!NOTE]</p><p>查询求多张表的<code>交集</code>，关键字 <code>inner join</code> (inner可以省略)</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 隐式内连接（SQL92标准）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A,B <span class="keyword">where</span> 条件;</span><br><span class="line"><span class="comment">-- 显示内连接（SQL99标准）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">inner</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询每个部门的所属员工</span></span><br><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3,emp3 <span class="keyword">where</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"><span class="comment">-- 显示内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">join</span> emp3 <span class="keyword">on</span> dept3.deptno <span class="operator">=</span> emp3.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询研发部所属员工</span></span><br><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a,emp3 b <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> a.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span>;</span><br><span class="line"><span class="comment">-- 显示内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> a.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询研发部和销售部的所属员工</span></span><br><span class="line"><span class="comment">-- 隐式内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a,emp3 b <span class="keyword">where</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> (a.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> a.name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="comment">-- 显示内连接</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> (a.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> a.name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id <span class="keyword">and</span> a.name <span class="keyword">in</span> (<span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询每个部门的员工数,并升序排序</span></span><br><span class="line"><span class="keyword">select</span> a.name,a.deptno,<span class="built_in">count</span>(<span class="number">1</span>) c</span><br><span class="line"><span class="keyword">from</span> dept3 a</span><br><span class="line">    <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    a.deptno,a.name</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">     c <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询人数大于等于3的部门，并按照人数降序排序</span></span><br><span class="line"><span class="keyword">select</span> a.deptno,a.name,<span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> total_cnt</span><br><span class="line"><span class="keyword">from</span> dept3 a</span><br><span class="line">    <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.deptno,a.name</span><br><span class="line"><span class="keyword">having</span> total_cnt <span class="operator">&gt;=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> total_cnt <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><h3 id="外连接查询"><a class="markdownIt-Anchor" href="#外连接查询"></a> 外连接查询</h3><blockquote><p>[!NOTE]</p><p>关键字 <code>outer join</code>(<code>outer</code>可以省略)</p><p>显示符合连接条件的信息，信息内容是左表还是右边或都显示，看是左连接还是右连接或满连接</p><p><code>union</code>操作符用于合并两个或多个<code>select</code>语句的结果集，但是每个<code>select</code>语句必须选择相同数量的列，列也必须具有相似的数据类型，<code>union</code>默认会去除重复的行，如果需要保留重复的行，可以使用<code>union all</code></p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 左外连接：left outer join</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line"><span class="comment">-- 右外连接：right outer join</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br><span class="line"><span class="comment">--  满外连接: full outer join</span></span><br><span class="line"><span class="comment">-- oracle里面有full join,可是在mysql对full join支持的不好，使用union来达到目的</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 左连接</span></span><br><span class="line"><span class="comment">-- 查询哪些部门有员工，哪些部门没有员工</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">left</span> <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A </span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> B <span class="keyword">on</span> 条件<span class="number">1</span></span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> C <span class="keyword">on</span> 条件<span class="number">2</span></span><br><span class="line">    <span class="keyword">left</span> <span class="keyword">join</span> D <span class="keyword">on</span> 条件<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右连接</span></span><br><span class="line"><span class="comment">-- 查询哪些员工有对应的部门，哪些没有</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">right</span> <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 满外连接</span></span><br><span class="line"><span class="comment">-- 使用union关键字实现左外连接和右外连接的并集</span></span><br><span class="line"><span class="comment">-- select * from dept3 a full join emp3 b on a.deptno = b.dept_id;-- 不能执行</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">left</span> <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 a <span class="keyword">right</span> <span class="keyword">join</span> emp3 b <span class="keyword">on</span> a.deptno <span class="operator">=</span> b.dept_id;</span><br></pre></td></tr></table></figure><h3 id="基本子查询"><a class="markdownIt-Anchor" href="#基本子查询"></a> 基本子查询</h3><p><code>select</code>的嵌套</p><blockquote><p>[!IMPORTANT]</p><p>子查询返回的数据类型：</p><p>单行单列：返回的是一个具体列的内容，可以理解为一个单值数据</p><p>单行多列：返回一行数据中多个列的内容</p><p>多行单列：返回多行记录之中同一列的内容，相当于给出了一个操作范围</p><p>多行多列：查询返回的结果是一张临时表</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询年龄最大的员工信息，显示信息包含员工号、员工名字，员工年龄</span></span><br><span class="line"><span class="comment">-- 1.查询最大年龄</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> emp3;</span><br><span class="line"><span class="comment">-- 2.每一个员工的年龄和最大年龄进行比较，相等则满足条件</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">=</span> (<span class="keyword">select</span> <span class="built_in">max</span>(age) <span class="keyword">from</span> emp3);<span class="comment">-- 单行单列可以作为一个值来用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询年研发部和销售部的员工信息，包含员工号、员工名字</span></span><br><span class="line"><span class="comment">-- 内连接查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">join</span> dept b </span><br><span class="line"><span class="keyword">on</span> a.dept_id <span class="operator">=</span> b.deptno </span><br><span class="line"><span class="keyword">and</span> (b.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> b.name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line"><span class="comment">-- 1.先查询研发部和销售部的部门号：deptno 1001 1002</span></span><br><span class="line"><span class="keyword">select</span> dept.deptno <span class="keyword">from</span> dept <span class="keyword">where</span> dept.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> dept.name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2.查询哪个员工的部门号是1001 或 1002</span></span><br><span class="line"><span class="keyword">select</span> a.dept_id,a.ename <span class="keyword">from</span> emp3  a <span class="keyword">where</span> a.dept_id </span><br><span class="line"><span class="keyword">in</span> (<span class="keyword">select</span> dept.deptno <span class="keyword">from</span> dept </span><br><span class="line">    <span class="keyword">where</span> dept.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> dept.name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);<span class="comment">-- 多行单列，多个值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询研发部20岁以下的员工信息,包括员工号、员工名字，部门名</span></span><br><span class="line"><span class="comment">-- 关联查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">join</span> dept b <span class="keyword">on</span> (b.name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">and</span> a.age <span class="operator">&lt;</span> <span class="number">20</span>);</span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line"><span class="comment">-- 2.1在部门表中查询研发部信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span>; <span class="comment">-- 一行多列</span></span><br><span class="line"><span class="comment">-- 2.2在员工表中查询年龄小于30岁的员工信息慕容博</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 2.3将以上两个查询的结果进行关联查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span><span class="string">&#x27;研发部&#x27;</span>) t1 </span><br><span class="line"><span class="keyword">join</span> (<span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> emp3 <span class="keyword">where</span> age<span class="operator">&lt;</span> <span class="number">30</span>) t2 </span><br><span class="line"><span class="keyword">on</span> t1.deptno <span class="operator">=</span> t2.dept_id;<span class="comment">-- 多行多列</span></span><br></pre></td></tr></table></figure><h4 id="all关键字"><a class="markdownIt-Anchor" href="#all关键字"></a> all关键字</h4><blockquote><p>[!NOTE]</p><p>ALL: 与子查询返回的所有值比较为true 则返回true</p><p>ALL可以与=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;结合是来使用，分别表示等于、大于、大于等于、小于、小于等于、不等于其中的其中的所有数据</p><p>ALL表示指定列中的值必须要大于子查询集的每一个值，即必须要大于子查询集的最大值；如果是小于号即小于子查询集的最小值。同理可以推出其它的比较运算符的情况</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> c <span class="operator">&gt;</span> <span class="keyword">all</span>(查询语句)</span><br><span class="line"><span class="comment">-- 等价于：select ...from ... where c &gt; result1 and c &gt; result2 and c &gt; result3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询年龄大于‘1003’部门所有年龄的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> emp3.age <span class="operator">&gt;</span> <span class="keyword">all</span> (<span class="keyword">select</span> age <span class="keyword">from</span> emp3 <span class="keyword">where</span> emp3.dept_id <span class="operator">=</span> <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询不属于任何一个部门的员工信息 </span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> emp3.dept_id <span class="operator">&lt;&gt;</span> <span class="keyword">all</span> (<span class="keyword">select</span> deptno <span class="keyword">from</span> dept3);</span><br></pre></td></tr></table></figure><h4 id="any和some关键字"><a class="markdownIt-Anchor" href="#any和some关键字"></a> any和some关键字</h4><blockquote><p>[!NOTE]</p><p>ANY：与子查询返回的任意值比较为true 则返回true</p><p>ANY可以与=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;结合是来使用，分别表示等于、大于、大于等于、小于、小于等于、不等于其中的其中的任何一个数据</p><p>表示制定列中的值要大于子查询中的任意一个值，即必须要大于子查询集中的最小值。同理可以推出其它的比较运算符的情况</p><p>SOME和ANY的作用一样，SOME可以理解为ANY的别名</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> … <span class="keyword">from</span> … <span class="keyword">where</span> c <span class="operator">&gt;</span> <span class="keyword">any</span>(查询语句)</span><br><span class="line"><span class="comment">-- 等价于：select ...from ... where c &gt; result1 or c &gt; result2 or c &gt; result3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询年龄大于‘1003’部门任意一个员工年龄的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="keyword">any</span> (<span class="keyword">select</span> age <span class="keyword">from</span> emp3 </span><br><span class="line"><span class="keyword">where</span> dept_id <span class="operator">=</span> <span class="string">&#x27;1003&#x27;</span>)</span><br><span class="line"><span class="keyword">and</span> dept_id <span class="operator">!=</span> <span class="string">&#x27;1003&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="in关键字"><a class="markdownIt-Anchor" href="#in关键字"></a> in关键字</h4><blockquote><p>[!NOTE]</p><p>用于判断某个记录的值，是否在指定的集合中</p><p>在IN关键字前边加上not可以将条件反过来</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> c <span class="keyword">in</span>(查询语句)</span><br><span class="line"><span class="comment">-- 等价于：select ...from ... where c = result1 or c = result2 or c = result3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询研发部和销售部的员工信息，包含员工号、员工名字</span></span><br><span class="line"><span class="keyword">select</span> eid,ename <span class="keyword">from</span> emp3 <span class="keyword">where</span> dept_id </span><br><span class="line"><span class="keyword">in</span> (<span class="keyword">select</span> deptno <span class="keyword">from</span> dept3 <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="exists关键字"><a class="markdownIt-Anchor" href="#exists关键字"></a> exists关键字</h4><blockquote><p>[!NOTE]</p><p>该子查询如果“有数据结果”(至少返回一行数据)，则该EXISTS() 的结果为“true”，外层查询执行</p><p>该子查询如果“没有数据结果”（没有任何数据返回），则该EXISTS()的结果为“false”，外层查询不执行</p><p>EXISTS后面的子查询不返回任何实际数据，只返回真或假，当返回真时 where条件成立</p><p>注意，EXISTS关键字，比IN关键字的运算效率高，因此，在实际开发中，特别是大数据量时，推荐使用EXISTS关键字</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> …<span class="keyword">from</span> …<span class="keyword">where</span> <span class="keyword">exists</span>(查询语句)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询公司是否有大于60岁的员工，有则输出</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">where</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 <span class="keyword">where</span> a.age <span class="operator">&gt;</span> <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询有所属部门的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3 a <span class="keyword">where</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept3 b <span class="keyword">where</span> a.dept_id <span class="operator">=</span> b.deptno);</span><br></pre></td></tr></table></figure><h3 id="自关联查询"><a class="markdownIt-Anchor" href="#自关联查询"></a> 自关联查询</h3><blockquote><p>[!NOTE]</p><p>有时在信息查询时需要进行对表自身进行关联查询，即一张表自己和自己关联，一张表当成多张表来用。注意自关联时表必须给表起别名</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表<span class="number">1</span> a , 表<span class="number">1</span> b <span class="keyword">where</span> 条件;</span><br><span class="line">或者 </span><br><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表<span class="number">1</span> a [<span class="keyword">left</span>] <span class="keyword">join</span> 表<span class="number">1</span> b <span class="keyword">on</span> 条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.查询每个三国人物及他的上级信息，如:  关羽  刘备 </span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.ename <span class="keyword">from</span> t_sanguo a, t_sanguo b <span class="keyword">where</span> a.manager_id <span class="operator">=</span> b.eid;</span><br><span class="line"><span class="keyword">select</span> a.ename,b.ename <span class="keyword">from</span> t_sanguo a <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有任务及上级</span></span><br><span class="line"><span class="keyword">select</span> a.ename,b.ename <span class="keyword">from</span> t_sanguo a <span class="keyword">left</span> <span class="keyword">join</span> t_sanguo b <span class="keyword">on</span> a.manager_id <span class="operator">=</span> b.eid;</span><br></pre></td></tr></table></figure><h1 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h1><h2 id="聚合函数"><a class="markdownIt-Anchor" href="#聚合函数"></a> 聚合函数</h2><p>group_concat()函数，数据的某一列合并成一行</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 将所有员工的名字合并成一行(默认;分隔)</span></span><br><span class="line"><span class="keyword">select</span> group_concat(emp_name) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 指定分隔符合并 </span></span><br><span class="line"><span class="keyword">select</span> group_concat(emp_name separator <span class="string">&#x27;;&#x27;</span>) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 指定排序方式和分隔符</span></span><br><span class="line"><span class="keyword">select</span> department,group_concat(emp_name separator <span class="string">&#x27;;&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> department,group_concat(emp_name <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span> separator <span class="string">&#x27;;&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department;</span><br></pre></td></tr></table></figure><h2 id="数学函数"><a class="markdownIt-Anchor" href="#数学函数"></a> 数学函数</h2><table><thead><tr><th style="text-align:center"><strong>abs(x)</strong></th><th style="text-align:center">返回 x 的绝对值</th></tr></thead><tbody><tr><td style="text-align:center"><strong>ceil(x)</strong></td><td style="text-align:center">返回大于或等于 x 的最小整数</td></tr><tr><td style="text-align:center"><strong>floor(x)</strong></td><td style="text-align:center">返回小于或等于 x 的最大整数</td></tr><tr><td style="text-align:center"><strong>greatest(expr1, expr2, expr3, …)</strong></td><td style="text-align:center">返回列表中的最大值</td></tr><tr><td style="text-align:center"><strong>least(expr1, expr2, expr3, …)</strong></td><td style="text-align:center">返回列表中的最小值</td></tr><tr><td style="text-align:center"><strong>mod(x,y)</strong></td><td style="text-align:center">返回 x 除以 y 以后的余数</td></tr><tr><td style="text-align:center"><strong>pi()</strong></td><td style="text-align:center">返回圆周率(3.141593）</td></tr><tr><td style="text-align:center"><strong>pow(x,y)</strong></td><td style="text-align:center">返回 x 的 y 次方</td></tr><tr><td style="text-align:center"><strong>rand()</strong></td><td style="text-align:center">返回 0 到 1 的随机数</td></tr><tr><td style="text-align:center"><strong>round(x)</strong></td><td style="text-align:center">返回离 x 最近的整数（遵循四舍五入）</td></tr><tr><td style="text-align:center"><strong>round(x,y)</strong></td><td style="text-align:center">返回指定位数的小数（遵循四舍五入）</td></tr><tr><td style="text-align:center"><strong>truncate(x,y)</strong></td><td style="text-align:center">返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别不会四舍五入）</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 求绝对值</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">abs</span> (<span class="number">-10</span>);<span class="comment">-- 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceil</span>(<span class="number">1.1</span>);<span class="comment">-- 2</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceil</span>(<span class="number">1.0</span>);<span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">1.1</span>);<span class="comment">-- 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">1.9</span>);<span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 取列表最大值</span></span><br><span class="line"><span class="keyword">select</span> greatest(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);<span class="comment">-- 3</span></span><br></pre></td></tr></table></figure><h2 id="字符串函数"><a class="markdownIt-Anchor" href="#字符串函数"></a> 字符串函数</h2><table><thead><tr><th style="text-align:center"><strong>char_length(s)</strong></th><th style="text-align:center">返回字符串 s 的字符数</th></tr></thead><tbody><tr><td style="text-align:center"><strong>character_length(s)</strong></td><td style="text-align:center">返回字符串 s 的字符数</td></tr><tr><td style="text-align:center"><strong>concat(s1,s2…sn)</strong></td><td style="text-align:center">字符串 s1,s2 等多个字符串合并为一个字符串</td></tr><tr><td style="text-align:center"><strong>concat_ws(x,s1,s2…sn)</strong></td><td style="text-align:center">同 concat 函数，但是每个字符串之间要加上 x，x 可以是分隔符</td></tr><tr><td style="text-align:center"><strong>field(s,s1,s2…)</strong></td><td style="text-align:center">返回第一个字符串 s 在字符串列表(s1,s2…)中的位置</td></tr><tr><td style="text-align:center"><strong>ltrim(s)</strong></td><td style="text-align:center">去掉字符串 s 开始处的空格</td></tr><tr><td style="text-align:center"><strong>position(s1 IN s)</strong></td><td style="text-align:center">从字符串 s 中获取 s1 的开始位置</td></tr><tr><td style="text-align:center"><strong>replace(s,s1,s2)</strong></td><td style="text-align:center">字符串 s2 替代字符串 s 中的字符串 s1</td></tr><tr><td style="text-align:center"><strong>reverse(s)</strong></td><td style="text-align:center">将字符串s的顺序反过来</td></tr><tr><td style="text-align:center"><strong>right(s,n)</strong></td><td style="text-align:center">返回字符串 s 的后 n 个字符</td></tr><tr><td style="text-align:center"><strong>rtrim(s)</strong></td><td style="text-align:center">去掉字符串 s 结尾处的空格</td></tr><tr><td style="text-align:center"><strong>strcmp(s1,s2)</strong></td><td style="text-align:center">比较字符串 s1 和 s2，若 s1 与 s2 相等返回 0，若 s1&gt;s2 返回 1，若 s1&lt;s2 返回 -1</td></tr><tr><td style="text-align:center"><strong>mid(s,n,len)</strong></td><td style="text-align:center">从字符串 s 的 n 位置截取长度为 len 的子字符串</td></tr><tr><td style="text-align:center"><strong>subste(s, start, length)</strong></td><td style="text-align:center">从字符串 s 的 start 位置截取长度为 length 的子字符串</td></tr><tr><td style="text-align:center"><strong>substring(s, start, length)</strong></td><td style="text-align:center">从字符串 s 的 start 位置截取长度为 length 的子字符串</td></tr><tr><td style="text-align:center"><strong>trim(s)</strong></td><td style="text-align:center">去掉字符串 s 开始和结尾处的空格</td></tr><tr><td style="text-align:center"><strong>ucase(s)</strong></td><td style="text-align:center">字符串转换为大写</td></tr><tr><td style="text-align:center"><strong>upper(s)</strong></td><td style="text-align:center">字符串转换为大写</td></tr><tr><td style="text-align:center"><strong>lcase(s)</strong></td><td style="text-align:center">将字符串 s 的所有字母变成小写字母</td></tr><tr><td style="text-align:center"><strong>lower(s)</strong></td><td style="text-align:center">将字符串 s 的所有字母变成小写字母</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 获取字符串字符个数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">char_length</span>(<span class="string">&#x27;hello&#x27;</span>);<span class="comment">-- 5</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">char_length</span>(<span class="string">&#x27;你好吗&#x27;</span>);<span class="comment">-- 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- length取长度，返回单位是字节</span></span><br><span class="line"><span class="keyword">select</span> length(<span class="string">&#x27;hello&#x27;</span>);<span class="comment">-- 5</span></span><br><span class="line"><span class="keyword">select</span> length(<span class="string">&#x27;你好吗&#x27;</span>); <span class="comment">-- 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 指定分隔符进行字符串合并</span></span><br><span class="line"><span class="keyword">select</span> concat_ws(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>);<span class="comment">-- hello-world</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回字符串在列表中第一次出现的位置</span></span><br><span class="line"><span class="keyword">select</span> field(<span class="string">&#x27;bbb&#x27;</span>,<span class="string">&#x27;aaa&#x27;</span>,<span class="string">&#x27;bbb&#x27;</span>);<span class="comment">-- 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去除字符串左边空格</span></span><br><span class="line"><span class="keyword">select</span> ltrim(<span class="string">&#x27;  aaa&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去除字符串右边空格</span></span><br><span class="line"><span class="keyword">select</span> rtrim(<span class="string">&#x27;aaa   &#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 去除字符串两边空格</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="string">&#x27;   aaa   &#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串截取</span></span><br><span class="line"><span class="keyword">select</span> mid(&quot;helloworld&quot;,<span class="number">2</span>,<span class="number">3</span>);<span class="comment">-- 第二个字符开始截取，截取长度为3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取字符串A在字符串中出现的位置</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">position</span>(<span class="string">&#x27;abc&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;helloabcworld&#x27;</span>);<span class="comment">-- 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串替换</span></span><br><span class="line"><span class="keyword">select</span> replace(<span class="string">&#x27;helloaaaworld&#x27;</span>,<span class="string">&#x27;aaa&#x27;</span>,<span class="string">&#x27;bbb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串翻转</span></span><br><span class="line"><span class="keyword">select</span> reverse(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回字符串后几个字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">right</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>);<span class="comment">-- lo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串比较</span></span><br><span class="line"><span class="keyword">select</span> strcmp(<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>);<span class="comment">-- -1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串截取</span></span><br><span class="line"><span class="keyword">select</span> substr(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">substring</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 小写转大写</span></span><br><span class="line"><span class="keyword">select</span> ucase(&quot;helloworlD&quot;);</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">upper</span>(&quot;helloworlD&quot;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 大写转小写</span></span><br><span class="line"><span class="keyword">select</span> lcase(&quot;HEllowdord&quot;);</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">lower</span>(&quot;HEllowdord&quot;);</span><br></pre></td></tr></table></figure><h2 id="日期函数"><a class="markdownIt-Anchor" href="#日期函数"></a> 日期函数</h2><table><thead><tr><th style="text-align:center"><strong>uix_timestamp()</strong></th><th style="text-align:center">返回从 1970-01-01 00:00:00 到当前毫秒值</th></tr></thead><tbody><tr><td style="text-align:center"><strong>unix_timestamp(DATE_STRING)</strong></td><td style="text-align:center">将制定日期转为毫秒值时间戳</td></tr><tr><td style="text-align:center"><strong>from_unixtime(BIGINT UNIXTIME[,  STRING FORMAT])</strong></td><td style="text-align:center">将毫秒值时间戳转为指定格式日期</td></tr><tr><td style="text-align:center"><strong>curdate()</strong></td><td style="text-align:center">返回当前日期</td></tr><tr><td style="text-align:center"><strong>current_date()</strong></td><td style="text-align:center">返回当前日期</td></tr><tr><td style="text-align:center"><strong>current_time()</strong></td><td style="text-align:center">返回当前时间</td></tr><tr><td style="text-align:center"><strong>curtime()</strong></td><td style="text-align:center">返回当前时间</td></tr><tr><td style="text-align:center"><strong>current_timestamp()</strong></td><td style="text-align:center">返回当前日期和时间</td></tr><tr><td style="text-align:center"><strong>date()</strong></td><td style="text-align:center">从日期或日期时间表达式中提取日期值</td></tr><tr><td style="text-align:center"><strong>datediff(d1,d2)</strong></td><td style="text-align:center">计算日期 d1-&gt;d2 之间相隔的天数</td></tr><tr><td style="text-align:center"><strong>timediff(time1, time2)</strong></td><td style="text-align:center">计算时间差值</td></tr><tr><td style="text-align:center"><strong>date_format(d,f)</strong></td><td style="text-align:center">按表达式 f的要求显示日期 d</td></tr><tr><td style="text-align:center"><strong>str_to_date(string, format_mask)</strong></td><td style="text-align:center">将字符串转变为日期</td></tr><tr><td style="text-align:center"><strong>date_sub(date, interval expr type)</strong></td><td style="text-align:center">函数从日期减去指定的时间间隔，expr：数字</td></tr><tr><td style="text-align:center"><strong>adddate/date_add(d，interval expr type)</strong></td><td style="text-align:center">计算起始日期 d 加上一个时间段后的日期，expr：数字   type 值可以是：microsecond(微秒)、second(秒)、minute(分钟)、hour(小时)、day(天)、week(周)、month(月)、quarter(季)、year(年)、DAY_MINUTE day_minute(天和分钟)、day_hour(天和小时)、ear_month(年和月)</td></tr><tr><td style="text-align:center"><strong>extract(type from d)</strong></td><td style="text-align:center">从日期 d 中获取指定的值，type指定返回的值   type 可取值为：microsecond(微秒)、second(秒)、minute(分钟)、hour(小时)</td></tr><tr><td style="text-align:center"><strong>last_day(d)</strong></td><td style="text-align:center">返回给给定日期的那一月份的最后一天</td></tr><tr><td style="text-align:center"><strong>makedate(year, day-of-year)</strong></td><td style="text-align:center">基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期</td></tr><tr><td style="text-align:center"><strong>year(d)</strong></td><td style="text-align:center">返回年份</td></tr><tr><td style="text-align:center"><strong>MONTH(d)</strong></td><td style="text-align:center">返回日期d中的月份值，1 到 12</td></tr><tr><td style="text-align:center"><strong>day(d)</strong></td><td style="text-align:center">返回日期值 d 的日期部分</td></tr><tr><td style="text-align:center"><strong>hour(t)</strong></td><td style="text-align:center">返回 t 中的小时值</td></tr><tr><td style="text-align:center"><strong>minute(t)</strong></td><td style="text-align:center">返回 t 中的分钟值</td></tr><tr><td style="text-align:center"><strong>second(t)</strong></td><td style="text-align:center">返回 t 中的秒钟值</td></tr><tr><td style="text-align:center"><strong>quarter(d)</strong></td><td style="text-align:center">返回日期d是第几季节，返回 1 到 4</td></tr><tr><td style="text-align:center"><strong>monthname(d)</strong></td><td style="text-align:center">返回日期当中的月份名称，如 November</td></tr><tr><td style="text-align:center"><strong>month(d)</strong></td><td style="text-align:center">返回日期d中的月份值，1 到 12</td></tr><tr><td style="text-align:center"><strong>dayname(d)</strong></td><td style="text-align:center">返回日期 d 是星期几，如 Monday,Tuesday</td></tr><tr><td style="text-align:center"><strong>dayofmonth(d)</strong></td><td style="text-align:center">计算日期 d 是本月的第几天</td></tr><tr><td style="text-align:center"><strong>dayofweek(d)</strong></td><td style="text-align:center">日期 d 今天是星期几，1 星期日，2 星期一，以此类推</td></tr><tr><td style="text-align:center"><strong>dayofyear(d)</strong></td><td style="text-align:center">计算日期 d 是本年的第几天</td></tr><tr><td style="text-align:center"><strong>week(d)</strong></td><td style="text-align:center">计算日期 d 是本年的第几个星期，范围是 0 到 53</td></tr><tr><td style="text-align:center"><strong>weekday(d)</strong></td><td style="text-align:center">日期 d 是星期几，0 表示星期一，1 表示星期二</td></tr><tr><td style="text-align:center"><strong>weekofyear(d)</strong></td><td style="text-align:center">计算日期 d 是本年的第几个星期，范围是 0 到 53</td></tr><tr><td style="text-align:center"><strong>yearweek(date, mode)</strong></td><td style="text-align:center">返回年份及第几周（0到53）mode 中 0 表示周天，1表示周一，以此类推</td></tr><tr><td style="text-align:center"><strong>now()</strong></td><td style="text-align:center">返回当前日期和时间</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 日期函数</span></span><br><span class="line"><span class="comment">-- 1:获取时间戳 （毫秒值）</span></span><br><span class="line"><span class="keyword">select</span> unix_timestamp();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2:将一个日期字符串转为毫秒值</span></span><br><span class="line"><span class="keyword">select</span> unix_timestamp(<span class="string">&#x27;2021-12-21 08:08:08&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3：将时间戳毫秒值转为指定格式的日期</span></span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1640045288</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4：获取当前的年月日</span></span><br><span class="line"><span class="keyword">select</span> curdate();</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">current_date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5：获取当前的时分秒</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>();</span><br><span class="line"><span class="keyword">SELECT</span> CURTIME();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6：获取年月日和时分秒</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIMESTAMP</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从日期字符串中获取年月日</span></span><br><span class="line"><span class="keyword">select</span> <span class="type">date</span>(<span class="string">&#x27;2022-12-12 12:34:56&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8:获取日期之间的差值</span></span><br><span class="line"><span class="keyword">select</span> datediff(<span class="string">&#x27;2021-12-23&#x27;</span>,<span class="string">&#x27;2008-08-08&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9：获取时间的差值（秒级）</span></span><br><span class="line"><span class="keyword">select</span> timediff(<span class="string">&#x27;12:12:34&#x27;</span>,<span class="string">&#x27;10:18:56&#x27;</span>); <span class="comment">-- 01:53:38</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10:日期格式化</span></span><br><span class="line"><span class="keyword">select</span> date_format(<span class="string">&#x27;2021-1-1 1:1:1&#x27;</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> date_format(<span class="string">&#x27;2021-12-13 11:11:11&#x27;</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11:将字符串转为日期</span></span><br><span class="line"><span class="keyword">select</span> str_to_date(<span class="string">&#x27;2021-12-13 11:11:11&#x27;</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 12：将日期进行减法  日期向前跳转</span></span><br><span class="line"><span class="keyword">select</span> date_sub(<span class="string">&#x27;2021-10-01&#x27;</span>,<span class="type">interval</span> <span class="number">2</span> <span class="keyword">day</span>);</span><br><span class="line"><span class="keyword">select</span> date_sub(<span class="string">&#x27;2021-10-01&#x27;</span>,<span class="type">interval</span> <span class="number">2</span> <span class="keyword">month</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 13：将日期进行加法  日期向后跳转</span></span><br><span class="line"><span class="keyword">select</span> date_add(<span class="string">&#x27;2021-10-01&#x27;</span>,<span class="type">interval</span> <span class="number">2</span> <span class="keyword">day</span>);</span><br><span class="line"><span class="keyword">select</span> date_add(<span class="string">&#x27;2021-10-01&#x27;</span>,<span class="type">interval</span> <span class="number">2</span> <span class="keyword">month</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 14：从日期中获取小时</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">extract</span>(<span class="keyword">hour</span> <span class="keyword">from</span><span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">extract</span>(<span class="keyword">year</span> <span class="keyword">from</span> <span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 15：获取给定日期所在月的最后一天</span></span><br><span class="line"><span class="keyword">select</span> last_day(<span class="string">&#x27;2021-08-13&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 16：获取指定年份和天数的日期</span></span><br><span class="line"><span class="keyword">select</span> makedate(<span class="string">&#x27;2021&#x27;</span>,<span class="number">53</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 17:根据日期获取年月日，时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">minute</span>(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> quarter(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);<span class="comment">-- 获取季度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 18:根据日期获取信息</span></span><br><span class="line"><span class="keyword">SELECT</span> MONTHNAME(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);<span class="comment">-- 获取月份的英文</span></span><br><span class="line"><span class="keyword">SELECT</span> DAYNAME(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);<span class="comment">-- 获取周几：Monday</span></span><br><span class="line"><span class="keyword">SELECT</span> DAYOFMONTH(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);<span class="comment">-- 当月的第几天</span></span><br><span class="line"><span class="keyword">SELECT</span> DAYOFWEEK(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);<span class="comment">-- 1:周日 2:周一</span></span><br><span class="line"><span class="keyword">SELECT</span> DAYOFYEAR(<span class="string">&#x27;2021-12-13 11:12:13&#x27;</span>);<span class="comment">-- 获取一年的第几天</span></span><br></pre></td></tr></table></figure><h2 id="控制流函数"><a class="markdownIt-Anchor" href="#控制流函数"></a> 控制流函数</h2><blockquote><p><strong>if逻辑判断语句</strong></p></blockquote><table><thead><tr><th style="text-align:center"><strong>if(expr,v1,v2)</strong></th><th style="text-align:center">如果表达式 expr 成立，返回结果 v1 否则，返回结果 v2</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://www.runoob.com/mysql/mysql-func-ifnull.html">ifnull(v1,v2)</a></td><td style="text-align:center">如果 v1 的值不为 NULL，则返回 v1，否则返回 v2</td></tr><tr><td style="text-align:center"><strong>isnull(expression)</strong></td><td style="text-align:center">判断表达式是否为 NULL</td></tr><tr><td style="text-align:center"><strong>nullif(expr1, expr2)</strong></td><td style="text-align:center">比较两个字符串，如果字符串 expr1 与 expr2 相等 返回 NULL，否则返回 expr1</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 成绩大于85则优秀反之及格</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>,if(score <span class="operator">&gt;=</span><span class="number">85</span>,<span class="string">&#x27;优秀&#x27;</span>,<span class="string">&#x27;及格&#x27;</span>) falg <span class="keyword">from</span> score;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- comm为空则显示0</span></span><br><span class="line"><span class="keyword">select</span><span class="operator">*</span>,ifnull(comm,<span class="number">0</span>)comm_flagfromemp</span><br><span class="line"></span><br><span class="line">selectisnull(<span class="number">5</span>);<span class="comment">-- 0</span></span><br><span class="line">selectisnull(<span class="keyword">NULL</span>); <span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">nullif</span>(<span class="number">12</span>,<span class="number">12</span>);<span class="comment">-- null</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">nullif</span>(<span class="number">12</span>,<span class="number">13</span>);<span class="comment">-- 12</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>ucase when语句</strong></p></blockquote><table><thead><tr><th style="text-align:center"><strong>CASE expression</strong>   <strong>WHEN condition1 THEN  result1</strong>   <strong>WHEN condition2 THEN  result2</strong>   <strong>…</strong>      <strong>WHEN conditionN THEN resultN</strong>   <strong>ELSE result</strong>   <strong>END</strong></th><th style="text-align:center">CASE 表示函数开始，END 表示函数结束。如果 condition1 成立，则返回 result1，如果 condition2 成立，则返回 result2，当全部不成立则返回 result，而当有一个成立之后，后面的就不执行了</th></tr></thead><tbody></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;2&#x27;</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">5</span> <span class="keyword">then</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="string">&#x27;4&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">as</span> info;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式1</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>  ,</span><br><span class="line"><span class="keyword">case</span> </span><br><span class="line">    <span class="keyword">when</span> payType<span class="operator">=</span><span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;微信支付&#x27;</span> </span><br><span class="line">    <span class="keyword">when</span> payType<span class="operator">=</span><span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;支付宝支付&#x27;</span> </span><br><span class="line">    <span class="keyword">when</span> payType<span class="operator">=</span><span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;银行卡支付&#x27;</span> </span><br><span class="line">    <span class="keyword">else</span> <span class="string">&#x27;其他支付方式&#x27;</span> </span><br><span class="line"><span class="keyword">end</span>  <span class="keyword">as</span> payTypeStr</span><br><span class="line"><span class="keyword">from</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式2</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span>  ,</span><br><span class="line"><span class="keyword">case</span> payType</span><br><span class="line">    <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;微信支付&#x27;</span></span><br><span class="line">    <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;支付宝支付&#x27;</span></span><br><span class="line">    <span class="keyword">when</span> <span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;银行卡支付&#x27;</span></span><br><span class="line">    <span class="keyword">else</span> <span class="string">&#x27;其他支付方式&#x27;</span> </span><br><span class="line"><span class="keyword">end</span>  <span class="keyword">as</span> payTypeStr</span><br><span class="line"><span class="keyword">from</span> orders;</span><br></pre></td></tr></table></figure><h1 id="窗口函数"><a class="markdownIt-Anchor" href="#窗口函数"></a> 窗口函数</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">window_function ( expr ) <span class="keyword">over</span> ( </span><br><span class="line">    <span class="keyword">PARTITION</span> <span class="keyword">BY</span> ... </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> ... </span><br><span class="line">    frame_clause </span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>分区（PARTITION BY）<ul><li>PARTITION BY 选项用于将数据行拆分成多个分区（组）它的作用类似于GROUP BY分组。如果省略了 PARTITION BY，所有的数据作为一个组进行计算</li></ul></li><li>排序（ORDER BY）<ul><li>OVER 子句中的 ORDER BY 选项用于指定<strong>分区内</strong>的排序方式，与 ORDER BY 子句的作用类似</li></ul></li><li>以及窗口大小（frame_clause）<ul><li>frame_clause 选项用于在<strong>当前分区</strong>内指定一个计算窗口，也就是一个与当前行相关的数据子集</li></ul></li></ul><h2 id="序号函数"><a class="markdownIt-Anchor" href="#序号函数"></a> 序号函数</h2><p>序号函数有三个：row_number()、rank()、dense_rank()，可以用来实现分组排序，并添加序号</p><p>这三个功能相同但排序的序号方式不同</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">row_number</span>() <span class="operator">|</span> <span class="built_in">rank</span>() <span class="operator">|</span> <span class="built_in">dense_rank</span>() <span class="keyword">over</span> ( </span><br><span class="line">  <span class="keyword">partition</span> <span class="keyword">by</span> ... </span><br><span class="line">  <span class="keyword">order</span> <span class="keyword">by</span> ... </span><br><span class="line">) </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对每个部门的员工按照薪资降序排序，并给出排名</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    dname,</span><br><span class="line">    ename,</span><br><span class="line">    salary,</span><br><span class="line">    <span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn1,</span><br><span class="line">    <span class="built_in">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn2,</span><br><span class="line">    <span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn3</span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">--求出每个部门薪资排在前三名的员工- 分组求TOPN</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">(</span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        dname,</span><br><span class="line">        ename,</span><br><span class="line">        salary,</span><br><span class="line">        <span class="built_in">dense_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>)  <span class="keyword">as</span> rn</span><br><span class="line">    <span class="keyword">from</span> employee</span><br><span class="line">)t</span><br><span class="line"><span class="keyword">where</span> t.rn <span class="operator">&lt;=</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对所有员工进行全局排序（不分组）</span></span><br><span class="line"><span class="comment">-- 不加partition by表示全局排序</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">     dname,</span><br><span class="line">     ename,</span><br><span class="line">     salary,</span><br><span class="line">     <span class="built_in">dense_rank</span>() <span class="keyword">over</span>( <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>)  <span class="keyword">as</span> rn</span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><h2 id="开窗聚合函数"><a class="markdownIt-Anchor" href="#开窗聚合函数"></a> 开窗聚合函数</h2><blockquote><p>sum()、avg()、max()、min()、count()</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    dname,</span><br><span class="line">    ename,</span><br><span class="line">    salary,</span><br><span class="line">    <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> pvl</span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果没有order by排序语句默认把分组内的所有</span></span><br><span class="line"><span class="keyword">select</span> dname,ename,hiredate,salary,</span><br><span class="line"><span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname) <span class="keyword">as</span> c1</span><br><span class="line"><span class="comment">-- sum(salary) over(partition by dname order by hiredate rows between unbounded preceding and current row) as c1</span></span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向前三行及本身及向后一行数据相加</span></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line">    dname,</span><br><span class="line">    ename,</span><br><span class="line">    salary,</span><br><span class="line">    <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate   <span class="keyword">rows</span> <span class="keyword">between</span> <span class="number">3</span> preceding <span class="keyword">and</span> <span class="number">1</span> following) <span class="keyword">as</span> c1 </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 当前行(包括本身)加到最后一行</span></span><br><span class="line"><span class="keyword">select</span>  </span><br><span class="line">    dname,</span><br><span class="line">    ename,</span><br><span class="line">    salary,</span><br><span class="line">    <span class="built_in">sum</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate   <span class="keyword">rows</span> <span class="keyword">between</span> <span class="keyword">current</span> <span class="type">row</span> <span class="keyword">and</span> unbounded following) <span class="keyword">as</span> c1 </span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><h2 id="分布函数"><a class="markdownIt-Anchor" href="#分布函数"></a> 分布函数</h2><blockquote><p>cume_dist：分组内小于、等于当前值的行数 / 分组内总行数</p><p>应用场景：查询小于等于当前薪资（salary）的比例</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    dname,ename,salary,</span><br><span class="line">    <span class="built_in">cume_dist</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> salary)<span class="keyword">as</span> rn1,</span><br><span class="line">    <span class="built_in">cume_dist</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary)<span class="keyword">as</span> rn2</span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><blockquote><p>percent_rank：(rank-1) / (rows-1)进行计算，rank为RANK()函数产生的(不常用)</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> dname,ename,salary,</span><br><span class="line">    <span class="built_in">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> rn,</span><br><span class="line">    <span class="built_in">percent_rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>)<span class="keyword">as</span> rn2</span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><h2 id="前后函数"><a class="markdownIt-Anchor" href="#前后函数"></a> 前后函数</h2><blockquote><p>cume_dist：返回位于当前行的 <code>前n行</code>(lag(expr,n)）或 <code>后n行</code>（lead(expr,n)）的expr的值</p><p>应用场景：查询前1名同学的成绩和当前同学成绩的差值</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- lag的用法</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    dname, ename, hiredate, salary,</span><br><span class="line">    <span class="built_in">lag</span>(hiredate,<span class="number">1</span>,<span class="string">&#x27;2000-01-01&#x27;</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_1_time,</span><br><span class="line">    <span class="built_in">lag</span>(hiredate,<span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_2_time </span><br><span class="line"><span class="keyword">from</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- lead的用法</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    dname, ename, hiredate, salary,</span><br><span class="line">    <span class="built_in">lead</span>(hiredate,<span class="number">1</span>,<span class="string">&#x27;2000-01-01&#x27;</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_1_time,</span><br><span class="line">    <span class="built_in">lead</span>(hiredate,<span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> last_2_time </span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure><h2 id="头尾函数"><a class="markdownIt-Anchor" href="#头尾函数"></a> 头尾函数</h2><blockquote><p>返回第一个（first_value(expr)）或最后一个（last_value(expr)）expr的值</p><p>应用场景：截止到当前，按照日期排序查询第1个入职和最后1个入职员工的薪资</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 注意,  如果不指定ORDER BY，则进行排序混乱，会出现错误的结果</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    dname, ename, hiredate, salary,</span><br><span class="line">    <span class="built_in">first_value</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> <span class="keyword">first</span>,</span><br><span class="line">    <span class="built_in">last_value</span>(salary) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span>  hiredate) <span class="keyword">as</span> <span class="keyword">last</span> </span><br><span class="line"><span class="keyword">from</span>  employee;</span><br></pre></td></tr></table></figure><h2 id="其他函数"><a class="markdownIt-Anchor" href="#其他函数"></a> 其他函数</h2><blockquote><p>nth_value(expr,n)</p><p>返回窗口中第n个expr的值。expr可以是表达式，也可以是列名</p><p>应用场景：截止到当前薪资，显示每个员工的薪资中排名第2或者第3的薪资</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 查询每个部门截止目前薪资排在第二和第三的员工信息</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    dname, ename, hiredate, salary,</span><br><span class="line">    <span class="built_in">nth_value</span>(salary,<span class="number">2</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> second_score,</span><br><span class="line">    <span class="built_in">nth_value</span>(salary,<span class="number">3</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span> hiredate) <span class="keyword">as</span> third_score</span><br><span class="line"><span class="keyword">from</span> employee</span><br></pre></td></tr></table></figure><blockquote><p>ntile(n)</p><p>将分区中的有序数据分为n个等级，记录等级数</p><p>应用场景：将每个部门员工按照入职日期分成3组</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 根据入职日期将每个部门的员工分成3组</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">    dname, ename, hiredate, salary,</span><br><span class="line">    <span class="built_in">ntile</span>(<span class="number">3</span>) <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> dname <span class="keyword">order</span> <span class="keyword">by</span>  hiredate  ) <span class="keyword">as</span> rn </span><br><span class="line"><span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0.MySQL数据准备</title>
      <link href="/2025/09/14/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/0-MySQL%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87/"/>
      <url>/2025/09/14/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/0-MySQL%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87/</url>
      
        <content type="html"><![CDATA[<p><strong>mydb2</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> mydb2;</span><br><span class="line">use mydb2;</span><br><span class="line"><span class="comment">-- 创建商品表：</span></span><br><span class="line"><span class="keyword">create table</span> product(</span><br><span class="line">    pid <span class="type">int</span> <span class="keyword">primary key</span> auto_increment, <span class="comment">-- 商品编号</span></span><br><span class="line">    pname <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span> , <span class="comment">-- 商品名字</span></span><br><span class="line">    price <span class="keyword">double</span>,  <span class="comment">-- 商品价格</span></span><br><span class="line">    category_id <span class="type">varchar</span>(<span class="number">20</span>) <span class="comment">-- 商品所属分类</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;海尔洗衣机&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;美的冰箱&#x27;</span>,<span class="number">3000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;格力空调&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;九阳电饭煲&#x27;</span>,<span class="number">200</span>,<span class="string">&#x27;c001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;啄木鸟衬衣&#x27;</span>,<span class="number">300</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;恒源祥西裤&#x27;</span>,<span class="number">800</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;花花公子夹克&#x27;</span>,<span class="number">440</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;劲霸休闲裤&#x27;</span>,<span class="number">266</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;海澜之家卫衣&#x27;</span>,<span class="number">180</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;杰克琼斯运动裤&#x27;</span>,<span class="number">430</span>,<span class="string">&#x27;c002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;兰蔻面霜&#x27;</span>,<span class="number">300</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;雅诗兰黛精华水&#x27;</span>,<span class="number">200</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;香奈儿香水&#x27;</span>,<span class="number">350</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;SK-II神仙水&#x27;</span>,<span class="number">350</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;资生堂粉底液&#x27;</span>,<span class="number">180</span>,<span class="string">&#x27;c003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;老北京方便面&#x27;</span>,<span class="number">56</span>,<span class="string">&#x27;c004&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;良品铺子海带丝&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;c004&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> product <span class="keyword">values</span>(<span class="keyword">null</span>,<span class="string">&#x27;三只松鼠坚果&#x27;</span>,<span class="number">88</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure><p><strong>mydb3</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use mydb3;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> dept3(</span><br><span class="line">  deptno <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary key</span> ,  <span class="comment">-- 部门号</span></span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">20</span>) <span class="comment">-- 部门名字</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> emp3(</span><br><span class="line">  eid <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary key</span> , <span class="comment">-- 员工编号</span></span><br><span class="line">  ename <span class="type">varchar</span>(<span class="number">20</span>), <span class="comment">-- 员工名字</span></span><br><span class="line">  age <span class="type">int</span>,  <span class="comment">-- 员工年龄</span></span><br><span class="line">  dept_id <span class="type">varchar</span>(<span class="number">20</span>)  <span class="comment">-- 员工所属部门</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给dept3表添加数据</span></span><br><span class="line"><span class="keyword">insert into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;研发部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> dept3 <span class="keyword">values</span>(<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;人事部&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 给emp表添加数据</span></span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;乔峰&#x27;</span>,<span class="number">20</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;段誉&#x27;</span>,<span class="number">21</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;虚竹&#x27;</span>,<span class="number">23</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;阿紫&#x27;</span>,<span class="number">18</span>, <span class="string">&#x27;1001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;扫地僧&#x27;</span>,<span class="number">85</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;李秋水&#x27;</span>,<span class="number">33</span>, <span class="string">&#x27;1002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;鸠摩智&#x27;</span>,<span class="number">50</span>, <span class="string">&#x27;1002&#x27;</span>); </span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;天山童姥&#x27;</span>,<span class="number">60</span>, <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;慕容博&#x27;</span>,<span class="number">58</span>, <span class="string">&#x27;1003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert into</span> emp3 <span class="keyword">values</span>(<span class="string">&#x27;10&#x27;</span>,<span class="string">&#x27;丁春秋&#x27;</span>,<span class="number">71</span>, <span class="string">&#x27;1005&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>mydb4</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create table</span> emp(</span><br><span class="line">  emp_id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment comment <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">  emp_name <span class="type">char</span>(<span class="number">20</span>) <span class="keyword">not null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">  salary <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">not null</span> <span class="keyword">default</span> <span class="number">0</span> comment <span class="string">&#x27;工资&#x27;</span>,</span><br><span class="line">  department <span class="type">char</span>(<span class="number">20</span>) <span class="keyword">not null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> comment <span class="string">&#x27;部门&#x27;</span></span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert into</span> emp(emp_name,salary,department) </span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;张晶晶&#x27;</span>,<span class="number">5000</span>,<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;王飞飞&#x27;</span>,<span class="number">5800</span>,<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;赵刚&#x27;</span>,<span class="number">6200</span>,<span class="string">&#x27;财务部&#x27;</span>),(<span class="string">&#x27;刘小贝&#x27;</span>,<span class="number">5700</span>,<span class="string">&#x27;人事部&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;王大鹏&#x27;</span>,<span class="number">6700</span>,<span class="string">&#x27;人事部&#x27;</span>),(<span class="string">&#x27;张小斐&#x27;</span>,<span class="number">5200</span>,<span class="string">&#x27;人事部&#x27;</span>),(<span class="string">&#x27;刘云云&#x27;</span>,<span class="number">7500</span>,<span class="string">&#x27;销售部&#x27;</span>),(<span class="string">&#x27;刘云鹏&#x27;</span>,<span class="number">7200</span>,<span class="string">&#x27;销售部&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;刘云鹏&#x27;</span>,<span class="number">7800</span>,<span class="string">&#x27;销售部&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>mydb6_view</strong>、<strong>mydb7_procedure</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 视图</span></span><br><span class="line"><span class="keyword">create table</span> dept(</span><br><span class="line">  deptno <span class="type">int</span> <span class="keyword">primary key</span>,</span><br><span class="line">  dname <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  loc <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert into</span> dept <span class="keyword">values</span>(<span class="number">10</span>, <span class="string">&#x27;教研部&#x27;</span>,<span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>, <span class="string">&#x27;学工部&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>),</span><br><span class="line">(<span class="number">30</span>, <span class="string">&#x27;销售部&#x27;</span>,<span class="string">&#x27;广州&#x27;</span>),</span><br><span class="line">(<span class="number">40</span>, <span class="string">&#x27;财务部&#x27;</span>,<span class="string">&#x27;武汉&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> emp(</span><br><span class="line">  empno <span class="type">int</span> <span class="keyword">primary key</span>,</span><br><span class="line">  ename <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  job <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">  mgr <span class="type">int</span>,</span><br><span class="line">  hiredate <span class="type">date</span>,</span><br><span class="line">  sal <span class="type">numeric</span>(<span class="number">8</span>,<span class="number">2</span>),</span><br><span class="line">  comm <span class="type">numeric</span>(<span class="number">8</span>, <span class="number">2</span>),</span><br><span class="line">  deptno <span class="type">int</span>,</span><br><span class="line">  <span class="comment">-- FOREIGN KEY (mgr) REFERENCES emp(empno),</span></span><br><span class="line">  <span class="keyword">FOREIGN KEY</span> (deptno) <span class="keyword">REFERENCES</span> dept(deptno) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">SET</span> <span class="keyword">NULL</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> emp <span class="keyword">values</span></span><br><span class="line">(<span class="number">1001</span>, <span class="string">&#x27;甘宁&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1013</span>, <span class="string">&#x27;2000-12-17&#x27;</span>, <span class="number">8000.00</span>, <span class="keyword">null</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1002</span>, <span class="string">&#x27;黛绮丝&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-02-20&#x27;</span>, <span class="number">16000.00</span>, <span class="number">3000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1003</span>, <span class="string">&#x27;殷天正&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-02-22&#x27;</span>, <span class="number">12500.00</span>, <span class="number">5000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1004</span>, <span class="string">&#x27;刘备&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-4-02&#x27;</span>, <span class="number">29750.00</span>, <span class="keyword">null</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1005</span>, <span class="string">&#x27;谢逊&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-9-28&#x27;</span>, <span class="number">12500.00</span>, <span class="number">14000.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1006</span>, <span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-05-01&#x27;</span>, <span class="number">28500.00</span>, <span class="keyword">null</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1007</span>, <span class="string">&#x27;张飞&#x27;</span>, <span class="string">&#x27;经理&#x27;</span>, <span class="number">1009</span>, <span class="string">&#x27;2001-09-01&#x27;</span>, <span class="number">24500.00</span>, <span class="keyword">null</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">1008</span>, <span class="string">&#x27;诸葛亮&#x27;</span>, <span class="string">&#x27;分析师&#x27;</span>, <span class="number">1004</span>, <span class="string">&#x27;2007-04-19&#x27;</span>, <span class="number">30000.00</span>, <span class="keyword">null</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1009</span>, <span class="string">&#x27;曾阿牛&#x27;</span>, <span class="string">&#x27;董事长&#x27;</span>, <span class="keyword">null</span>, <span class="string">&#x27;2001-11-17&#x27;</span>, <span class="number">50000.00</span>, <span class="keyword">null</span>, <span class="number">10</span>),</span><br><span class="line">(<span class="number">1010</span>, <span class="string">&#x27;韦一笑&#x27;</span>, <span class="string">&#x27;销售员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-09-08&#x27;</span>, <span class="number">15000.00</span>, <span class="number">0.00</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1011</span>, <span class="string">&#x27;周泰&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1008</span>, <span class="string">&#x27;2007-05-23&#x27;</span>, <span class="number">11000.00</span>, <span class="keyword">null</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1012</span>, <span class="string">&#x27;程普&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1006</span>, <span class="string">&#x27;2001-12-03&#x27;</span>, <span class="number">9500.00</span>, <span class="keyword">null</span>, <span class="number">30</span>),</span><br><span class="line">(<span class="number">1013</span>, <span class="string">&#x27;庞统&#x27;</span>, <span class="string">&#x27;分析师&#x27;</span>, <span class="number">1004</span>, <span class="string">&#x27;2001-12-03&#x27;</span>, <span class="number">30000.00</span>, <span class="keyword">null</span>, <span class="number">20</span>),</span><br><span class="line">(<span class="number">1014</span>, <span class="string">&#x27;黄盖&#x27;</span>, <span class="string">&#x27;文员&#x27;</span>, <span class="number">1007</span>, <span class="string">&#x27;2002-01-23&#x27;</span>, <span class="number">13000.00</span>, <span class="keyword">null</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create table</span> salgrade(</span><br><span class="line">  grade <span class="type">int</span> <span class="keyword">primary key</span>,</span><br><span class="line">  losal <span class="type">int</span>,</span><br><span class="line">  hisal <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert into</span> salgrade <span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">7000</span>, <span class="number">12000</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="number">12010</span>, <span class="number">14000</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="number">14010</span>, <span class="number">20000</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="number">20010</span>, <span class="number">30000</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="number">30010</span>, <span class="number">99990</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8.导航、页面路由</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/8.%E5%AF%BC%E8%88%AA%E3%80%81%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/8.%E5%AF%BC%E8%88%AA%E3%80%81%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1/</url>
      
        <content type="html"><![CDATA[<h1 id="组件导航路由-文档中心"><a class="markdownIt-Anchor" href="#组件导航路由-文档中心"></a> 组件导航路由 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-navigation-navigation">文档中心</a></h1><img src="https://s2.loli.net/2025/12/31/zSR5exhjdP2XUJ4.png" alt="路由导航路线图" style="zoom:50%;" /><img src="https://s2.loli.net/2025/12/31/D8UeWBXI2chal1s.png" alt="页面生命周期" style="zoom:50%;" /><ul><li><strong>aboutToAppear</strong>：在创建自定义组件后，执行其build()函数之前执行（NavDestination创建之前），允许在该方法中改变状态变量，更改将在后续执行build()函数中生效</li><li><strong>onWillAppear</strong>：NavDestination创建后，挂载到组件树之前执行，在该方法中更改状态变量会在当前帧显示生效</li><li><strong>onAppear</strong>：通用生命周期事件，NavDestination组件挂载到组件树时执行</li><li><strong>onWillShow</strong>：NavDestination组件布局显示之前执行，此时页面不可见（应用切换到前台不会触发）</li><li><strong>onShown</strong>：NavDestination组件布局显示之后执行，此时页面已完成布局</li><li><strong>onActive</strong>: NavDestination处于激活态（处于栈顶可操作，且上层无特殊组件遮挡）触发</li><li><strong>onWillHide</strong>：NavDestination组件触发隐藏之前执行（应用切换到后台不会触发）</li><li><strong>onInactive</strong>: NavDestination组件处于非激活态（处于非栈顶不可操作，或处于栈顶时上层有特殊组件遮挡）触发</li><li><strong>onHidden</strong>：NavDestination组件触发隐藏后执行（非栈顶页面push进栈，栈顶页面pop出栈或应用切换到后台）</li><li><strong>onWillDisappear</strong>：NavDestination组件即将销毁之前执行，如果有转场动画，会在动画前触发（栈顶页面pop出栈）</li><li><strong>onDisappear</strong>：通用生命周期事件，NavDestination组件从组件树上卸载销毁时执行</li><li><strong>aboutToDisappear</strong>：自定义组件析构销毁之前执行，不允许在该方法中改变状态变量</li></ul><p>注意<strong>toolbarConfiguration</strong> 和 <strong>menus</strong> 的图标注意路径：<code>'icon': &quot;resources/base/media/ic_public_highlights.svg&quot;</code>或<code>./image/ic_public_highlights.svg</code>，涉及到 icon 图图标类的路径都需要这么写</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">对象名: NavPathStack = new NavPathStack()</span><br><span class="line">Navigation(this.对象名)&#123;</span><br><span class="line">  //内容....</span><br><span class="line">&#125;</span><br><span class="line">//.size(&#123;width: &#x27;数字%&#x27;, height: &#x27;数字%&#x27;&#125;)</span><br><span class="line">.size(&#123;width: 数字, height: 数字&#125;)</span><br><span class="line">.title(&#x27;标题栏文字&#x27;)</span><br><span class="line">.titleMode(NavigationTitleMode.枚举值)//设置标题模式</span><br><span class="line">.subTitle(&quot;副标题文字&quot;)</span><br><span class="line">.backButtonIcon(图片格式)//设置返回图标</span><br><span class="line">.hideTitleBar(true)//隐藏标签栏，false：不隐藏</span><br><span class="line">.hideToolBar(false)//隐藏工具栏</span><br><span class="line">.hideBackButton(true)//隐藏返回按钮</span><br><span class="line">.mode(NavigationMode.Stack) //强制让 Navigation单栏布局</span><br><span class="line">.toolbarConfiguration([&#123;//底部工具栏</span><br><span class="line">  value: &quot;Save&quot;,</span><br><span class="line">  &#x27;icon&#x27;: &quot;resources/base/media/ic_public_highlights.svg&quot;,</span><br><span class="line">  action: () =&gt; console.log(&quot;Saved!&quot;)//点击事件</span><br><span class="line">&#125;])</span><br><span class="line">// 竖屏最多支持显示3个图标，多余的图标会被放入自动生成的更多图标</span><br><span class="line">.menus([//标题栏右上角的菜单项</span><br><span class="line">  &#123;</span><br><span class="line">    value: &quot;搜索&quot;,</span><br><span class="line">    icon: &quot;resources/base/media/ic_public_highlights.svg&quot;,</span><br><span class="line">    action: () =&gt; &#123;//点击事件</span><br><span class="line">      console.log(&quot;搜索&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>在<code>**src/main/resources/base/profile**</code>创建 <strong>route_map.json</strong> 编写</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;routerMap&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;页面标识&quot;,//子页面唯一标识</span><br><span class="line">      &quot;pageSourceFile&quot;: &quot;src/main/ets/pages/ziyemian/PageOne.ets&quot;,//子页面路径</span><br><span class="line">      &quot;buildFunction&quot;: &quot;函数名&quot;,//子页面入口函数，必须以@Builder修饰</span><br><span class="line">      &quot;data&quot;: &#123;//描述、权限等扩展信息</span><br><span class="line">          &quot;description&quot;: &quot;this is pageOne&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在<code>module.json5</code>添加路由：<img src="https://s2.loli.net/2025/12/31/asUzpciVLxB3JNt.png" style="zoom:50%;" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;routerMap&quot;: &quot;$profile:route_map&quot;,  //添加路由</span><br></pre></td></tr></table></figure><p>数据传递：通过页面标识传递的，所以不局限于一传二，二传三页面，可以在任意子页面接收到数据</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//传递单个字符</span><br><span class="line">MKNavPathStack.pushPathByName(&#x27;子页面标识&#x27;, 传入的字符变量名);</span><br><span class="line">NavDestination() &#123;</span><br><span class="line">&#125;</span><br><span class="line">.onReady((context: NavDestinationContext) =&gt; &#123;</span><br><span class="line">  const pathStack = context.pathStack</span><br><span class="line">  const deviceIdList = pathStack.getParamByName(&#x27;子页面标识&#x27;) as string[]</span><br><span class="line">  if (deviceIdList &amp;&amp; deviceIdList.length &gt; 0) &#123;</span><br><span class="line">    const deviceId = deviceIdList[deviceIdList.length - 1]</span><br><span class="line">    this.mqtt_info.serverID = deviceId</span><br><span class="line">    console.log(&quot;收到 deviceId: &quot; + deviceId)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//传递多个</span><br><span class="line">export interface DHTInfoParams &#123;</span><br><span class="line">  deviceId: string;</span><br><span class="line">  deviceName: string;</span><br><span class="line">  linkMode: string;</span><br><span class="line">  linkstatus: string;</span><br><span class="line">  icon: Resource;</span><br><span class="line">&#125;</span><br><span class="line">const params: DHTInfoParams = &#123;</span><br><span class="line">  deviceId: item.deviceViewId,</span><br><span class="line">  deviceName: item.deviceName,</span><br><span class="line">  linkstatus: item.linkstatus,</span><br><span class="line">  icon: getIconByType(item.deviceType),</span><br><span class="line">  linkMode: item.pipeline,</span><br><span class="line">&#125;;</span><br><span class="line">MKNavPathStack.pushPathByName(&#x27;子页面标识&#x27;, params)</span><br><span class="line">NavDestination() &#123;</span><br><span class="line">&#125;</span><br><span class="line">.onReady((context: NavDestinationContext) =&gt; &#123; //获取主页面传递的参数</span><br><span class="line">  const pathStack = context.pathStack</span><br><span class="line">  const paramsArray = pathStack.getParamByName(&#x27;子页面标识&#x27;) as DHTInfoParams[]</span><br><span class="line">  if (paramsArray &amp;&amp; paramsArray.length &gt; 0) &#123;</span><br><span class="line">    const param = paramsArray[paramsArray.length - 1] // 取栈顶的那个</span><br><span class="line">    this.params.deviceId = param.deviceId</span><br><span class="line">    this.params.deviceName = param.deviceName</span><br><span class="line">    this.params.icon = param.icon</span><br><span class="line">    this.params.linkMode = param.linkMode</span><br><span class="line">    this.params.linkstatus = param.linkstatus</span><br><span class="line">    console.log(&quot;收到参数: &quot; + JSON.stringify(this.params))</span><br><span class="line">    this.loadMQTTInfoFromDB()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>数据回传</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MKNavPathStack.pushPathByName(&#x27;MQTTInfoView&#x27;, this.params.deviceId, (info: PopInfo) =&gt; &#123;</span><br><span class="line">  this.mqtt_id = info.result.toString()</span><br><span class="line">  console.log(&#x27;回传MQTT的ID：&#x27;, this.mqtt_id)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">MKNavPathStack.pop(res.data.data.id);</span><br></pre></td></tr></table></figure><p>跳转</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.对象名.pushPath(&#123;name: &#x27;子页面标识&#x27;&#125;)</span><br><span class="line">this.对象名.pushPathByName(&#x27;子页面标识&#x27;, null)</span><br></pre></td></tr></table></figure><p>返回回调（物理&amp;按钮）</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">NavDestination() &#123;</span><br><span class="line">&#125;</span><br><span class="line">.onBackPressed(()=&gt;&#123;</span><br><span class="line">  promptAction.openToast(&#123;message:&quot;返回了&quot;&#125;)</span><br><span class="line">  return true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>替换，不能返回上一页</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.对象名.replacePath(&#123;&#x27;子页面标识&#x27;&#125;)</span><br><span class="line">this.对象名.replacePathByName(&#x27;子页面标识&#x27;, null)</span><br></pre></td></tr></table></figure><p>页面返回</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 返回到上一页</span><br><span class="line">this.对象名.pop()</span><br><span class="line">// 返回到上一个PageOne页面</span><br><span class="line">this.对象名.popToName(&quot;子页面标识&quot;)</span><br><span class="line">// 返回到索引为1的页面</span><br><span class="line">this.对象名.popToIndex(1)</span><br><span class="line">// 返回到根首页（清除栈中所有页面）</span><br><span class="line">this.对象名.clear()</span><br></pre></td></tr></table></figure><p>页面删除</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 删除栈中name为PageOne的所有页面</span><br><span class="line">this.对象名.removeByName(&quot;子页面标识&quot;)</span><br><span class="line">// 删除指定索引的页面</span><br><span class="line">this.对象名.removeByIndexes([1,3,5])</span><br><span class="line">// 删除指定id的页面</span><br><span class="line">this.对象名.removeByNavDestinationId(&quot;1&quot;);</span><br></pre></td></tr></table></figure><p>跳转的页面，因为跳转的页面入口必须是 Builder 修饰的全局函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Builder</span><br><span class="line">export function 函数名() &#123;//这里的函数名必须和route_map.json中的buildFunction一致</span><br><span class="line">    跳转页面入口函数</span><br><span class="line">&#125;</span><br><span class="line">NavDestination() &#123;&#125;//页面展示必须在这个包裹里面才可以展示</span><br></pre></td></tr></table></figure><h2 id="路由拦截"><a class="markdownIt-Anchor" href="#路由拦截"></a> 路由拦截</h2><h1 id="老路由不推荐文档中心"><a class="markdownIt-Anchor" href="#老路由不推荐文档中心"></a> 老路由(不推荐)<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-routing">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct NavigationAPI9 &#123;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Navigation() &#123;</span><br><span class="line">      //router具备跳转能力</span><br><span class="line">      NavRouter() &#123;</span><br><span class="line">        //跳转组件 - 只能放置一个组件------------------------------1</span><br><span class="line">        // 第二个会覆盖第一个</span><br><span class="line">        Button(&#x27;跳转A&#x27;)</span><br><span class="line">        Button(&#x27;跳转B&#x27;)</span><br><span class="line">        //要跳转的界面-------------------------------------------2</span><br><span class="line">        NavDestination() &#123;</span><br><span class="line">          NavRouter() &#123;</span><br><span class="line">            //     第一个组件就是点击进行跳转的</span><br><span class="line">            Image($r(&#x27;app.media.b&#x27;))</span><br><span class="line">              .width(100)</span><br><span class="line">            NavDestination()&#123;</span><br><span class="line">              Text(&#x27;第三个页面&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="三层架构三层架构文档中心"><a class="markdownIt-Anchor" href="#三层架构三层架构文档中心"></a> 三层架构<a href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_Next-BasicArchitectureDesignPart2">三层架构</a><a href="https://developer.huawei.com/consumer/cn/doc/best-practices-V5/bpta-layered-architecture-design-V5">文档中心</a></h1><img src="https://s2.loli.net/2025/12/31/WjwzCqASyM1QnZc.png" style="zoom:50%;" /><p>commons（公共能力层）：提供整个应用共享的基础组件、工具类、公共配置等，如公共UI组件、数据管理、网络请求封装等，通常编译为HAR包或HSP包</p><p>features（基础特性层）：实现应用的各个功能模块，每个模块相对独立，可单独开发和测试。通常编译为HAR包、HSP包或Feature类型的HAP包</p><p>products（产品定制层）：针对不同设备形态（如手机、平板等）进行功能和特性集成，是应用的主入口，通常编译为Entry类型的HAP包</p><p><a href="https://www.yuque.com/attachments/yuque/0/2025/zip/51403960/1747472864086-3b681d04-c5eb-4192-b965-8da217db202a.zip">三层架构示例代码.zip</a></p><p>寻找包名：<code>\project01\AppScope\app.json5</code>中的 <strong>bundleName</strong></p><ol><li>在工程目录下，创建三个文件夹commons、features、products <img src="https://s2.loli.net/2025/12/31/UkVj1mbyBezlxNF.png" style="zoom: 67%;" /></li><li>实现首页、课程学习、知识地图这三个功能页面，创建feature模块 quickstart、map、learning，选择<strong>Shared Library</strong></li><li>创建commons层模块，创建两个模块utils和uicomponents，选择<strong>Static Library</strong></li></ol><p>具体使用<strong>Static Library</strong> 还是 **Shared Library **还需要根据实际情况 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-package-structure-stage-V5#%E9%80%89%E6%8B%A9%E5%90%88%E9%80%82%E7%9A%84%E5%8C%85%E7%B1%BB%E5%9E%8B">文档中心</a></p><table><thead><tr><th style="text-align:center"><strong>Module类型</strong></th><th style="text-align:center"><strong>包类型</strong></th><th style="text-align:left"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center">Ability</td><td style="text-align:center"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/hap-package-V5">HAP</a></td><td style="text-align:left">应用的功能模块，可以独立安装和运行，必须包含一个entry类型的HAP，可选包含一个或多个feature类型的HAP。</td></tr><tr><td style="text-align:center">Static Library</td><td style="text-align:center"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/har-package-V5">HAR</a></td><td style="text-align:left">静态共享包，编译态复用。<br/>- 支持应用内共享，也可以发布后供其他应用使用。<br/>- 作为二方库，发布到<a href="https://ohpm.openharmony.cn/">OHPM</a>私仓，供公司内部其他应用使用。<br/>- 作为三方库，发布到<a href="https://ohpm.openharmony.cn/">OHPM</a>中心仓，供其他应用使用。<br/>- 多包（HAP/HSP）引用相同的HAR时，会造成多包间代码和资源的重复拷贝，从而导致应用包膨大。<br/>- 注意：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/har-package-V5#%E7%BC%96%E8%AF%91">编译HAR</a>时，建议开启混淆能力，保护代码资产。</td></tr><tr><td style="text-align:center">Shared Library</td><td style="text-align:center"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/in-app-hsp-V5">HSP</a></td><td style="text-align:left">动态共享包，运行时复用。<br/>- 当前仅支持应用内共享。<br/>- 当多包（HAP/HSP）同时引用同一个共享包时，采用HSP替代HAR，可以避免HAR造成的多包间代码和资源的重复拷贝，从而减小应用包大小。</td></tr></tbody></table><p>模块导出，无论是 **Static Library **或 **Shared Library **都是同样的，引用 HSP 资源： <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/resource-categories-and-access-V5#%E8%B7%A8haphsp%E5%8C%85%E5%BA%94%E7%94%A8%E8%B5%84%E6%BA%90">文档中心</a>，HAR 不需要引用因为是复制包，直接使用即可</p><p>对应的页面需要导出</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">export struct SingSongPage &#123;</span><br><span class="line">  @State message: string = &#x27;SingSongPage&#x27;;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(this.message)</span><br><span class="line">          .fontSize($r(&#x27;app.float.page_text_font_size&#x27;))</span><br><span class="line">          .fontWeight(FontWeight.Bold)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            this.message = &#x27;Welcome&#x27;;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当前的文件夹新建 index.ets，导出对应模块文件  <img src="https://s2.loli.net/2025/12/31/Os6fyC7pVnqgetX.png" style="zoom:67%;" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export *from &#x27;./SingSongPage&#x27;</span><br></pre></td></tr></table></figure><p>然后在 features 或 common 根目录下有个 Index.ets 中也需要导出 <img src="https://s2.loli.net/2025/12/31/13rGnZpyu72Hhxc.png" style="zoom:67%;" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export &#123; add &#125; from &#x27;./src/main/ets/utils/Calc&#x27;;</span><br><span class="line">export * from &#x27;./src/main/ets/pages&#x27;</span><br></pre></td></tr></table></figure><p>导入之后在入口 products 还需要导入，<img src="https://s2.loli.net/2025/12/31/mFSLQd8ZBtV6ibY.png" style="zoom:67%;" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">  &quot;singsong&quot;: &quot;file:../../features/SingSong&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在products 中使用 router 跳转模块不能使用常规的路径跳转</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">router.pushUrl(&#123;</span><br><span class="line">  //@bundle:包名/模块名/路径</span><br><span class="line">  url:&#x27;@bundle:com.xinzai.myapplication/SingSong/ets/pages/SingSongPage&#x27;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>使用 navigation 跳转</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct NavigationPage &#123;</span><br><span class="line">  navPathStack:NavPathStack =new NavPathStack()</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Navigation(this.navPathStack)&#123;</span><br><span class="line">      Button(&#x27;跳转&#x27;)</span><br><span class="line">        .onClick(()=&gt;&#123;</span><br><span class="line">          this.navPathStack.pushPath(&#123;name: &#x27;singsong&#x27; &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.height(&#x27;100%&#x27;).width(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>src/main/ets/pages/builders/HspBuilder.ets</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; SingSongPage &#125; from &#x27;singsong&#x27;</span><br><span class="line"></span><br><span class="line">@Builder</span><br><span class="line">function HspBuilder()&#123;</span><br><span class="line">  NavDestination()&#123;</span><br><span class="line">    SingSongPage()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>src/main/resources/base/profile/route_map.json</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;routerMap&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;singsong&quot;,</span><br><span class="line">      &quot;pageSourceFile&quot;: &quot;src/main/ets/pages/builders/HspBuilder.ets&quot;,</span><br><span class="line">      &quot;buildFunction&quot;: &quot;HspBuilder&quot;,</span><br><span class="line">      &quot;data&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;this is pageOne&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="封装工具"><a class="markdownIt-Anchor" href="#封装工具"></a> 封装工具</h1><p><a href="https://www.yuque.com/attachments/yuque/0/2025/zip/51403960/1748998894539-46fe201d-c3f6-430b-9a1b-dc0d80de7e17.zip">API封装工具.zip</a></p><p><a href="https://www.yuque.com/attachments/yuque/0/2025/zip/51403960/1748998900807-53f00cec-d85f-4f49-8a35-c21b27b10b8b.zip">数据库操作封装.zip</a></p><p><a href="https://www.yuque.com/attachments/yuque/0/2025/zip/51403960/1748998909302-473251da-c579-4e28-9955-3a84c5997447.zip">首选项工具封装.zip</a></p><p><a href="https://www.yuque.com/attachments/yuque/0/2025/zip/51403960/1748998924720-57110878-6763-4231-8ae6-8bd2f22a813d.zip">MQTT工具封装.zip</a></p><p><a href="https://www.yuque.com/attachments/yuque/0/2025/zip/51403960/1748998930373-2c1a6418-c3de-482e-90e7-a15520278a26.zip">加载弹窗动画封装.zip</a></p>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.数据请求</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/7-%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/7-%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<h1 id="httpaxios-网络请求文档中心"><a class="markdownIt-Anchor" href="#httpaxios-网络请求文档中心"></a> Http/Axios 网络请求<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/http-request">文档中心</a></h1><h2 id="http"><a class="markdownIt-Anchor" href="#http"></a> Http</h2><p>返回字符串<br />免费测试接口地址：</p><ul><li><a href="https://jsonplaceholder.typicode.com/todos/1">https://jsonplaceholder.typicode.com/todos/1</a></li><li><a href="https://jsonplaceholder.typicode.com">https://jsonplaceholder.typicode.com</a></li><li><a href="https://httpbin.org">https://httpbin.org</a></li><li><a href="https://apis.juhe.cn">https://apis.juhe.cn</a></li></ul><p>:::</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@State result_use: string = &#x27;&#x27;</span><br><span class="line">async sendHttp() &#123;</span><br><span class="line">  //发请求的实例</span><br><span class="line">  const req = http.createHttp()</span><br><span class="line">  //通过实例发请求</span><br><span class="line">  const res = await req.request(&quot;https://httpbin.org&quot;)</span><br><span class="line">  //使用结果</span><br><span class="line">  this.result_use = res.result as string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Button(&#x27;发起Http请求&#x27;)</span><br><span class="line">  .onClick(() =&gt; &#123;</span><br><span class="line">    this.sendHttp()</span><br><span class="line">  &#125;)</span><br><span class="line">Scroll() &#123;</span><br><span class="line">  Text(&#x27;http请求结果：&#x27; + this.result_use)</span><br><span class="line">&#125;.height(&#x27;40%&#x27;)</span><br></pre></td></tr></table></figure><h2 id="axiosaxios库"><a class="markdownIt-Anchor" href="#axiosaxios库"></a> Axios<a href="https://ohpm.openharmony.cn/#/cn/detail/@ohos%2Faxios">Axios库</a></h2><p>返回：包装了一层的对象，更适合项目</p><p>使用时需要安装第三方库，需要指令安装，若在功能目录则全局安装，如果在 entry 模块夏安装则是局部安装</p><p>包存放在：<code>oh-package.json5</code>中</p><p><a href="https://ohpm.openharmony.cn/#/cn/home">OpenHarmony三方库中心仓</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@State axiosResult_use: string = &#x27;&#x27;</span><br><span class="line">async sendAxios() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const res =</span><br><span class="line">      await axios.get&lt;object, AxiosResponse&lt;object, null&gt;&gt;(&quot;https://apis.juhe.cn&quot;)</span><br><span class="line">    this.axiosResult_use = JSON.stringify(res.data)</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.error(JSON.stringify(error));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Scroll() &#123;</span><br><span class="line">  Text(&#x27;axios请求结果：&#x27; + this.axiosResult_use)</span><br><span class="line">&#125;.height(300)</span><br><span class="line">Button(&#x27;发起Axios请求&#x27;)</span><br><span class="line">  .onClick(() =&gt; &#123;</span><br><span class="line">    this.sendAxios()</span><br><span class="line">    promptAction.showToast(&#123; message: this.axiosResult_use &#125;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h2 id="rcp文档中心"><a class="markdownIt-Anchor" href="#rcp文档中心"></a> rcp<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/remote-communication-rcp">文档中心</a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.存储、权限</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/6-%E5%AD%98%E5%82%A8%E3%80%81%E6%9D%83%E9%99%90/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/6-%E5%AD%98%E5%82%A8%E3%80%81%E6%9D%83%E9%99%90/</url>
      
        <content type="html"><![CDATA[<h1 id="页面级ui状态存储文档中心"><a class="markdownIt-Anchor" href="#页面级ui状态存储文档中心"></a> 页面级UI状态存储<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-localstorage">文档中心</a></h1><p>通过@Entry装饰器接收的参数可以在页面内共享同一个<strong>LocalStorage</strong>实例。LocalStorage支持UIAbility实例内多个页面间状态共享</p><p>页面内数据共享</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const data: Record&lt;string, string&gt; = &#123;</span><br><span class="line">  &#x27;uname&#x27;: &#x27;张三&#x27;,</span><br><span class="line">  &#x27;age&#x27;: &#x27;18&#x27;</span><br><span class="line">&#125;</span><br><span class="line">const storage = new LocalStorage(data)</span><br><span class="line">@Entry(storage)</span><br><span class="line">@Component</span><br><span class="line">struct LocalStorageCase &#123;</span><br><span class="line">  @LocalStorageLink(&#x27;uname&#x27;)</span><br><span class="line">  message: string = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column(&#123; space: 20 &#125;) &#123;</span><br><span class="line">      Text(this.message)</span><br><span class="line">      Text(&#x27;------------------------------&#x27;)</span><br><span class="line">      StorageChild01()</span><br><span class="line">      Button(&#x27;改变-父&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.message = &#x27;法外狂徒&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.height(&#x27;100%&#x27;).width(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">struct StorageChild01 &#123;</span><br><span class="line">  @LocalStorageLink(&#x27;uname&#x27;)</span><br><span class="line">  message: string = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column(&#123; space: 20 &#125;) &#123;</span><br><span class="line">      Text(this.message)</span><br><span class="line">      Button(&#x27;改变-子&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.message = &#x27;法外狂徒1&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>传递给指定页面</p><p>EntryAbility.ets 已经有了直接添加代码即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">onWindowStageCreate(windowStage: window.WindowStage): void &#123;</span><br><span class="line">  hilog.info(DOMAIN, &#x27;testTag&#x27;, &#x27;%&#123;public&#125;s&#x27;, &#x27;Ability onWindowStageCreate&#x27;);</span><br><span class="line">  const data: Record&lt;string, string&gt; = &#123;</span><br><span class="line">    &#x27;uname&#x27;: &#x27;张三&#x27;,</span><br><span class="line">    &#x27;age&#x27;: &#x27;18&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  const storage = new LocalStorage(data)</span><br><span class="line">  //只要是当前windowStage内的页面，都可以共享这份数据</span><br><span class="line">  windowStage.loadContent(&#x27;pages/02/LocalStorageCase01&#x27;, storage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const storage = LocalStorage.getShared()</span><br><span class="line">@Entry(storage)</span><br><span class="line">@Component</span><br><span class="line">struct LocalStorageCase &#123;</span><br><span class="line">  @LocalStorageLink(&#x27;uname&#x27;)</span><br><span class="line">  message: string = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column(&#123; space: 20 &#125;) &#123;</span><br><span class="line">      Text(this.message)</span><br><span class="line">      Text(&#x27;------------------------------&#x27;)</span><br><span class="line">      Button(&#x27;改变-父&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.message = &#x27;法外狂徒&#x27;</span><br><span class="line">        &#125;)</span><br><span class="line">      Button(&#x27;跳转-父&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          router.pushUrl(&#123; url: &#x27;pages/02/LocalStorageCase02&#x27; &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.height(&#x27;100%&#x27;).width(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const storage = LocalStorage.getShared()</span><br><span class="line"></span><br><span class="line">@Entry(storage)</span><br><span class="line">@Component</span><br><span class="line">struct LocalStorageCase02 &#123;</span><br><span class="line">  @LocalStorageLink(&#x27;uname&#x27;)</span><br><span class="line">  message: string = &#x27;&#x27;;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column(&#123; space: 20 &#125;) &#123;</span><br><span class="line">      Text(this.message)</span><br><span class="line">      Button(&#x27;改变-02页面&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.message = &#x27;老实巴交&#x27;;</span><br><span class="line">        &#125;)</span><br><span class="line">      Button(&#x27;返回01&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          router.back();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.height(&#x27;100%&#x27;).width(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="应用全局的ui状态存储文档中心"><a class="markdownIt-Anchor" href="#应用全局的ui状态存储文档中心"></a> 应用全局的UI状态存储<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-appstorage">文档中心</a></h1><p>取出的结果是否有UI更新的需求－UI修饰符</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 页面1，当这里变为false则页面2变为false</span><br><span class="line">AppStorage.setOrCreate(&#x27;isLoggedIn&#x27;, false);</span><br><span class="line"></span><br><span class="line">// 页面2</span><br><span class="line">@StorageLink(&#x27;isLoggedIn&#x27;) isLoggedIn: boolean = true;</span><br></pre></td></tr></table></figure><h1 id="持久化存储ui状态文档中心"><a class="markdownIt-Anchor" href="#持久化存储ui状态文档中心"></a> 持久化存储UI状态<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-persiststorage">文档中心</a></h1><p>持久化存储选定的AppStorage属性，持久化和读回UI的能力都需要依赖AppStorage</p><p>持久化变量最好是小于2kb的数据，如果开发者需要存储大量的数据，建议使用数据库api</p><p>查看：/data/app/el2/100/base/com.xinzai.myapplication/haps/entry/files/persistent_storage</p><img src="https://s2.loli.net/2025/12/31/M2IrSpZjBEm16AX.png" alt="这里寻找" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//只能在UI界面声明，否则无法持久化</span><br><span class="line">AppStorage.setOrCreate(&#x27;isLoggedIn&#x27;, true);//需要设置的时候持久化</span><br><span class="line">PersistentStorage.persistProp(&#x27;名字&#x27;, 初始值);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PersistentStorage.persistProp(&#x27;userInfo&#x27;, &#x27;xinzai&#x27;)//定义</span><br><span class="line"></span><br><span class="line">AppStorage.setOrCreate(&#x27;userInfo&#x27;, &#x27;test&#x27;) //存：如果没有setOrCreate，更新set</span><br><span class="line">AppStorage.get(&#x27;userInfo&#x27;)</span><br></pre></td></tr></table></figure><h1 id="首选项数据持久化文档中心"><a class="markdownIt-Anchor" href="#首选项数据持久化文档中心"></a> 首选项数据持久化<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences">文档中心</a></h1><p>首选项</p><ul><li>每一个key的value的长度最大为8kb</li><li>创建首选项-仓库的概念-应用可以有N个仓库，一个仓库中可以有N个key</li></ul><p><strong>封装的首选项类</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; preferences &#125; from &#x27;@kit.ArkData&#x27;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 偏好设置管理类，封装对本地持久化存储（preferences）的增删改查操作</span><br><span class="line"> * 使用示例：</span><br><span class="line"> * const prefs = new PreferenceManager(store, &quot;user_settings&quot;);</span><br><span class="line"> * await prefs.setValue(&quot;token&quot;, &quot;abc123&quot;);</span><br><span class="line"> */</span><br><span class="line">export class PreferenceManager &#123;</span><br><span class="line">  private store: preferences.Preferences; // 实际的存储实例</span><br><span class="line">  private name: string; // 存储仓库名称（用于删除整个仓库时识别）</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 构造函数</span><br><span class="line">   * @param store 已初始化的 preferences 存储实例</span><br><span class="line">   * @param name 当前存储仓库名称（需唯一）</span><br><span class="line">   */</span><br><span class="line">  constructor(store: preferences.Preferences, name: string) &#123;</span><br><span class="line">    this.store = store;</span><br><span class="line">    this.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 存储键值对（同步写入内存 + 异步刷盘）</span><br><span class="line">   * @param key 键名</span><br><span class="line">   * @param value 值（字符串类型）</span><br><span class="line">   * @returns Promise&lt;void&gt; 刷盘完成后 resolve</span><br><span class="line">   */</span><br><span class="line">  async setValue(key: string, value: string): Promise&lt;void&gt; &#123;</span><br><span class="line">    this.store.putSync(key, value); // 同步写入内存</span><br><span class="line">    await this.store.flush(); // 异步持久化到磁盘</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 读取键对应的值</span><br><span class="line">   * @param key 键名</span><br><span class="line">   * @param defaultValue 可选默认值（未找到时返回）</span><br><span class="line">   * @returns 存储的值或默认值（字符串）</span><br><span class="line">   */</span><br><span class="line">  getValue(key: string, defaultValue: string = &quot;&quot;): string &#123;</span><br><span class="line">    return this.store.getSync(key, defaultValue) as string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 删除指定键值对（同步删除 + 异步刷盘）</span><br><span class="line">   * @param key 键名</span><br><span class="line">   * @returns Promise&lt;void&gt; 刷盘完成后 resolve</span><br><span class="line">   */</span><br><span class="line">  async deleteValue(key: string): Promise&lt;void&gt; &#123;</span><br><span class="line">    this.store.deleteSync(key); // 同步删除</span><br><span class="line">    await this.store.flush(); // 异步持久化</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 删除整个存储仓库（危险操作！）</span><br><span class="line">   * @returns Promise&lt;void&gt; 删除完成后 resolve</span><br><span class="line">   */</span><br><span class="line">  async deleteStorage(): Promise&lt;void&gt; &#123;</span><br><span class="line">    await preferences.deletePreferences(null, &#123; name: this.name &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * PreferenceManager 的工厂类（单例模式），用于集中管理多个存储仓库</span><br><span class="line"> * 使用示例：</span><br><span class="line"> * PreferenceManagerFactory.getInstance().init(context);</span><br><span class="line"> * const prefs = factory.getPreference(&quot;app_config&quot;);</span><br><span class="line"> */</span><br><span class="line">export class PreferenceManagerFactory &#123;</span><br><span class="line">  private static instance: PreferenceManagerFactory; // 单例实例</span><br><span class="line">  private context: Context | null = null; // 应用上下文（必须初始化）</span><br><span class="line">  private stores: Map&lt;string, PreferenceManager&gt; = new Map(); // 存储多个仓库实例</span><br><span class="line"></span><br><span class="line">  private constructor() &#123;&#125; // 禁止外部 new 实例</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 获取工厂单例</span><br><span class="line">   * @returns 全局唯一的 PreferenceManagerFactory 实例</span><br><span class="line">   */</span><br><span class="line">  public static getInstance(): PreferenceManagerFactory &#123;</span><br><span class="line">    if (!PreferenceManagerFactory.instance) &#123;</span><br><span class="line">      PreferenceManagerFactory.instance = new PreferenceManagerFactory();</span><br><span class="line">    &#125;</span><br><span class="line">    return PreferenceManagerFactory.instance;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 初始化工厂（必须在获取实例前调用）</span><br><span class="line">   * @param context 应用上下文</span><br><span class="line">   */</span><br><span class="line">  public init(context: Context): void &#123;</span><br><span class="line">    this.context = context;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 获取指定名称的存储管理器（如果不存在则创建）</span><br><span class="line">   * @param name 存储仓库名称</span><br><span class="line">   * @throws 未初始化 context 时抛出错误</span><br><span class="line">   * @returns PreferenceManager 实例</span><br><span class="line">   */</span><br><span class="line">  public getPreference(name: string): PreferenceManager &#123;</span><br><span class="line">    if (!this.context) &#123;</span><br><span class="line">      throw new Error(&quot;PreferenceManagerFactory not initialized. Call init(context) first.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 缓存检查：避免重复创建同名仓库</span><br><span class="line">    if (!this.stores.has(name)) &#123;</span><br><span class="line">      const store = preferences.getPreferencesSync(this.context, &#123; name &#125;);</span><br><span class="line">      this.stores.set(name, new PreferenceManager(store, name));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return this.stores.get(name)!; // 非空断言（因为必定存在）</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>获取上下文 context</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ✅ 初始化首选项</span><br><span class="line">PreferenceManagerFactory.getInstance().init(this.context)</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const userPref = PreferenceManagerFactory.getInstance().getPreference(&#x27;userInfo&#x27;)</span><br><span class="line">await userPref.setValue(&#x27;userid&#x27;, res.data.data.id)//设置值</span><br><span class="line">userPref.getValue(&#x27;token&#x27;)//获取</span><br></pre></td></tr></table></figure><h1 id="关系型数据库数据持久化"><a class="markdownIt-Anchor" href="#关系型数据库数据持久化"></a> 关系型数据库数据持久化</h1><p>封装工具类，注意每次都需要调用创建数据库</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line">import &#123; relationalStore &#125; from &#x27;@kit.ArkData&#x27;;</span><br><span class="line"></span><br><span class="line">type DBRow = Record&lt;string, string | number | null&gt;;</span><br><span class="line"></span><br><span class="line">// ArkTS 中避免联合类型，使用明确类型</span><br><span class="line">type QueryOperator =</span><br><span class="line">  | &#x27;equalTo&#x27; // 等于，常用于精确匹配，例如 NAME = &#x27;张三&#x27;</span><br><span class="line">  | &#x27;like&#x27; // 模糊匹配，常用于字符串搜索，例如 NAME LIKE &#x27;%张%&#x27;</span><br><span class="line">  | &#x27;greaterThan&#x27; // 大于，例如 AGE &gt; 18</span><br><span class="line">  | &#x27;lessThan&#x27; // 小于，例如 AGE &lt; 60</span><br><span class="line">  | &#x27;greaterThanOrEqualTo&#x27; // 大于等于，例如 AGE &gt;= 30</span><br><span class="line">  | &#x27;lessThanOrEqualTo&#x27;; // 小于等于，例如 AGE &lt;= 50</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 查询条件结构定义</span><br><span class="line"> */</span><br><span class="line">interface QueryCondition &#123;</span><br><span class="line">  field: string; // 查询字段，如 &#x27;NAME&#x27;、&#x27;AGE&#x27;</span><br><span class="line">  operator?: QueryOperator; // 查询操作符，默认为 &#x27;equalTo&#x27;</span><br><span class="line">  value: string | number; // 查询值（ArkTS 中不建议写联合类型，但此处使用时需确保类型一致）</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class DBUtil &#123;</span><br><span class="line">  private rdbStore: relationalStore.RdbStore | null = null;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 初始化数据库，仅建立连接，不建表，调用时可能需要配置一个变量防止每次都创建</span><br><span class="line">   * @param context 应用上下文</span><br><span class="line">   * @param storeConfig 数据库配置项</span><br><span class="line">   * @param onSuccess 初始化成功后的回调,方便顺便建表</span><br><span class="line">   */</span><br><span class="line">  initDB(context: Context, storeConfig: relationalStore.StoreConfig, onSuccess?: () =&gt; void): void &#123;</span><br><span class="line">    relationalStore.getRdbStore(context, storeConfig, (err, store) =&gt; &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        console.error(`[RdbStore_getRdbStore] failed. Code: $&#123;err.code&#125;, message: $&#123;err.message&#125;`);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(`[RdbStore_getRdbStore] success.`);</span><br><span class="line">      this.rdbStore = store;</span><br><span class="line">      if (onSuccess) &#123;</span><br><span class="line">        onSuccess();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 创建表（需先调用 initDB 后再使用）</span><br><span class="line">   * @param createTableSQL 建表 SQL 语句</span><br><span class="line">   */</span><br><span class="line">  createTable(createTableSQL: string): void &#123;</span><br><span class="line">    if (!this.rdbStore) &#123;</span><br><span class="line">      console.error(&#x27;RdbStore is not initialized. Please call initDB first.&#x27;);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.rdbStore.executeSql(createTableSQL, [], (err) =&gt; &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        console.error(`[RdbStore_executeSql] create table failed. Code: $&#123;err.code&#125;, message: $&#123;err.message&#125;`);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(`[RdbStore_executeSql] create table success.`);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 插入数据</span><br><span class="line">   * @param tableName 表名</span><br><span class="line">   * @param value 插入的键值对（ValuesBucket）</span><br><span class="line">   * @returns 插入的行 ID，失败返回 -1</span><br><span class="line">   */</span><br><span class="line">  async insertData(tableName: string, value: relationalStore.ValuesBucket): Promise&lt;number&gt; &#123;</span><br><span class="line">    if (this.rdbStore !== null) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        console.info(`[RdbStore_insert] 尝试插入表 $&#123;tableName&#125; 数据: $&#123;JSON.stringify(value)&#125;`);</span><br><span class="line">        const rowId = await this.rdbStore.insert(tableName, value);</span><br><span class="line"></span><br><span class="line">        if (rowId === -1) &#123;</span><br><span class="line">          console.error(`[RdbStore_insert] 插入失败（未抛异常），rowId = -1，可能存在字段类型错误或约束冲突`);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return rowId;</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        const err = e as BusinessError;</span><br><span class="line">        console.error(`[RdbStore_insert] $&#123;tableName&#125; failed. Code: $&#123;err.code&#125;, message: $&#123;err.message&#125;`);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      console.error(`[RdbStore_insert] rdbStore 未初始化`);</span><br><span class="line">    &#125;</span><br><span class="line">    return -1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 通用查询方法（支持多字段条件）</span><br><span class="line">   * @param column 查询字段列，如 [&#x27;ID&#x27;, &#x27;NAME&#x27;]</span><br><span class="line">   * @param tableName 表名</span><br><span class="line">   * @param conditions 可选条件数组，如 [&#123; field: &#x27;NAME&#x27;, operator: &#x27;equalTo&#x27;, value: &#x27;张三&#x27; &#125;]</span><br><span class="line">   * @returns 返回原始数据对象数组</span><br><span class="line">   */</span><br><span class="line">  async queryDB(</span><br><span class="line">    column: Array&lt;string&gt;,</span><br><span class="line">    tableName: string,</span><br><span class="line">    conditions?: Array&lt;QueryCondition&gt;</span><br><span class="line">  ): Promise&lt;Array&lt;DBRow&gt;&gt; &#123;</span><br><span class="line">    const predicates = new relationalStore.RdbPredicates(tableName);</span><br><span class="line"></span><br><span class="line">    // 构造查询条件</span><br><span class="line">    if (conditions) &#123;</span><br><span class="line">      for (const condition of conditions) &#123;</span><br><span class="line">        const field: string = condition.field;</span><br><span class="line">        const operator: QueryOperator = condition.operator ?? &#x27;equalTo&#x27;;</span><br><span class="line">        const value: string | number = condition.value;</span><br><span class="line"></span><br><span class="line">        // 用 switch 方式判断操作符，ArkTS 不支持动态函数调用</span><br><span class="line">        switch (operator) &#123;</span><br><span class="line">          case &#x27;equalTo&#x27;:</span><br><span class="line">            predicates.equalTo(field, value);</span><br><span class="line">            break;</span><br><span class="line">          case &#x27;like&#x27;:</span><br><span class="line">            if (typeof value === &#x27;string&#x27;) &#123;</span><br><span class="line">              predicates.like(field, value);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              console.warn(`[queryDB] &#x27;like&#x27; operator requires string value, got: $&#123;typeof value&#125;`);</span><br><span class="line">            &#125;</span><br><span class="line">            break;</span><br><span class="line">          case &#x27;greaterThan&#x27;:</span><br><span class="line">            predicates.greaterThan(field, value);</span><br><span class="line">            break;</span><br><span class="line">          case &#x27;lessThan&#x27;:</span><br><span class="line">            predicates.lessThan(field, value);</span><br><span class="line">            break;</span><br><span class="line">          case &#x27;greaterThanOrEqualTo&#x27;:</span><br><span class="line">            predicates.greaterThanOrEqualTo(field, value);</span><br><span class="line">            break;</span><br><span class="line">          case &#x27;lessThanOrEqualTo&#x27;:</span><br><span class="line">            predicates.lessThanOrEqualTo(field, value);</span><br><span class="line">            break;</span><br><span class="line">          default:</span><br><span class="line">            console.warn(`[queryDB] Unsupported operator: $&#123;operator&#125;`);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const resultList: Array&lt;DBRow&gt; = [];</span><br><span class="line"></span><br><span class="line">    // 查询执行</span><br><span class="line">    if (this.rdbStore !== null) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const resultSet = await this.rdbStore.query(predicates, column);</span><br><span class="line">        console.info(`[queryDB] start query from $&#123;tableName&#125;`);</span><br><span class="line"></span><br><span class="line">        while (resultSet.goToNextRow()) &#123;</span><br><span class="line">          const row: DBRow = &#123;&#125;;</span><br><span class="line">          for (const col of column) &#123;</span><br><span class="line">            const index = resultSet.getColumnIndex(col);</span><br><span class="line">            try &#123;</span><br><span class="line">              row[col] = resultSet.getString(index);</span><br><span class="line">            &#125; catch &#123;</span><br><span class="line">              try &#123;</span><br><span class="line">                row[col] = resultSet.getDouble(index);</span><br><span class="line">              &#125; catch &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                  row[col] = resultSet.getLong(index);</span><br><span class="line">                &#125; catch &#123;</span><br><span class="line">                  row[col] = null;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          resultList.push(row);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        resultSet.close();</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        const err = e as BusinessError;</span><br><span class="line">        console.error(`[RdbStore_query] $&#123;tableName&#125; failed. Code: $&#123;err.code&#125;, message: $&#123;err.message&#125;`);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return resultList;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 根据 ID 删除指定记录</span><br><span class="line">   * @param tableName 表名</span><br><span class="line">   * @param id 主键 ID</span><br><span class="line">   */</span><br><span class="line">  deleteDataByID(tableName: string, id: number | string): void &#123;</span><br><span class="line">    const predicates = new relationalStore.RdbPredicates(tableName).equalTo(&#x27;ID&#x27;, id);</span><br><span class="line">    if (this.rdbStore !== null) &#123;</span><br><span class="line">      this.rdbStore.delete(predicates, (err, rows) =&gt; &#123;</span><br><span class="line">        if (err) &#123;</span><br><span class="line">          console.error(`Delete failed. Code: $&#123;err.code&#125;, message: $&#123;err.message&#125;`);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        console.info(`Deleted rows: $&#123;rows&#125;`);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 根据 ID 更新记录</span><br><span class="line">   * @param tableName 表名</span><br><span class="line">   * @param id 主键 ID</span><br><span class="line">   * @param value 要更新的字段值（ValuesBucket）</span><br><span class="line">   */</span><br><span class="line">  async updateDataByID(tableName: string, id: string, value: relationalStore.ValuesBucket): Promise&lt;void&gt; &#123;</span><br><span class="line">    const predicates = new relationalStore.RdbPredicates(tableName).equalTo(&#x27;ID&#x27;, id);</span><br><span class="line"></span><br><span class="line">    if (this.rdbStore !== null) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        const rows = await this.rdbStore.update(value, predicates);</span><br><span class="line">        console.info(`[更新成功] 表: $&#123;tableName&#125;, ID: $&#123;id&#125;, 更新字段: $&#123;JSON.stringify(value)&#125;, 影响行数: $&#123;rows&#125;`);</span><br><span class="line">      &#125; catch (err) &#123;</span><br><span class="line">        console.error(`[更新失败] 表: $&#123;tableName&#125;, ID: $&#123;id&#125;, 错误码: $&#123;err.code&#125;, 错误信息: $&#123;err.message&#125;`);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      console.warn(`[警告] rdbStore 尚未初始化，无法更新 表: $&#123;tableName&#125;`);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 自动判断是否需要 VACUUM 的实现</span><br><span class="line">  async autoVacuumIfNeeded(): Promise&lt;void&gt; &#123;</span><br><span class="line">    if (!this.rdbStore) &#123;</span><br><span class="line">      console.warn(&#x27;[DBUtil_autoVacuumIfNeeded] rdbStore not initialized.&#x27;);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      let pageCount = 0;</span><br><span class="line">      let freeCount = 0;</span><br><span class="line"></span><br><span class="line">      // 查询 page_count</span><br><span class="line">      const pageResultSet = await this.rdbStore.querySql(&#x27;PRAGMA page_count;&#x27;, []);</span><br><span class="line">      if (pageResultSet.goToFirstRow()) &#123;</span><br><span class="line">        const index = pageResultSet.getColumnIndex(&#x27;page_count&#x27;);</span><br><span class="line">        pageCount = pageResultSet.getLong(index);</span><br><span class="line">      &#125;</span><br><span class="line">      pageResultSet.close();</span><br><span class="line"></span><br><span class="line">      // 查询 freelist_count</span><br><span class="line">      const freeResultSet = await this.rdbStore.querySql(&#x27;PRAGMA freelist_count;&#x27;, []);</span><br><span class="line">      if (freeResultSet.goToFirstRow()) &#123;</span><br><span class="line">        const index = freeResultSet.getColumnIndex(&#x27;freelist_count&#x27;);</span><br><span class="line">        freeCount = freeResultSet.getLong(index);</span><br><span class="line">      &#125;</span><br><span class="line">      freeResultSet.close();</span><br><span class="line"></span><br><span class="line">      const freeRatio: number = pageCount &gt; 0 ? freeCount / pageCount : 0;</span><br><span class="line"></span><br><span class="line">      console.info(`[DBUtil_autoVacuumIfNeeded] pageCount=$&#123;pageCount&#125;, freeCount=$&#123;freeCount&#125;, freeRatio=$&#123;freeRatio&#125;`);</span><br><span class="line"></span><br><span class="line">      if (pageCount &gt; 1000 &amp;&amp; freeRatio &gt; 0.3) &#123;</span><br><span class="line">        console.warn(&#x27;[DBUtil_autoVacuumIfNeeded] Triggering VACUUM...&#x27;);</span><br><span class="line">        await new Promise&lt;void&gt;((resolve, reject) =&gt; &#123;</span><br><span class="line">          this.rdbStore!.executeSql(&#x27;VACUUM;&#x27;, [], (err) =&gt; &#123;</span><br><span class="line">            if (err) &#123;</span><br><span class="line">              reject(err);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              resolve();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        console.info(&#x27;[DBUtil_autoVacuumIfNeeded] VACUUM completed.&#x27;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        console.info(&#x27;[DBUtil_autoVacuumIfNeeded] No need to VACUUM.&#x27;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      const err = e as BusinessError;</span><br><span class="line">      console.error(`[DBUtil_autoVacuumIfNeeded] Failed. Code: $&#123;err.code&#125;, message: $&#123;err.message&#125;`);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const dbUtil = new DBUtil();</span><br><span class="line"></span><br><span class="line">export &#123; dbUtil &#125;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; relationalStore &#125; from &#x27;@kit.ArkData&#x27;;</span><br><span class="line">import &#123; dbUtil &#125; from &#x27;./DBUtil&#x27;;</span><br><span class="line">import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct Page &#123;</span><br><span class="line">  @State idValue: string = &#x27;&#x27;</span><br><span class="line">  @State name: string = &#x27;&#x27;</span><br><span class="line">  @State cha: string = &#x27;&#x27;</span><br><span class="line">  @State insertId: number = -1</span><br><span class="line">  // 数据库配置项</span><br><span class="line">  STORE_CONFIG: relationalStore.StoreConfig = &#123;</span><br><span class="line">    name: &#x27;RdbTest.db&#x27;,</span><br><span class="line">    securityLevel: relationalStore.SecurityLevel.S1,</span><br><span class="line">    encrypt: false,</span><br><span class="line">    customDir: &#x27;customDir/subCustomDir&#x27;,</span><br><span class="line">    isReadOnly: false</span><br><span class="line">  &#125;;</span><br><span class="line">  // 建表语句</span><br><span class="line">  SQL_CREATE_TABLE = `</span><br><span class="line">    -- 表名：EMPLOYEE</span><br><span class="line">    CREATE TABLE IF NOT EXISTS EMPLOYEE (</span><br><span class="line">      ID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,</span><br><span class="line">      NAME TEXT NOT NULL</span><br><span class="line">    );</span><br><span class="line">  `;</span><br><span class="line"></span><br><span class="line">  aboutToAppear() &#123;</span><br><span class="line">    console.log(&#x27;[Page] aboutToAppear&#x27;);</span><br><span class="line">    // 进入页面时整理数据库，清除空行</span><br><span class="line">    dbUtil.autoVacuumIfNeeded()</span><br><span class="line">      .then(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;[Page] autoVacuumIfNeeded done&#x27;);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch((err: BusinessError) =&gt; &#123;</span><br><span class="line">        console.error(&#x27;[Page] autoVacuumIfNeeded error:&#x27;, err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column(&#123; space: 20 &#125;) &#123;</span><br><span class="line">      TextInput(&#123; text: $$this.idValue, placeholder: &#x27;请输入ID（修改/删除时用）&#x27; &#125;)</span><br><span class="line">      TextInput(&#123; text: $$this.name, placeholder: &#x27;请输入姓名&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">      Button(&#x27;创建数据库&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          dbUtil.initDB(getContext(), this.STORE_CONFIG, this.SQL_CREATE_TABLE)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      Button(&#x27;插入数据&#x27;)</span><br><span class="line">        .onClick(async () =&gt; &#123;</span><br><span class="line">          const valueBucket: relationalStore.ValuesBucket = &#123;</span><br><span class="line">            NAME: this.name  // 不需要传 ID，数据库自增</span><br><span class="line">          &#125;;</span><br><span class="line">          const rowId = await dbUtil.insertData(&#x27;EMPLOYEE&#x27;, valueBucket);</span><br><span class="line">          if (rowId !== -1) &#123;</span><br><span class="line">            this.insertId = rowId;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      Text(`插入行 ID: $&#123;this.insertId&#125;`)</span><br><span class="line"></span><br><span class="line">      Button(&#x27;查询所有数据&#x27;)</span><br><span class="line">        .onClick(async () =&gt; &#123;</span><br><span class="line">          const result = await dbUtil.queryDB([&#x27;ID&#x27;, &#x27;NAME&#x27;], &#x27;EMPLOYEE&#x27;);</span><br><span class="line">          // 查询名字为xinzai的人</span><br><span class="line">          const result1 = await dbUtil.queryDB(</span><br><span class="line">            [&#x27;ID&#x27;, &#x27;NAME&#x27;], &#x27;EMPLOYEE&#x27;,</span><br><span class="line">            [&#123; field: &quot;NAME&quot;, operator: &#x27;equalTo&#x27;, value: &#x27;xinzai&#x27; &#125;]</span><br><span class="line">          );</span><br><span class="line">          console.log(&#x27;查询结果:&#x27;, JSON.stringify(result));</span><br><span class="line">          console.log(&#x27;单个ID查询:&#x27;, JSON.stringify(result1));</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      Button(&#x27;修改数据&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          const id = Number(this.idValue);</span><br><span class="line">          if (!isNaN(id)) &#123;</span><br><span class="line">            const updateValue: relationalStore.ValuesBucket = &#123;</span><br><span class="line">              NAME: this.name</span><br><span class="line">            &#125;;</span><br><span class="line">            dbUtil.updateDataByID(&#x27;EMPLOYEE&#x27;, id, updateValue);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            console.error(&#x27;请输入有效的数字 ID&#x27;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      Button(&#x27;删除数据&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          const id = Number(this.idValue);</span><br><span class="line">          if (!isNaN(id)) &#123;</span><br><span class="line">            dbUtil.deleteDataByID(&#x27;EMPLOYEE&#x27;, id);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            console.error(&#x27;请输入有效的数字 ID&#x27;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="应用上下文context文档中心"><a class="markdownIt-Anchor" href="#应用上下文context文档中心"></a> 应用上下文Context<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-context-stage">文档中心</a></h1><p>应用的全局上下文</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void &#123;</span><br><span class="line">  AppStorage.setOrCreate(&#x27;context&#x27;, this.context)</span><br><span class="line">&#125;</span><br><span class="line">// 使用</span><br><span class="line">const context = AppStorage.get&lt;Context&gt;(&#x27;context&#x27;)</span><br></pre></td></tr></table></figure><p>组件上下文</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.getUIContext()</span><br></pre></td></tr></table></figure><h1 id="权限"><a class="markdownIt-Anchor" href="#权限"></a> 权限</h1><p>在src\main\module.json5 配置，受限权限需要申请才可以获得<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/restricted-permissions">文档中心</a></p><p>当工程签名之后，记得运行工程需要登录账号，否则可能权限会失效</p><h2 id="系统授权文档中心"><a class="markdownIt-Anchor" href="#系统授权文档中心"></a> 系统授权<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/permissions-for-all">文档中心</a></h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span> : <span class="string">&quot;ohos.permission.枚举值&quot;</span><span class="comment">//申请权限的名字</span></span><br><span class="line">  &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure><h2 id="用户授权文档中心"><a class="markdownIt-Anchor" href="#用户授权文档中心"></a> 用户授权<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/permissions-for-all-user">文档中心</a></h2><p>用户授权不能只写权限需要的名字，需要完善原因等</p><p>路径：<code>\src\main\resources\base\element\string.json</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;string&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;reason_mai&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;申请麦克风权限，用于录音&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.枚举值&quot;</span>,<span class="comment">//申请权限的名字</span></span><br><span class="line">    <span class="string">&quot;reason&quot;</span>:<span class="string">&quot;$string:reason_mai&quot;</span>,<span class="comment">//申请声明,需要在string.json文件中配置</span></span><br><span class="line">    <span class="string">&quot;usedScene&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;abilities&quot;</span>: [<span class="string">&quot;EntryAbility&quot;</span>],<span class="comment">//需要在哪个abilities中使用</span></span><br><span class="line">      <span class="string">&quot;when&quot;</span>: <span class="string">&quot;always&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>配置了还需要在 UI 中对应需要的位置发起申请，用户同意之后才有权限，下面是封装好的申请权限的函数</p><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; abilityAccessCtrl, bundleManager, common, <span class="title class_">Permissions</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@kit.AbilityKit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">checkPermission</span>(<span class="params"><span class="attr">permissionName</span>: <span class="title class_">Permissions</span>[], <span class="attr">callback</span>: () =&gt; <span class="built_in">void</span></span>) &#123;</span><br><span class="line">  <span class="comment">//不要一进应用就申请权限</span></span><br><span class="line">  <span class="keyword">const</span> manger = abilityAccessCtrl.<span class="title function_">createAtManager</span>() <span class="comment">//权限控制</span></span><br><span class="line">  <span class="comment">//申请权限</span></span><br><span class="line">  <span class="keyword">await</span> manger.<span class="title function_">requestPermissionsFromUser</span>(<span class="title function_">getContext</span>(), permissionName <span class="keyword">as</span> <span class="title class_">Permissions</span>[])</span><br><span class="line"></span><br><span class="line">  <span class="comment">//拿到包信息</span></span><br><span class="line">  <span class="keyword">const</span> bundleInfo =</span><br><span class="line">    bundleManager.<span class="title function_">getBundleInfoForSelfSync</span>(bundleManager.<span class="property">BundleFlag</span>.<span class="property">GET_BUNDLE_INFO_WITH_APPLICATION</span>)</span><br><span class="line">  <span class="comment">//获取tokenid</span></span><br><span class="line">  <span class="keyword">const</span> tokenId = bundleInfo.<span class="property">appInfo</span>.<span class="property">accessTokenId</span></span><br><span class="line">  <span class="comment">//检测是否有权限</span></span><br><span class="line">  <span class="keyword">const</span> status = manger.<span class="title function_">checkAccessTokenSync</span>(tokenId, permissionName[<span class="number">0</span>])</span><br><span class="line">  <span class="keyword">if</span> (status === abilityAccessCtrl.<span class="property">GrantStatus</span>.<span class="property">PERMISSION_DENIED</span>) &#123; <span class="comment">//如果没有权限设跳转到设置对应应用权限页面</span></span><br><span class="line">    <span class="comment">//打开应用设置</span></span><br><span class="line">    (<span class="title function_">getContext</span>() <span class="keyword">as</span> common.<span class="property">UIAbilityContext</span>).<span class="title function_">startAbility</span>(&#123;</span><br><span class="line">      <span class="comment">//包名:com.huawei.hmos.settings</span></span><br><span class="line">      <span class="attr">bundleName</span>: <span class="string">&quot;com.huawei.hmos.settings&quot;</span>,</span><br><span class="line">      <span class="comment">//ability名字</span></span><br><span class="line">      <span class="attr">abilityName</span>: <span class="string">&quot;com.huawei.hmos.settings.MainAbility&quot;</span>,</span><br><span class="line">      <span class="comment">//跳转的页面</span></span><br><span class="line">      <span class="attr">uri</span>: <span class="string">&quot;application_info_entry&quot;</span>,</span><br><span class="line">      <span class="comment">//参数</span></span><br><span class="line">      <span class="attr">parameters</span>: &#123;</span><br><span class="line">        <span class="attr">pushParams</span>: bundleInfo.<span class="property">name</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="comment">//如果有权限触发回调函数</span></span><br><span class="line">    <span class="title function_">callback</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> checkPermission</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Button</span>(<span class="string">&#x27;请打开位置交流&#x27;</span>)</span><br><span class="line">  .<span class="title function_">onClick</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="title function_">checkPermission</span>([<span class="string">&quot;ohos.permission.APPROXIMATELY_LOCATION&quot;</span>, <span class="string">&quot;ohos.permission.LOCATION&quot;</span>],</span><br><span class="line">      <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> geoLocationManager.<span class="title function_">getCurrentLocation</span>()</span><br><span class="line">        promptAction.<span class="title function_">showToast</span>(&#123; <span class="attr">message</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(result) &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5.弹窗</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/5-%E5%BC%B9%E7%AA%97/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/5-%E5%BC%B9%E7%AA%97/</url>
      
        <content type="html"><![CDATA[<h1 id="文本提示框点击"><a class="markdownIt-Anchor" href="#文本提示框点击"></a> 文本提示框<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-promptaction">点击</a></h1><p>创建并显示文本提示框、对话框和操作菜单</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//轻提示，过一会自动消失</span><br><span class="line">promptAction.openToast(&#123;</span><br><span class="line">  message: &quot;提示文本&quot;, // 要显示的提示内容</span><br><span class="line">  duration: 数字,   // 可选，显示时长（毫秒），默认约 2000ms</span><br><span class="line">  bottom: 数字 // 可选，距离屏幕底部的距离（如 &#x27;100px&#x27; 或 100）</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//强提示，弹层提示 不会自动消失</span><br><span class="line">uiContext: UIContext = this.getUIContext();</span><br><span class="line">promptAction: PromptAction = this.uiContext.getPromptAction();</span><br><span class="line">this.promptAction.showDialog(&#123;</span><br><span class="line">  title: &#x27;标题文本&#x27;,</span><br><span class="line">  message: &quot;提示文本&quot;, // 要显示的提示内容</span><br><span class="line">  buttons: [</span><br><span class="line">    &#123;</span><br><span class="line">      text: &#x27;按键文本&#x27;, color: 颜色格式</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">this.getUIContext().showAlertDialog(&#123;// 不用引入包</span><br><span class="line">  title: &#x27;标题文本&#x27;,</span><br><span class="line">  message: &quot;提示文本&quot;, // 要显示的提示内容</span><br><span class="line">  buttons: [</span><br><span class="line">    &#123;</span><br><span class="line">      value: &#x27;按键文本&#x27;, fontColor: 颜色格式, action: () =&gt;&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//轻提示</span><br><span class="line">promptAction.showToast(&#123;</span><br><span class="line">  message: &quot;你好！！&quot;, // 提示内容</span><br><span class="line">  duration: 2000,     // 显示 2 秒（可选）</span><br><span class="line">  bottom: &quot;100px&quot;     // 距离屏幕底部 100 像素（可选）</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//强提示</span><br><span class="line">let uiContext = this.getUIContext(); // 获取 UI 上下文</span><br><span class="line">let promptAction: PromptAction = uiContext.getPromptAction(); // 获取 PromptAction 对象</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">  promptAction.showDialog(</span><br><span class="line">    &#123;</span><br><span class="line">      title: &#x27;温馨提示&#x27;,</span><br><span class="line">      message: &#x27;确认登录吗？您还没有输入账号呢！&#x27;,</span><br><span class="line">      buttons: [</span><br><span class="line">        &#123; text: &#x27;取消&#x27;,color: &#x27;#888888&#x27; &#125;,</span><br><span class="line">        &#123; text: &#x27;确定&#x27;,color: &#x27;#000000&#x27;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    (err, data) =&gt; &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        console.error(&#x27;弹窗错误：&#x27;, err);</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 成功后的回调，data.index 表示点击的按钮索引（0、1、2...）</span><br><span class="line">      if (data.index === 0) &#123;</span><br><span class="line">        console.info(&#x27;用户点击了取消&#x27;);</span><br><span class="line">      &#125; else if (data.index === 1) &#123;</span><br><span class="line">        console.info(&#x27;用户点击了确定，执行登录逻辑&#x27;);</span><br><span class="line">        // 你可以在这里调用登录函数</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125; catch (error) &#123;</span><br><span class="line">  console.error(&#x27;调用 showDialog 异常：&#x27;, error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AlertDialog.show(&#123;</span><br><span class="line">  title: &quot;温馨提示&quot;,</span><br><span class="line">  message: &#x27;确认登录吗，您还没有输入账号呢！&#x27;,</span><br><span class="line">  buttons: [</span><br><span class="line">    &#123;</span><br><span class="line">      value: &#x27;取消&#x27;, fontColor: &#x27;#ccc&#x27;, action: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      value: &#x27;确定&#x27;, fontColor: &#x27;#000&#x27;, action: () =&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="菜单控制文档中心"><a class="markdownIt-Anchor" href="#菜单控制文档中心"></a> 菜单控制<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-popup-and-menu-components-menu">文档中心</a></h1><h2 id="右键或长按菜单"><a class="markdownIt-Anchor" href="#右键或长按菜单"></a> 右键或长按菜单</h2><p>没有选中事件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Builder</span><br><span class="line">MyMenu() &#123;</span><br><span class="line">  Menu() &#123;</span><br><span class="line">    MenuItem(&#123; content: &quot;菜单文本&quot;, labelInfo: &quot;快捷键文本&quot; &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Button(&#x27;click for Menu&#x27;)</span><br><span class="line">  .bindContextMenu(this.MyMenu, ResponseType.枚举值)</span><br></pre></td></tr></table></figure><h1 id="半模态页面文档中心文档中心"><a class="markdownIt-Anchor" href="#半模态页面文档中心文档中心"></a> 半模态页面<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-sheet-transition">文档中心</a><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sheet-page">文档中心</a></h1><p>非全屏弹窗式交互页面，允许部分底层父视图可见，半模态页面适用于展示简单的任务或信息面板</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.bindSheet(是否显示, 半模态页面内容组件, &#123;</span><br><span class="line">  detents: [//页面停顿的高度</span><br><span class="line">    SheetSize.MEDIUM, //初始高度：中等高度（通常是屏幕高度的一半左右）</span><br><span class="line">    SheetSize.LARGE, //大高度（通常是屏幕高度的90%左右）</span><br><span class="line">    600//固定高度600</span><br><span class="line">  ],</span><br><span class="line">  showClose: false// 隐藏关闭按钮</span><br><span class="line">  preferType: SheetType.枚举值,//半模态转场效果</span><br><span class="line">  title: &#123; title: &#x27;半模态页面标题&#x27; &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">//设置半模态页面滚动时优先滚动哪个页面</span><br><span class="line">.nestedScroll(&#123;</span><br><span class="line">  scrollForward: NestedScrollMode.枚举值,//向上滑动时</span><br><span class="line">  scrollBackward: NestedScrollMode.枚举值,//向下滑动时</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct BindSheet &#123;</span><br><span class="line">  @State isShowSheet: boolean = false;</span><br><span class="line">  private items: number[] = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];</span><br><span class="line"></span><br><span class="line">  @Builder</span><br><span class="line">  SheetBuilder() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      // 第一步：自定义滚动容器</span><br><span class="line">      List(&#123; space: &#x27;10vp&#x27; &#125;) &#123;</span><br><span class="line">        ForEach(this.items, (item: number) =&gt; &#123;</span><br><span class="line">          ListItem() &#123;</span><br><span class="line">            Text(String(item)).fontSize(16).fontWeight(FontWeight.Bold)</span><br><span class="line">          &#125;.width(&#x27;90%&#x27;).height(&#x27;80vp&#x27;).backgroundColor(&#x27;#ff53ecd9&#x27;).borderRadius(10)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .alignListItem(ListItemAlign.Center)</span><br><span class="line">      .margin(&#123; top: &#x27;10vp&#x27; &#125;)</span><br><span class="line">      .width(&#x27;100%&#x27;)</span><br><span class="line">      .height(&#x27;100%&#x27;)</span><br><span class="line">      // 第二步：设置滚动组件的嵌套滚动属性</span><br><span class="line">      .nestedScroll(&#123;</span><br><span class="line">        scrollForward: NestedScrollMode.PARENT_FIRST,</span><br><span class="line">        scrollBackward: NestedScrollMode.SELF_FIRST,</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;.width(&#x27;100%&#x27;).height(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Button(&#x27;Open Sheet&#x27;).width(&#x27;90%&#x27;).height(&#x27;80vp&#x27;)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.isShowSheet = !this.isShowSheet;</span><br><span class="line">        &#125;)</span><br><span class="line">        .bindSheet($$this.isShowSheet, this.SheetBuilder(), &#123;</span><br><span class="line">          detents: [SheetSize.MEDIUM, SheetSize.LARGE, 600],</span><br><span class="line">          preferType: SheetType.BOTTOM,</span><br><span class="line">          title: &#123; title: &#x27;嵌套滚动场景&#x27; &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.width(&#x27;100%&#x27;).height(&#x27;100%&#x27;)</span><br><span class="line">    .justifyContent(FlexAlign.Center)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="全模态页面文档中心文档中心"><a class="markdownIt-Anchor" href="#全模态页面文档中心文档中心"></a> 全模态页面<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-modal-transition">文档中心</a><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-contentcover-page">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.bindContentCover($$this.isPresent, this.MyContentCoverBuilder(), &#123;</span><br><span class="line">  transition: TransitionEffect.translate(&#123; x: 500 &#125;)</span><br><span class="line">    .animation(&#123; curve: curves.springMotion(0.6, 0.8) &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; curves &#125; from &#x27;@kit.ArkUI&#x27;;</span><br><span class="line"></span><br><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct BindContentCover &#123;</span><br><span class="line">  // 半模态转场控制变量</span><br><span class="line">  @State isSheetShow: boolean = false;</span><br><span class="line">  // 全模态转场控制变量</span><br><span class="line">  @State isPresent: boolean = false;</span><br><span class="line"></span><br><span class="line">  @Builder</span><br><span class="line">  MyContentCoverBuilder() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Text(&#x27;确认&#x27;)</span><br><span class="line">        .width(&#x27;90%&#x27;)</span><br><span class="line">        .height(40)</span><br><span class="line">        .textAlign(TextAlign.Center)</span><br><span class="line">        .borderRadius(10)</span><br><span class="line">        .fontColor(Color.White)</span><br><span class="line">        .backgroundColor(0x007dfe)</span><br><span class="line">        .onClick(() =&gt; &#123;</span><br><span class="line">          this.isPresent = !this.isPresent;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;.justifyContent(FlexAlign.Center)</span><br><span class="line">    .size(&#123; width: &#x27;100%&#x27;, height: &#x27;100%&#x27; &#125;)</span><br><span class="line">    .backgroundColor(0xf5f5f5)//一定要设置背景颜色</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 第二步：定义半模态展示界面</span><br><span class="line">  // 通过@Builder构建模态展示界面</span><br><span class="line">  @Builder</span><br><span class="line">  MySheetBuilder() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Column() &#123;</span><br><span class="line">        Text(&#x27;+ 选择乘车人&#x27;)</span><br><span class="line">          .fontSize(18)</span><br><span class="line">          .fontColor(Color.Orange)</span><br><span class="line">          .padding(&#123; top: 10, bottom: 10 &#125;)</span><br><span class="line">          .width(&#x27;60%&#x27;)</span><br><span class="line">          .textAlign(TextAlign.Center)</span><br><span class="line">          .onClick(() =&gt; &#123;</span><br><span class="line">            // 第三步：通过全模态接口调起全模态展示界面，新拉起的模态面板默认显示在最上层</span><br><span class="line">            this.isPresent = !this.isPresent;</span><br><span class="line">          &#125;)// 通过全模态接口，绑定模态展示界面MyContentCoverBuilder。transition属性支持自定义转场效果，此处定义了x轴横向入场</span><br><span class="line">          .bindContentCover($$this.isPresent, this.MyContentCoverBuilder(), &#123;</span><br><span class="line">            transition: TransitionEffect.translate(&#123; x: 500 &#125;)</span><br><span class="line">              .animation(&#123; curve: curves.springMotion(0.6, 0.8) &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .padding(&#123; top: 60 &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      Row() &#123;</span><br><span class="line">        Text(&#x27;有票&#x27;)</span><br><span class="line">          .fontColor(Color.Blue)</span><br><span class="line">          .width(&#x27;25%&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">      .margin(&#123; top: 200, bottom: 30 &#125;)</span><br><span class="line">      .backgroundColor(Color.White)</span><br><span class="line">      .onClick(() =&gt; &#123;</span><br><span class="line">        this.isSheetShow = !this.isSheetShow;</span><br><span class="line">      &#125;)</span><br><span class="line">      // 第一步：定义半模态转场效果</span><br><span class="line">      .bindSheet($$this.isSheetShow, this.MySheetBuilder(), &#123;</span><br><span class="line">        height: SheetSize.MEDIUM,</span><br><span class="line">        title: &#123; title: &quot;确认订单&quot; &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">    .backgroundColor(&#x27;#30aaaaaa&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4.界面布局、动画</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/4-%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80%E3%80%81%E5%8A%A8%E7%94%BB/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/4-%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80%E3%80%81%E5%8A%A8%E7%94%BB/</url>
      
        <content type="html"><![CDATA[<p>布局思路：先排版，再放内容，再美化</p><h1 id="线性布局文档中心"><a class="markdownIt-Anchor" href="#线性布局文档中心"></a> 线性布局<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-linear">文档中心</a></h1><p><img src="https://s2.loli.net/2025/12/31/oAlKMnZWDNHwGxv.png" alt="Column容器内子元素排列示意图" style="zoom:50%;" /><img src="https://s2.loli.net/2025/12/31/PHX2C3YlcjvF9MO.png" style="zoom:50%;" /><img src="https://s2.loli.net/2025/12/31/EaVAl6gQCSy3pbM.png" style="zoom:50%;" /></p><p><code>Row行</code>、<code>Column列</code>：默认有居中效果</p><p>通过space属性设置排列方向上子元素的间距</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column(&#123; space: 数字 &#125;)&#123;&#125;</span><br><span class="line">Row(&#123; space: 数字 &#125;)&#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">build() &#123;</span><br><span class="line">    Column(&#123; space: 20 &#125;) &#123;</span><br><span class="line">        Text(&#x27;space: 20&#x27;).fontSize(15).fontColor(Color.Gray).width(&#x27;90%&#x27;)</span><br><span class="line">        Row().width(&#x27;90%&#x27;).height(50).backgroundColor(0xF5DEB3)</span><br><span class="line">        Row().width(&#x27;90%&#x27;).height(50).backgroundColor(0xD2B48C)</span><br><span class="line">        Row().width(&#x27;90%&#x27;).height(50).backgroundColor(0xF5DEB3)</span><br><span class="line">    &#125;.width(&#x27;100%&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="布局子元素在主轴上的排列方式"><a class="markdownIt-Anchor" href="#布局子元素在主轴上的排列方式"></a> 布局子元素在主轴上的排列方式</h2><p>在布局容器内，可以通过<strong>justifyContent</strong>属性设置子元素在容器主轴上的排列方式。可以从主轴起始位置开始排布，也可以从主轴结束位置开始排布，或者均匀分割主轴的空间，对齐的那个方向必须设置大小</p><p><img src="https://s2.loli.net/2025/12/31/ufc8sKWYt1j4kov.png" alt="Column容器内子元素在垂直方向上的排列图" style="zoom: 33%;" /><img src="https://s2.loli.net/2025/12/31/S4j3OwpNZ9RcHX6.png" alt="Row容器内子元素在水平方向上的排列图" style="zoom: 33%;" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.justifyContent(FlexAlign.枚举值)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column(&#123;&#125;) &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;80%&#x27;).height(50).backgroundColor(0xF5DEB3)</span><br><span class="line"></span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;80%&#x27;).height(50).backgroundColor(0xD2B48C)</span><br><span class="line">&#125;</span><br><span class="line">.width(&#x27;100%&#x27;).height(300).backgroundColor(&#x27;rgb(242,242,242)&#x27;)</span><br><span class="line">    .justifyContent(FlexAlign.Start)</span><br><span class="line"></span><br><span class="line">Row(&#123;&#125;) &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;20%&#x27;).height(30).backgroundColor(0xF5DEB3)</span><br><span class="line"></span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;20%&#x27;).height(30).backgroundColor(0xD2B48C)</span><br><span class="line">&#125;</span><br><span class="line">.width(&#x27;100%&#x27;).height(200).backgroundColor(&#x27;rgb(242,242,242)&#x27;)</span><br><span class="line">    .justifyContent(FlexAlign.Start)</span><br></pre></td></tr></table></figure><h2 id="布局子元素在交叉轴上的对齐方式"><a class="markdownIt-Anchor" href="#布局子元素在交叉轴上的对齐方式"></a> 布局子元素在交叉轴上的对齐方式</h2><p>若主轴为垂直方向，则交叉轴为水平方向，反之则垂直方向，对齐的那个方向必须设置大小</p><p><img src="https://s2.loli.net/2025/12/31/gFvALJ2DmaPj9wf.png" alt="Column容器内子元素在水平方向上的排列图" style="zoom: 33%;" /><img src="https://s2.loli.net/2025/12/31/xlXFbVtGfIpvTDq.png" alt="Row容器内子元素在垂直方向上的排列图" style="zoom: 25%;" /></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//交叉轴在水平方向</span><br><span class="line">.alignItems(HorizontalAlign.枚举值)</span><br><span class="line">//交叉轴在垂直方向</span><br><span class="line">.alignItems(VerticalAlign.枚举值)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column(&#123;&#125;) &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;80%&#x27;).height(50).backgroundColor(0xF5DEB3)</span><br><span class="line"></span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;80%&#x27;).height(50).backgroundColor(0xD2B48C)</span><br><span class="line">&#125;</span><br><span class="line">.width(&#x27;100%&#x27;).backgroundColor(&#x27;rgb(242,242,242)&#x27;)</span><br><span class="line">    .alignItems(HorizontalAlign.Start)</span><br><span class="line"></span><br><span class="line">Row(&#123;&#125;) &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;20%&#x27;).height(30).backgroundColor(0xF5DEB3)</span><br><span class="line"></span><br><span class="line">    Column() &#123;</span><br><span class="line">    &#125;.width(&#x27;20%&#x27;).height(30).backgroundColor(0xD2B48C)</span><br><span class="line">&#125;</span><br><span class="line">.width(&#x27;100%&#x27;).height(200).backgroundColor(&#x27;rgb(242,242,242)&#x27;)</span><br><span class="line">    .alignItems(VerticalAlign.Top)</span><br></pre></td></tr></table></figure><h2 id="自适应拉伸"><a class="markdownIt-Anchor" href="#自适应拉伸"></a> 自适应拉伸</h2><p>常用空白填充组件<strong>Blank</strong>，在容器主轴方向自动填充空白空间，达到自适应拉伸效果</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Blank()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">        Text(&#x27;Bluetooth&#x27;).fontSize(18)</span><br><span class="line">        Blank()</span><br><span class="line">        Toggle(&#123; type: ToggleType.Switch, isOn: true &#125;)</span><br><span class="line">    &#125;.backgroundColor(0xFFFFFF).borderRadius(15).padding(&#123; left: 12 &#125;).width(&#x27;100%&#x27;)</span><br><span class="line">&#125;.backgroundColor(0xEFEFEF).padding(20).width(&#x27;100%&#x27;)</span><br></pre></td></tr></table></figure><h2 id="自适应缩放"><a class="markdownIt-Anchor" href="#自适应缩放"></a> 自适应缩放</h2><p>子元素随容器尺寸的变化而按照预设的比例自动调整尺寸，适应各种不同大小的设备</p><ol><li>父容器尺寸确定时，使用<strong>layoutWeight</strong>属性设置子元素和兄弟元素在主轴上的权重，忽略元素本身尺寸设置，使它们在任意尺寸的设备下自适应占满剩余空间</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.layoutWeight(数字)//数字越大权重越高</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column() &#123;</span><br><span class="line">    Text(&#x27;1:2:3&#x27;).width(&#x27;100%&#x27;)</span><br><span class="line">    Row() &#123;</span><br><span class="line">        Column() &#123;</span><br><span class="line">            Text(&#x27;layoutWeight(1)&#x27;)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">        &#125;.backgroundColor(0xF5DEB3).height(&#x27;100%&#x27;)</span><br><span class="line">        .layoutWeight(1)</span><br><span class="line"></span><br><span class="line">        Column() &#123;</span><br><span class="line">            Text(&#x27;layoutWeight(2)&#x27;)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">        &#125;.backgroundColor(0xD2B48C).height(&#x27;100%&#x27;)</span><br><span class="line">        .layoutWeight(2)</span><br><span class="line"></span><br><span class="line">        Column() &#123;</span><br><span class="line">            Text(&#x27;layoutWeight(3)&#x27;)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">        &#125;.backgroundColor(0xF5DEB3).height(&#x27;100%&#x27;)</span><br><span class="line">        .layoutWeight(3)</span><br><span class="line">    &#125;.backgroundColor(0xffd306).height(&#x27;30%&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>父容器尺寸确定时，使用百分比设置子元素和兄弟元素的宽度，使他们在任意尺寸的设备下保持固定的自适应占比</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column() &#123;</span><br><span class="line">    Row() &#123;</span><br><span class="line">        Column() &#123;</span><br><span class="line">            Text(&#x27;left width 20%&#x27;)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">        &#125;.width(&#x27;20%&#x27;).backgroundColor(0xF5DEB3).height(&#x27;100%&#x27;)</span><br><span class="line"></span><br><span class="line">        Column() &#123;</span><br><span class="line">            Text(&#x27;center width 50%&#x27;)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">        &#125;.width(&#x27;50%&#x27;).backgroundColor(0xD2B48C).height(&#x27;100%&#x27;)</span><br><span class="line"></span><br><span class="line">        Column() &#123;</span><br><span class="line">            Text(&#x27;right width 30%&#x27;)</span><br><span class="line">                .textAlign(TextAlign.Center)</span><br><span class="line">        &#125;.width(&#x27;30%&#x27;).backgroundColor(0xF5DEB3).height(&#x27;100%&#x27;)</span><br><span class="line">    &#125;.backgroundColor(0xffd306).height(&#x27;30%&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自适应延伸"><a class="markdownIt-Anchor" href="#自适应延伸"></a> 自适应延伸</h2><p>当一屏无法完全显示时，可以在Column或Row组件的外层包裹一个可滚动的容器组件<strong>Scroll</strong>来实现可滑动的线性布局</p><p><strong>Scroll</strong>有大小限制，且小于滚动内容区域，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll#scroller">Scroll API</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">控制名:Scroller = new Scroller()//创建Scroll控制器</span><br><span class="line">Scroll( this.控制名 ) &#123;//this.控制名将Scroll与Scroll控制器绑定</span><br><span class="line">    Column() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    this.scroller.枚举值(不同枚举值参数不同)</span><br><span class="line">&#125;</span><br><span class="line">.scrollable(ScrollDirection.枚举值)// 滚动方向</span><br><span class="line">.scrollBar(BarState.枚举值) // 滚动条常驻显示</span><br><span class="line">.scrollBarColor(Color.枚举值) // 滚动条颜色</span><br><span class="line">.scrollBarWidth(数字) // 滚动条宽度</span><br><span class="line">.edgeEffect(EdgeEffect.枚举值)// 滚动到边沿后回弹</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Entry</span><br><span class="line">@Component</span><br><span class="line">struct ScrollCase &#123;</span><br><span class="line">  @State message: string = &#x27;Hello World&#x27;;</span><br><span class="line"></span><br><span class="line">  scroller:Scroller = new Scroller()</span><br><span class="line"></span><br><span class="line">  build() &#123;</span><br><span class="line">    Column() &#123;</span><br><span class="line">      toubu()</span><br><span class="line">      Scroll(this.scroller)&#123;</span><br><span class="line">        Column(&#123;space:10&#125;)&#123;</span><br><span class="line">          Button(&#x27;回到底部&#x27;)</span><br><span class="line">            .onClick(() =&gt;&#123;</span><br><span class="line">              this.scroller.scrollEdge(Edge.End)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">          ScrollItemComp()</span><br><span class="line">          ScrollItemComp()</span><br><span class="line">          ScrollItemComp()</span><br><span class="line">          ScrollItemComp()</span><br><span class="line">          Button(&#x27;回到顶部&#x27;)</span><br><span class="line">            .onClick(() =&gt;&#123;</span><br><span class="line">              this.scroller.scrollEdge(Edge.Start)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;.padding(10)</span><br><span class="line">      &#125;</span><br><span class="line">      .layoutWeight(1)</span><br><span class="line">      jiaodi()</span><br><span class="line">    &#125;</span><br><span class="line">    .height(&#x27;100%&#x27;)</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">struct ScrollItemComp &#123;</span><br><span class="line">  build() &#123;</span><br><span class="line">    Column()&#123;</span><br><span class="line">      Text(&#x27;卡片&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(200)</span><br><span class="line">    .backgroundColor(Color.Pink)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="弹性布局文档中心"><a class="markdownIt-Anchor" href="#弹性布局文档中心"></a> 弹性布局<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-flex-layout">文档中心</a></h1><p>在渲染时存在二次布局过程，因此在对性能有严格要求的场景下建议使用Column、Row代替，<strong>不规则的时候需要换行</strong>，才使用，如下图所示：</p><img src="https://s2.loli.net/2025/12/31/Vv81ZChQKXl4MOy.webp" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Flex(&#123;</span><br><span class="line">    direction: FlexDirection.枚举值,//主轴方向</span><br><span class="line">    justifyContent: FlexAlign.枚举值,//主轴对齐方式</span><br><span class="line">    alignItems: ItemAlign.枚举值,//交叉轴对齐方式</span><br><span class="line">    wrap: FlexWrap.枚举值,//布局换行</span><br><span class="line">    space: &#123;</span><br><span class="line">        main: LengthMetrics.枚举值(数字), //主轴间距</span><br><span class="line">        cross: LengthMetrics.枚举值(数字)//交叉轴间距</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)&#123;</span><br><span class="line">    //组件</span><br><span class="line">&#125;</span><br><span class="line">//FlexWrap.NoWrap  单行布局</span><br><span class="line">//FlexWrap.Wrap   多行布局</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column()&#123;</span><br><span class="line">    Flex(&#123;</span><br><span class="line">        direction: FlexDirection.Row, //设置主轴方向</span><br><span class="line">        justifyContent: FlexAlign.SpaceAround,  //主轴对齐方式</span><br><span class="line">        alignItems: ItemAlign.End,  //交叉轴对齐方式</span><br><span class="line">        wrap: FlexWrap.NoWrap   //布局换行</span><br><span class="line">    &#125;)&#123;</span><br><span class="line">        Text()</span><br><span class="line">            .width(100)</span><br><span class="line">            .height(100)</span><br><span class="line">            .backgroundColor(     Color.Blue)</span><br><span class="line">            .margin(10)</span><br><span class="line">        Text()</span><br><span class="line">            .width(100)</span><br><span class="line">            .height(100)</span><br><span class="line">            .backgroundColor(Color.Orange)</span><br><span class="line">            .margin(10)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(500)</span><br><span class="line">    .backgroundColor(&#x27;#ece&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="相对布局文档中心"><a class="markdownIt-Anchor" href="#相对布局文档中心"></a> 相对布局<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-relative-layout">文档中心</a></h1><p>子元素可以指定兄弟元素或父容器作为锚点，基于锚点进行相对位置布局</p><p>父元素标识默认为“<strong>container</strong>”，其他子元素的组件标识（id）</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">RelativeContainer() &#123;</span><br><span class="line">&#125;</span><br><span class="line">.alignRules(&#123;   //相对于锚点的对齐位置</span><br><span class="line">  //自己的上top中center下bottom或 自己的左lef中middle右right</span><br><span class="line">  center: &#123;</span><br><span class="line">    anchor: &#x27;标识字符&#x27;, //参照物,__container__：参照父容器</span><br><span class="line">    align: VerticalAlign.枚举值  //对齐参照物哪条边，但移动是边的交叉轴方向</span><br><span class="line">    // align: HorizontalAlign.枚举值</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.id(&quot;标识字符&quot;)//子元素的组件标识</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Row()&#123;</span><br><span class="line">  Text(&#x27;1&#x27;)</span><br><span class="line">&#125;.width(&#x27;33%&#x27;).height(&#x27;33%&#x27;)</span><br><span class="line">.backgroundColor(Color.Red)</span><br><span class="line">.id(&#x27;row4&#x27;)</span><br><span class="line">.alignRules(&#123;</span><br><span class="line">  top:&#123;</span><br><span class="line">    anchor: &#x27;row2&#x27;,</span><br><span class="line">    align: VerticalAlign.Bottom</span><br><span class="line">  &#125;,</span><br><span class="line">  middle:&#123;</span><br><span class="line">    anchor: &#x27;row1&#x27;,</span><br><span class="line">    align: HorizontalAlign.Center</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="层叠布局文档中心"><a class="markdownIt-Anchor" href="#层叠布局文档中心"></a> 层叠布局<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-stack-layout">文档中心</a></h1><p>卡片层叠效果，层叠操作更简洁，编码效率高（绝对定位的优势是更灵活）</p><p>子元素的顺序为 Item1 -&gt; Item2 -&gt; Item3（越往后层级越高）也可以<strong>zIndex</strong>手动调层级(若手动则每一层都需要手动设置)</p><img src="https://s2.loli.net/2025/12/31/yVXIZKAnLiQ3D24.png" style="zoom: 50%;" /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Stack(&#123;</span><br><span class="line">    alignContent: Alignment.枚举值//层叠方向</span><br><span class="line">&#125;) &#123;</span><br><span class="line">    Item1()</span><br><span class="line">    Item2()</span><br><span class="line">    Item3()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column()&#123;</span><br><span class="line">    Stack(&#123;</span><br><span class="line">        alignContent: Alignment.Bottom</span><br><span class="line">    &#125;)&#123;</span><br><span class="line">        Text(&#x27;1&#x27;)</span><br><span class="line">            .width(250)</span><br><span class="line">            .height(250)</span><br><span class="line">            .backgroundColor(Color.Brown)</span><br><span class="line">        //.zIndex(1)</span><br><span class="line">        Text(&#x27;2&#x27;)</span><br><span class="line">            .width(200)</span><br><span class="line">            .height(200)</span><br><span class="line">            .backgroundColor(Color.Blue)</span><br><span class="line">        //.zIndex(2)</span><br><span class="line">        Text(&#x27;3&#x27;)</span><br><span class="line">            .width(150)</span><br><span class="line">            .height(150)</span><br><span class="line">            .backgroundColor(Color.Green)</span><br><span class="line">        //.zIndex(3)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="列表布局文档中心"><a class="markdownIt-Anchor" href="#列表布局文档中心"></a> 列表布局<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-list">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">控制名:Scroller = new Scroller()//创建Scroll控制器</span><br><span class="line">List(&#123; scroller: this.控制名 &#125;) &#123;</span><br><span class="line">  ListItem() &#123;</span><br><span class="line">    //列表</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.listDirection(Axis.枚举值)//列表方向，默认垂直方向</span><br><span class="line">.divider(&#123; </span><br><span class="line">  strokeWidth: 数字,//分割线宽度</span><br><span class="line">  color: 颜色格式 //分隔线颜色</span><br><span class="line">&#125;)</span><br><span class="line">.onScrollStart(() =&gt; &#123;&#125;)//滑动开始时触发</span><br><span class="line">.onScrollStop(() =&gt; &#123;&#125;)//滑动停止时触发</span><br><span class="line">.onReachEnd(() =&gt; &#123;&#125;)//到达末尾位置时触发</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@State isEnd: boolean = false</span><br><span class="line">List() &#123;</span><br><span class="line">  ListItem() &#123;</span><br><span class="line">    Text(&#x27;北京&#x27;).fontSize(24)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.divider(&#123; strokeWidth: 10, color: Color.Blue &#125;)</span><br><span class="line">//下拉更新数据</span><br><span class="line">.onScrollStart(() =&gt; &#123;</span><br><span class="line">  this.isEnd = false</span><br><span class="line">&#125;)</span><br><span class="line">.onScrollStop(() =&gt; &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    if (this.isEnd) &#123;</span><br><span class="line">      const list: number[] = Array(10).fill(Math.random())</span><br><span class="line">      this.list.push(...list)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;)</span><br><span class="line">.onReachEnd(() =&gt; &#123;</span><br><span class="line">  this.isEnd = true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="网格栅格布局文档中心"><a class="markdownIt-Anchor" href="#网格栅格布局文档中心"></a> 网格+栅格布局<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-grid">文档中心</a></h1><p>一般使用在固定行列的布局</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//网格</span><br><span class="line">Grid()&#123;</span><br><span class="line">    GridItem()&#123;//每个小方格</span><br><span class="line">        //小方格中写的内容</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">.columnsTemplate(&#x27;1fr 1fr 1fr&#x27;)//列有几个1fr就有几个小方格，1代表小方格所占的空间份数</span><br><span class="line">.columnsGap(10)//列方向小方块之间的间隙</span><br><span class="line">.rowsTemplate(&#x27;1fr 1fr 1fr&#x27;)//行有几个1fr就有几个小方格，1代表小方格所占的空间份数</span><br><span class="line">.rowsGap(10)//行方向小方块之间的间隙</span><br><span class="line">//栅格</span><br><span class="line">GridRow(&#123; columns: 数字, gutter: 数字&#125;)&#123;</span><br><span class="line">    GridCol()&#123;</span><br><span class="line">        //栅格中写的内容</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">GridRow(&#123; columns: &#123;</span><br><span class="line">    xs: 数字,</span><br><span class="line">    sm: 数字,</span><br><span class="line">    md: 数字,</span><br><span class="line">    lg: 数字,</span><br><span class="line">    xl: 数字,</span><br><span class="line">    xxl: 数字</span><br><span class="line">&#125;, gutter: 数字&#125;)</span><br><span class="line">//columns: 数字，设置列个数</span><br><span class="line">//gutter: 数字，设置间距</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//网格</span><br><span class="line">Grid()&#123;</span><br><span class="line">    GridItem()&#123;</span><br><span class="line">        Column()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        .width(80)</span><br><span class="line">        .height(80)</span><br><span class="line">        .backgroundColor(Color.Green)</span><br><span class="line">    &#125;</span><br><span class="line">    GridItem()&#123;</span><br><span class="line">        Column()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        .width(80)</span><br><span class="line">        .height(80)</span><br><span class="line">        .backgroundColor(Color.Green)</span><br><span class="line">    &#125;</span><br><span class="line">    //...</span><br><span class="line">&#125;</span><br><span class="line">.columnsTemplate(&#x27;1fr 1fr 1fr&#x27;)</span><br><span class="line">.columnsGap(10)</span><br><span class="line">.rowsTemplate(&#x27;1fr 1fr 1fr&#x27;)</span><br><span class="line">.rowsGap(10)</span><br><span class="line"></span><br><span class="line">//栅格</span><br><span class="line">GridRow(&#123; columns: 3, gutter: 10&#125;)&#123;</span><br><span class="line">  GridCol()&#123;</span><br><span class="line">    Column()&#123;</span><br><span class="line">      Text(&#x27;卡片&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(200)</span><br><span class="line">    .backgroundColor(Color.Pink)</span><br><span class="line">  &#125;</span><br><span class="line">  GridCol()&#123;</span><br><span class="line">    Column()&#123;</span><br><span class="line">      Text(&#x27;卡片&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;100%&#x27;)</span><br><span class="line">    .height(200)</span><br><span class="line">    .backgroundColor(Color.Pink)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="软键盘避让模式文档中心"><a class="markdownIt-Anchor" href="#软键盘避让模式文档中心"></a> 软键盘避让模式<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-keyboard-layout-adapt">文档中心</a></h1><ol><li>在 EntryAbility 的使用：</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; KeyboardAvoidMode, window &#125; from &#x27;@kit.ArkUI&#x27;</span><br><span class="line">import &#123; UIAbility &#125; from &#x27;@kit.AbilityKit&#x27;</span><br><span class="line"></span><br><span class="line">export default class EntryAbility extends UIAbility &#123;</span><br><span class="line">  onWindowStageCreate(windowStage: window.WindowStage): void &#123;</span><br><span class="line">    windowStage.loadContent(&#x27;pages/Index&#x27;, (err) =&gt; &#123;</span><br><span class="line">      // 压缩模式</span><br><span class="line">      windowStage.getMainWindowSync().getUIContext().setKeyboardAvoidMode(KeyboardAvoidMode.RESIZE);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>在组件中使用：</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; KeyboardAvoidMode, window &#125; from &#x27;@kit.ArkUI&#x27;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">export struct TestComp &#123;</span><br><span class="line">  aboutToAppear(): void &#123;</span><br><span class="line">    window.getLastWindow(getContext())</span><br><span class="line">      .then(win =&gt; &#123;</span><br><span class="line">        win.getUIContext().setKeyboardAvoidMode(KeyboardAvoidMode.RESIZE)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="收起软键盘文档中心"><a class="markdownIt-Anchor" href="#收起软键盘文档中心"></a> 收起软键盘<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-keyboard-layout-adapt#section19809195110316">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this.getUIContext().getFocusController().clearFocus(); //收起软键盘</span><br></pre></td></tr></table></figure><h1 id="应用沉浸式效果文档中心"><a class="markdownIt-Anchor" href="#应用沉浸式效果文档中心"></a> 应用沉浸式效果<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-develop-apply-immersive-effects">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.expandSafeArea([SafeAreaType.SYSTEM])    //隐藏状态和控制栏</span><br><span class="line">.expandSafeArea([SafeAreaType.SYSTEM], [SafeAreaEdge.TOP, SafeAreaEdge.BOTTOM])    //隐藏状态和控制栏</span><br></pre></td></tr></table></figure><h1 id="应用深浅色适配文档中心"><a class="markdownIt-Anchor" href="#应用深浅色适配文档中心"></a> 应用深浅色适配<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ui-dark-light-color-adaptation">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void &#123;</span><br><span class="line">  AppStorage.setOrCreate(&#x27;context&#x27;, this.context)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">aboutToAppear() &#123;</span><br><span class="line">  theme.initTheme()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; ConfigurationConstant &#125; from &#x27;@kit.AbilityKit&#x27;</span><br><span class="line"></span><br><span class="line">export const ColorModeKey = &#x27;hc-color-mode&#x27;</span><br><span class="line"></span><br><span class="line">class Theme &#123;</span><br><span class="line">  initTheme() &#123;</span><br><span class="line">    // 持久化颜色主题，默认值亮色模式</span><br><span class="line">    PersistentStorage.persistProp&lt;ConfigurationConstant.ColorMode&gt;(ColorModeKey,</span><br><span class="line">      ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT)</span><br><span class="line">    // 取出现在应用存储的颜色主题模式</span><br><span class="line">    const colorMode = AppStorage.get&lt;ConfigurationConstant.ColorMode&gt;(ColorModeKey)</span><br><span class="line">    // 设置应用颜色主题模式</span><br><span class="line">    this.setTheme(colorMode!)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  setTheme(mode: ConfigurationConstant.ColorMode) &#123;</span><br><span class="line">    AppStorage.set&lt;ConfigurationConstant.ColorMode&gt;(ColorModeKey, mode)</span><br><span class="line">    const ctx = AppStorage.get&lt;Context&gt;(&#x27;context&#x27;)</span><br><span class="line">    ctx?.getApplicationContext().setColorMode(mode)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 跟随系统</span><br><span class="line">  notSet() &#123;</span><br><span class="line">    this.setTheme(ConfigurationConstant.ColorMode.COLOR_MODE_NOT_SET)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 暗色</span><br><span class="line">  setDark() &#123;</span><br><span class="line">    this.setTheme(ConfigurationConstant.ColorMode.COLOR_MODE_DARK)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 亮色</span><br><span class="line">  setLight() &#123;</span><br><span class="line">    this.setTheme(ConfigurationConstant.ColorMode.COLOR_MODE_LIGHT)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const theme = new Theme()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3.UI组件</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/3-UI%E7%BB%84%E4%BB%B6/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/3-UI%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>Ctrl+p：提示方法</p><p><a href="https://meichuangit.net.cn/">莓创图表</a></p><h1 id="自定义组件点击"><a class="markdownIt-Anchor" href="#自定义组件点击"></a> 自定义组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-custom-components">点击</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Component</span><br><span class="line">struct 自定义组件名&#123;</span><br><span class="line">    build() &#123;</span><br><span class="line">        //内容</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//export：导出组件，申明导出后再使用会自动导入</span><br><span class="line">export default 组件名</span><br></pre></td></tr></table></figure><h1 id="组件重用样式文档中心"><a class="markdownIt-Anchor" href="#组件重用样式文档中心"></a> 组件重用样式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-style">文档中心</a></h1><p>只能在当前文件内使用，不支持export 和传参，仅支持<strong>通用属性</strong>和<strong>通用事件</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Styles</span><br><span class="line">函数名()&#123;</span><br><span class="line">  //通用样式和事件抽离</span><br><span class="line">&#125;</span><br><span class="line">.函数名()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Styles</span><br><span class="line">styleFunction()&#123;</span><br><span class="line">  .width(&#x27;100%&#x27;)</span><br><span class="line">  .height(&#x27;100%&#x27;)</span><br><span class="line">  .backgroundColor(Color.Blue)</span><br><span class="line">&#125;</span><br><span class="line">.styleFunction()//调用</span><br></pre></td></tr></table></figure><h1 id="扩展组件样式"><a class="markdownIt-Anchor" href="#扩展组件样式"></a> 扩展组件样式</h1><p>不支持export，扩展 组件的 样式、事件，实现 复用 效果</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Extend(组件名称)</span><br><span class="line">function styleFunction01(形参: 类型, ...) &#123;</span><br><span class="line">  //属性和事件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Extend(Button)</span><br><span class="line">function styleFunction01(bgc: string) &#123;</span><br><span class="line">  .width(&#x27;100%&#x27;)</span><br><span class="line">  .backgroundColor(bgc)</span><br><span class="line">&#125;</span><br><span class="line">.styleFunction01(&#x27;#3c3c&#x27;)//调用</span><br></pre></td></tr></table></figure><h1 id="自定义构建函数"><a class="markdownIt-Anchor" href="#自定义构建函数"></a> 自定义构建函数</h1><p>@Builder装饰器有两种使用方式，分别是定义在自定义组件内部的私有自定义构建函数和定义在全局的全局自定义构建函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//全局</span><br><span class="line">@Builder</span><br><span class="line">function 自定义函数名(参数)&#123;</span><br><span class="line">    //封装的结构以及组件 样式等</span><br><span class="line">&#125;</span><br><span class="line">//局部</span><br><span class="line">@Builder</span><br><span class="line">自定义函数名(参数)&#123;</span><br><span class="line">    //封装的结构以及组件 样式等</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Builder</span><br><span class="line">function navItem(icon: ResourceStr, text: string)&#123;</span><br><span class="line">    Column()&#123;</span><br><span class="line">        Image(icon)</span><br><span class="line">            .width(&#x27;80%&#x27;)</span><br><span class="line">        Text(text)</span><br><span class="line">    &#125;</span><br><span class="line">    .width(&#x27;25%&#x27;)</span><br><span class="line">    .onClick(() =&gt;&#123;</span><br><span class="line">        AlertDialog.show(&#123;message: &#x27;点了&#x27; + text&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="循环渲染"><a class="markdownIt-Anchor" href="#循环渲染"></a> 循环渲染</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//item：arr数组中的数据项，index：arr数组中的数据项索引</span><br><span class="line">ForEach(数组, (item: 类型, index: 类型)=&gt;&#123;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line">Array.from(&#123; length: 10 &#125;：生成个数10的数组，里面没有赋值</span><br><span class="line">value: string：数组里的值，index: number：下标索引，返回 index作为数组的值</span><br><span class="line">item: number：下标索引</span><br><span class="line">*/</span><br><span class="line">ForEach(Array.from(&#123; length: 10 &#125;, (value: string, index: number) =&gt; index), (item: number) =&gt; &#123;</span><br><span class="line">  Text(item.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="文本点击"><a class="markdownIt-Anchor" href="#文本点击"></a> 文本<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-use-text">点击</a></h1><h2 id="文本显示"><a class="markdownIt-Anchor" href="#文本显示"></a> 文本显示</h2><p>新版中默认创建不会自动创建 en 国际化文件夹，需要在 **resources **右键新建 资源目录 选择对用的语言，后在新创建的资源文件夹中创建一个 <strong>string.json</strong>，再将 <strong>resources</strong>\element 中的 <strong>string.json</strong> 中内容复制到新的 string.json 文件中，即可编辑国际化对应的文本</p><img src="https://s2.loli.net/2025/12/31/vmU4uLsj8d3EQK7.png" style="zoom: 50%;" /><img src="https://s2.loli.net/2025/12/31/U7JNdST3APacGoq.png" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Text(&#x27;文本&#x27;)</span><br><span class="line">//Text与Span同时配置文本内容时，Span内容覆盖Text内容</span><br><span class="line">Text()&#123;</span><br><span class="line">    Span(&#x27;文本&#x27;)</span><br><span class="line">        .decoration(&#123; </span><br><span class="line">            type: TextDecorationType.枚举值,//划线位置</span><br><span class="line">            color: 颜色格式 //文本划线颜色</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br><span class="line">Text($r(&#x27;app.string.枚举值&#x27;))//根据系统不同语言显示不同文本</span><br><span class="line">.borderWidth(数字)//线框</span><br><span class="line">.lineHeight(数字)//行高</span><br><span class="line">.fontSize(数字)//字体大小</span><br><span class="line">.textAlign(TextAlign.枚举值)//文本对齐</span><br><span class="line">.fontColor(颜色格式)//字体颜色</span><br><span class="line">.fontWeight(数字)               //字体粗细</span><br><span class="line">.maxLines(数字)//显示最大的行数</span><br><span class="line">.textOverflow(&#123; overflow: TextOverflow.枚举值 &#125;)//配合maxLines字体超出行数的样式</span><br><span class="line">.fontStyle(FontStyle.Italic)//字体倾斜</span><br><span class="line">.borderWidth(数字)//线框</span><br><span class="line">.copyOption(CopyOptions.枚举值)//是否可以复制</span><br></pre></td></tr></table></figure><h2 id="文本输入"><a class="markdownIt-Anchor" href="#文本输入"></a> 文本输入</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TextArea()       // 多行输入框</span><br><span class="line"></span><br><span class="line">TextInput(&#123;placeholder: &#x27;占位符文本&#x27;, text: &#x27;输入文本内容&#x27;&#125;)//单行输入框</span><br><span class="line">.placeholderColor(颜色格式)//提示文本颜色</span><br><span class="line">.type(InputType.枚举值)//输入框类型</span><br><span class="line">//事件</span><br><span class="line">//文本内容发生变化时触发</span><br><span class="line">.onChange((value) =&gt; &#123;//value为输入框内容</span><br><span class="line">&#125;)</span><br><span class="line">// 按下输入法回车键时触发</span><br><span class="line">.onSubmit(() =&gt; &#123;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TextInput(&#123; placeholder: &#x27;请输入用户名&#x27;, text: &#x27;输入文本内容&#x27; &#125;)</span><br><span class="line">  .onChange((value) =&gt; &#123;</span><br><span class="line">    promptAction.showToast(&#123;  //轻提示</span><br><span class="line">      message: value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .onSubmit(() =&gt; &#123;</span><br><span class="line">    promptAction.showToast(&#123;</span><br><span class="line">      message: &#x27;onsubmit&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h1 id="下拉选择菜单点击"><a class="markdownIt-Anchor" href="#下拉选择菜单点击"></a> 下拉选择菜单<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-select">点击</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Select([&#123; value: &#x27;下拉框值&#x27; &#125;, ...])</span><br><span class="line">  .value(&#x27;下拉框值&#x27;)//默认显示</span><br><span class="line">  .optionWidth(200)//下拉框宽度</span><br><span class="line">  .optionHeight(200)//下拉框高度</span><br><span class="line">  .menuAlign(MenuAlignType.CENTER)//下拉框对齐方式</span><br><span class="line">  .onSelect((index: number) =&gt; &#123;//选择回调</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Select([&#123; value: &#x27;男&#x27; &#125;, &#123; value: &#x27;女&#x27; &#125;])</span><br><span class="line">  .value(&#x27;女&#x27;)</span><br></pre></td></tr></table></figure><h1 id="图片组件点击"><a class="markdownIt-Anchor" href="#图片组件点击"></a> 图片组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">点击</a></h1><p>工程中图片存放路径：<code>src/main/resources/base/media</code> 中，<a href="https://developer.huawei.com/consumer/cn/design/harmonyos-icon/">HarmonyOS_icon素材</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions">申请权限</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Image(&#x27;图片网址&#x27;)//网络图片资源，需要申请权限ohos.permission.INTERNET</span><br><span class="line">Image( $r(&#x27;app.media.文件名&#x27;) )//本地图片资源</span><br><span class="line">.fillColor(颜色格式)//若图片为svg格式可使用这个填充颜色</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column() &#123;</span><br><span class="line">    Image(&#x27;https://www.itheima.com/images/logo.png&#x27;)</span><br><span class="line">        .width(200)//只需设置宽或高 就会等比例缩放</span><br><span class="line">    Image($r(&#x27;app.media.background&#x27;))</span><br><span class="line">      .fillColor(&#x27;#b0473d&#x27;)</span><br><span class="line">      .width(200)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="按钮组件文档中心"><a class="markdownIt-Anchor" href="#按钮组件文档中心"></a> 按钮组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-button">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Button(&#x27;按钮展示的文本&#x27;, </span><br><span class="line">  &#123; </span><br><span class="line">    type: ButtonType.枚举值,//按钮形状 </span><br><span class="line">    stateEffect: true //是否开启按压态显示效果</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Button(&#x27;OK&#x27;, &#123; type: ButtonType.Normal, stateEffect: true &#125;)</span><br></pre></td></tr></table></figure><h1 id="下拉选择菜单文档中心"><a class="markdownIt-Anchor" href="#下拉选择菜单文档中心"></a> 下拉选择菜单<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-select">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Select([</span><br><span class="line">  &#123;value:&#x27;菜单文本&#x27;,icon:$r(&#x27;app.media.MQTT&#x27;)</span><br><span class="line">&#125;])</span><br><span class="line">.value(&#x27;未选择显示的文本&#x27;)</span><br><span class="line">.menuAlign(MenuAlignType.枚举值)//下拉菜单对齐方式</span><br><span class="line">.optionWidth(200)//下拉菜单宽度</span><br><span class="line">.optionHeight(200)//下拉菜单高度</span><br><span class="line">.menuAlign(MenuAlignType.枚举值)//下拉菜单对齐方式</span><br><span class="line">.onSelect((index: number) =&gt; &#123;//选中回调函数</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Select([</span><br><span class="line">  &#123;value:&#x27;MQTT&#x27;,icon:$r(&#x27;app.media.MQTT&#x27;)</span><br><span class="line">&#125;]).layoutWeight(1)</span><br><span class="line">.value(&#x27;请选择&#x27;).menuAlign(MenuAlignType.CENTER)</span><br><span class="line">.optionWidth(200)</span><br></pre></td></tr></table></figure><h1 id="进度条组件文档中心"><a class="markdownIt-Anchor" href="#进度条组件文档中心"></a> 进度条组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-progress">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Progress(&#123;</span><br><span class="line">  total: 数字,//指定进度总长</span><br><span class="line">  value: 数字,//指定当前进度值</span><br><span class="line">  type: ProgressType.枚举值//指定进度条类型</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Progress(&#123;</span><br><span class="line">  total: 100,</span><br><span class="line">  value: this.value,</span><br><span class="line">  type: ProgressType.Ring</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="加载动效组件文档中心"><a class="markdownIt-Anchor" href="#加载动效组件文档中心"></a> 加载动效组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-loadingprogress">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LoadingProgress()</span><br><span class="line">.color(颜色格式)</span><br></pre></td></tr></table></figure><h1 id="下拉刷新组件文档中心"><a class="markdownIt-Anchor" href="#下拉刷新组件文档中心"></a> 下拉刷新组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-refresh">文档中心</a></h1><p>页面下拉操作并显示刷新动效的容器组件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@State 变量名: boolean = false</span><br><span class="line">//builder：自定义刷新区域显示内容</span><br><span class="line">Refresh(</span><br><span class="line">  &#123; refreshing: $$this.变量名, promptText: &#x27;下拉刷新展示文本&#x27;, builder: this.自定义函数名() </span><br><span class="line">  &#125;) &#123;</span><br><span class="line">  //刷新的组件</span><br><span class="line">&#125;</span><br><span class="line">.refreshOffset(数字)        //当下拉距离小于该属性设置值时离手不会触发刷新</span><br><span class="line">.onRefreshing(() =&gt; &#123;//进入刷新状态时触发回调</span><br><span class="line">  //数据更新地方</span><br><span class="line">  //手动关闭刷新状态</span><br><span class="line">  this.变量名 = false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@State list: number[] = Array(20).fill(Math.random())</span><br><span class="line">@State isRefresh: boolean = false</span><br><span class="line"></span><br><span class="line">@Builder</span><br><span class="line">refreshConten() &#123;</span><br><span class="line">  Row(&#123; space: 8 &#125;) &#123;</span><br><span class="line">    LoadingProgress()</span><br><span class="line">      .width(20)</span><br><span class="line">    Text(&#x27;正在玩命加载...&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  .width(&#x27;100%&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">Refresh(&#123; refreshing: $$this.isRefresh, promptText: &#x27;正在刷新&#x27;, builder: this.refreshConten() &#125;) &#123;</span><br><span class="line">  List() &#123;</span><br><span class="line">    ForEach(this.list, (item: number) =&gt; &#123;</span><br><span class="line">      ListItem() &#123;</span><br><span class="line">        Text(item.toString())</span><br><span class="line">          .height(100)</span><br><span class="line">          .width(&quot;100%&quot;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  .divider(&#123; strokeWidth: 2 &#125;)</span><br><span class="line">&#125;</span><br><span class="line">.refreshOffset(150)</span><br><span class="line">.onRefreshing(() =&gt; &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    //数据更新地方</span><br><span class="line">    this.list = Array(20).fill(Math.random())</span><br><span class="line">    //手动关闭刷新状态</span><br><span class="line">    this.isRefresh = false</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="角标组件"><a class="markdownIt-Anchor" href="#角标组件"></a> 角标组件</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Badge(&#123;</span><br><span class="line">    count: 数字,//角标数值</span><br><span class="line">    position: BadgePosition.枚举值,//角标位置</span><br><span class="line">    style: &#123;</span><br><span class="line">        fontSize: 14,//角标文字大小</span><br><span class="line">        badgeSize: 20,// 角标大小</span><br><span class="line">        badgeColor:&#x27;#fa2a2d&#x27;// 角标底色</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)&#123;</span><br><span class="line">    //这里写角标下面的图片</span><br><span class="line">    Image(图片链接)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Badge(&#123;</span><br><span class="line">    count: 1,</span><br><span class="line">    position: BadgePosition.RightTop,</span><br><span class="line">    style: &#123;</span><br><span class="line">        fontSize: 14,</span><br><span class="line">        badgeSize: 20,</span><br><span class="line">        badgeColor:&#x27;#fa2a2d&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)&#123;</span><br><span class="line">    Image($r(&#x27;app.media.bg_00&#x27;))</span><br><span class="line">        .width(100)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="勾选开关组件文档中心"><a class="markdownIt-Anchor" href="#勾选开关组件文档中心"></a> 勾选开关组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-common-components-switch">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Toggle(&#123;</span><br><span class="line">  type: ToggleType.枚举值, //开关样式</span><br><span class="line">  isOn: true    //默认开关状态</span><br><span class="line">&#125;)</span><br><span class="line">.selectedColor(颜色格式)//打开状态的背景颜色</span><br><span class="line">.switchPointColor(颜色格式)//圆形滑块颜色,仅对type为ToggleType.Switch生效</span><br><span class="line">.switchStyle(&#123;</span><br><span class="line">  //仅对type为ToggleType.Switch生效</span><br><span class="line">  pointRadius: 数字, //圆形滑块半径</span><br><span class="line">  unselectedColor: 颜色格式, //关闭状态的背景颜色</span><br><span class="line">  trackBorderRadius: 数字   //滑轨的圆角</span><br><span class="line">&#125;)</span><br><span class="line">.onChange((isOn: boolean) =&gt; &#123;</span><br><span class="line">    if(isOn) &#123;</span><br><span class="line">      // 需要执行的操作</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Toggle(&#123;</span><br><span class="line">  type: ToggleType.Switch, //样式</span><br><span class="line">  isOn: true    //默认开关状态</span><br><span class="line">&#125;)</span><br><span class="line">  .selectedColor(Color.Red)//打开状态的背景颜色</span><br><span class="line">  .switchPointColor(Color.Gray)//圆形滑块颜色,仅对type为ToggleType.Switch生效</span><br><span class="line">  .switchStyle(&#123;</span><br><span class="line">    //仅对type为ToggleType.Switch生效</span><br><span class="line">    pointRadius: 5, //圆形滑块半径</span><br><span class="line">    unselectedColor: Color.Pink, //关闭状态的背景颜色</span><br><span class="line">    trackBorderRadius: 10   //滑轨的圆角</span><br><span class="line">  &#125;)</span><br><span class="line">Toggle(&#123; type: ToggleType.Button, isOn: false &#125;) &#123;</span><br><span class="line">  Text(&#x27;status button&#x27;).fontColor(&#x27;#182431&#x27;).fontSize(12)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="分段按钮文档中心"><a class="markdownIt-Anchor" href="#分段按钮文档中心"></a> 分段按钮<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-arkui-advanced-segmentbuttonv2#capsulesegmentbuttonv2">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 必须 @ComponentV2 修饰</span><br><span class="line">@Local textItems: SegmentButtonV2Items = new SegmentButtonV2Items([</span><br><span class="line">  &#123; text: &#x27;手机&#x27; &#125;,</span><br><span class="line">  &#123; text: &#x27;平板&#x27; &#125;,</span><br><span class="line">  &#123; text: &#x27;2in1&#x27; &#125;,</span><br><span class="line">  &#123; text: &#x27;智能穿戴&#x27; &#125;,</span><br><span class="line">],);</span><br><span class="line">@Local textSelectedIndex: number = 0;</span><br><span class="line">CapsuleSegmentButtonV2(&#123;</span><br><span class="line">  items: this.textItems,</span><br><span class="line">  selectedIndex: this.textSelectedIndex!!,</span><br><span class="line">  onItemClicked: (index: number) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;点击了选项:&#x27;, index);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 不需要 @ComponentV2 修饰</span><br><span class="line">@State textSelectedIndex: number = 0;</span><br><span class="line">CapsuleSegmentButtonV2(&#123;</span><br><span class="line">  items: new SegmentButtonV2Items([</span><br><span class="line">    &#123; text: &#x27;关闭&#x27; &#125;,</span><br><span class="line">    &#123; text: &#x27;红色&#x27; &#125;,</span><br><span class="line">  ]),</span><br><span class="line">  selectedIndex: this.textSelectedIndex!!,</span><br><span class="line">  onItemClicked: async (index: number) =&gt; &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="轮播组件文档中心"><a class="markdownIt-Anchor" href="#轮播组件文档中心"></a> 轮播组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-layout-development-create-looping">文档中心</a></h1><p>容器组件，当设置了多个子组件后，可以对子组件 进行轮播显示</p><h2 id="语法"><a class="markdownIt-Anchor" href="#语法"></a> 语法</h2><p>一般轮播要设置宽高比例</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Swiper() &#123;</span><br><span class="line">    //  轮播内容</span><br><span class="line">&#125;</span><br><span class="line">//设置尺寸（内容会自动拉伸）</span><br><span class="line"></span><br><span class="line">Swiper()&#123;</span><br><span class="line">    Text(&#x27;1&#x27;)</span><br><span class="line">    Text(&#x27;2&#x27;)</span><br><span class="line">    Text(&#x27;3&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">.width(&#x27;100%&#x27;)</span><br><span class="line">.height(100)</span><br></pre></td></tr></table></figure><h2 id="基本属性"><a class="markdownIt-Anchor" href="#基本属性"></a> 基本属性</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//是否开启循环</span><br><span class="line">.loop(false)//默认true</span><br><span class="line"></span><br><span class="line">//是否自动播放</span><br><span class="line">.autoPlay(true)//默认false</span><br><span class="line"></span><br><span class="line">//自动播放的时间间隔（ms）</span><br><span class="line">.interval(1000)//3000</span><br><span class="line"></span><br><span class="line">//纵向滑动轮播</span><br><span class="line">.vertical(true)//默认false</span><br></pre></td></tr></table></figure><h2 id="样式自定义"><a class="markdownIt-Anchor" href="#样式自定义"></a> 样式自定义</h2><p>一般选中的比默认的要高一点点，动画会好些</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Swiper() &#123;</span><br><span class="line">   // ...</span><br><span class="line">&#125;</span><br><span class="line">.indicator(</span><br><span class="line">    Indicator.dot()// 小圆点</span><br><span class="line">    .itemWidth(20)// 默认的宽</span><br><span class="line">    .itemHeight(20)// 默认的高</span><br><span class="line">    .color(Color.Black)// 默认的颜色</span><br><span class="line">    .selectedItemWidth(30)// 选中的宽</span><br><span class="line">    .selectedItemHeight(30)// 选中的高</span><br><span class="line">    .selectedColor(Color.White)// 选中的颜色</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="动画"><a class="markdownIt-Anchor" href="#动画"></a> 动画</h1><p>元素配合点击事件来改变 缩放中xy值、透明度、层级等等的值 再配置动画才有效果</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//元素有状态的改变，可以添加animation做动画</span><br><span class="line">.animation(&#123;</span><br><span class="line">    duration: 300//动画时间，单位毫秒</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//缩放</span><br><span class="line">.scale(&#123;</span><br><span class="line">    x: 1,//1：原组件大小</span><br><span class="line">    y: 1</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="分类容器组件"><a class="markdownIt-Anchor" href="#分类容器组件"></a> 分类容器组件</h1><p>当页面内容较多时，可以通过<code>Tabs</code>组件进行 分类展示</p><h2 id="语法-2"><a class="markdownIt-Anchor" href="#语法-2"></a> 语法</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tabs()&#123;</span><br><span class="line">    TabContent()&#123;</span><br><span class="line">        //导航显示的内容</span><br><span class="line">    &#125;</span><br><span class="line">    .tabBar(导航按钮样式)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Tabs()&#123;</span><br><span class="line">    TabContent()&#123;</span><br><span class="line">        Text(&#x27;首页内容&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .tabBar(&#x27;首页&#x27;)</span><br><span class="line">    TabContent()&#123;</span><br><span class="line">        Text(&#x27;推荐内容&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    .tabBar(&#x27;推荐&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="常用属性"><a class="markdownIt-Anchor" href="#常用属性"></a> 常用属性</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//调整导航栏位置(垂直：左还是右，水平：上方、下方)</span><br><span class="line">Tabs(&#123;barPosition: BarPosition.枚举值&#125;)</span><br><span class="line"></span><br><span class="line">//设置导航栏方向，true：垂直，flase：水平</span><br><span class="line">.vertical(false)</span><br><span class="line"></span><br><span class="line">//设置导航栏是否允许滑动</span><br><span class="line">.scrollable(true)</span><br><span class="line"></span><br><span class="line">//导航切换动画时间</span><br><span class="line">.animationDuration(1)</span><br><span class="line"></span><br><span class="line">//TabBar的背景颜色</span><br><span class="line">.barBackgroundColor(&#x27;#ffffffff&#x27;)</span><br><span class="line"></span><br><span class="line">//设置导航栏是否滚动</span><br><span class="line">.barMode(BarMode.枚举值)//Scrollable：滚动</span><br></pre></td></tr></table></figure><h2 id="自定义tabbar"><a class="markdownIt-Anchor" href="#自定义tabbar"></a> 自定义TabBar</h2><p>导航栏显示 图形 和 文字，甚至有 特殊的图标，若有</p><p>onChange：滑动切换、点击切换 均会触发</p><p>onTabBarClick：只有点击才会触发</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Builder</span><br><span class="line">自定义函数名() &#123;</span><br><span class="line">    // 自定义的Tabbar结构</span><br><span class="line">&#125;</span><br><span class="line">Tabs() &#123;</span><br><span class="line">    TabContent() &#123;</span><br><span class="line">        // 内容略</span><br><span class="line">    &#125;.</span><br><span class="line">    tabBar(this.自定义函数名())</span><br><span class="line">&#125;</span><br><span class="line">.onChange((index: number) =&gt; &#123;//index索引值，从0开始，但代表的是导航栏1开始</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//存储激活的索引值</span><br><span class="line">@State selectedIndex:number = 0</span><br><span class="line">@Builder</span><br><span class="line">mytabs(itemIndex: number, name: string,url: ResourceStr,selurl: ResourceStr)&#123;</span><br><span class="line">    Column(&#123;space: 5&#125;)&#123;</span><br><span class="line">        Image(itemIndex == this.selectedIndex? selurl : url)</span><br><span class="line">            .width(30)</span><br><span class="line">        Text(name)</span><br><span class="line">            .fontSize(12)</span><br><span class="line">        //通过传递本身和获取到的索引作比较，从而知道选中的是哪个</span><br><span class="line">            .fontColor(itemIndex == this.selectedIndex? Color.Red: Color.Black)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">build() &#123;</span><br><span class="line">    Tabs()&#123;</span><br><span class="line">        TabContent()&#123;</span><br><span class="line">            Text(&#x27;购物车内容&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        .tabBar(this.mytabs(0,&#x27;购物车&#x27;,$r(&#x27;app.media.ic_tabbar_icon_2&#x27;),$r(&#x27;app.media.ic_tabbar_icon_2_selected&#x27;)))</span><br><span class="line">        TabContent()&#123;</span><br><span class="line">            Text(&#x27;我的内容&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        .tabBar(this.mytabs(1,&#x27;我的&#x27;,$r(&#x27;app.media.ic_tabbar_icon_3&#x27;),$r(&#x27;app.media.ic_tabbar_icon_3_selected&#x27;)))</span><br><span class="line">    &#125;</span><br><span class="line">    .onChange((index: number) =&gt; &#123;</span><br><span class="line">        this.selectedIndex = index</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2.事件</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/2-%E4%BA%8B%E4%BB%B6/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/2-%E4%BA%8B%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="通用事件"><a class="markdownIt-Anchor" href="#通用事件"></a> 通用事件</h1><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-events">通用事件API</a></p><h2 id="组件区域变化事件文档中心"><a class="markdownIt-Anchor" href="#组件区域变化事件文档中心"></a> 组件区域变化事件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-area-change-event">文档中心</a></h2><p>组件区域变化时触发</p><ul><li>返回目标元素变化之前的宽高以及目标元素相对父元素和页面左上角的坐标位置</li><li>返回目标元素变化之后的宽高以及目标元素相对父元素和页面左上角的坐标位置</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.onAreaChange((_oldValue, _newValue) =&gt; &#123;</span><br><span class="line">  // onAreaChange可能会触发多次，所以不要批量使用</span><br><span class="line">  promptAction.showDialog(&#123;</span><br><span class="line">    message: `</span><br><span class="line">      宽度:$&#123;_oldValue.width&#125; - $&#123;_newValue.width&#125;</span><br><span class="line">      高度:$&#123;_oldValue.height&#125; - $&#123;_newValue.height&#125;</span><br><span class="line">      X坐标:$&#123;_oldValue.globalPosition.x&#125; - $&#123;_newValue.globalPosition.x&#125;</span><br><span class="line">      Y坐标:$&#123;_oldValue.globalPosition.y&#125; - $&#123;_newValue.globalPosition.y&#125;</span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="手势事件文档中心"><a class="markdownIt-Anchor" href="#手势事件文档中心"></a> 手势事件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-gesture-events">文档中心</a></h1><h2 id="单一手势"><a class="markdownIt-Anchor" href="#单一手势"></a> 单一手势</h2><h3 id="长按手势"><a class="markdownIt-Anchor" href="#长按手势"></a> 长按手势</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// fingers: 1，触发长按手势所需要的最少手指数量</span><br><span class="line">// repeat: true，否连续触发事件回调</span><br><span class="line">// priority: 500，触发长按所需的最短时间，单位为毫秒，默认值为500</span><br><span class="line">.gesture(LongPressGesture(&#123; repeat: true &#125;).onAction((event: GestureEvent | undefined) =&gt; &#123;</span><br><span class="line">  if (event) &#123;</span><br><span class="line">    if (event.repeat) &#123;</span><br><span class="line">      console.log(&#x27;长按&#x27;, item.deviceViewId.toString());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h2 id="组合手势"><a class="markdownIt-Anchor" href="#组合手势"></a> 组合手势</h2><h3 id="互斥识别"><a class="markdownIt-Anchor" href="#互斥识别"></a> 互斥识别</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.gesture(</span><br><span class="line">  GestureGroup(GestureMode.Exclusive,</span><br><span class="line">    TapGesture(&#123; count: 1 &#125;)</span><br><span class="line">      .onAction(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;单击&#x27;);</span><br><span class="line">      &#125;),</span><br><span class="line">    LongPressGesture()</span><br><span class="line">      .onAction(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;长按&#x27;);</span><br><span class="line">      &#125;)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.通用属性</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/1-%E9%80%9A%E7%94%A8%E5%B1%9E%E6%80%A7/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/1-%E9%80%9A%E7%94%A8%E5%B1%9E%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-attributes">通用属性文档</a></p><p>颜色格式，将颜色统一存放 \src\main\resources\base\element\color.json 文件中，方便统一管理</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Color.枚举值</span><br><span class="line">数字类：0x00ffffff</span><br><span class="line">字符类：&#x27;#ffffff&#x27;，&#x27;#ff000000&#x27;，&#x27;rgb(255, 100, 255)&#x27;，&#x27;rgba(255, 100, 255, 0.5)&#x27;</span><br><span class="line"></span><br><span class="line">$r(&#x27;app.color.枚举值&#x27;)//枚举值也就是文件中写的名字</span><br><span class="line">.backgroundColor($r(&#x27;app.color.backgruokcolor&#x27;))</span><br></pre></td></tr></table></figure><h1 id="尺寸设置文档中心"><a class="markdownIt-Anchor" href="#尺寸设置文档中心"></a> 尺寸设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size">文档中心</a></h1><h2 id="宽度"><a class="markdownIt-Anchor" href="#宽度"></a> 宽度</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.width(数字)</span><br><span class="line">.width(&#x27;数字%&#x27;)</span><br></pre></td></tr></table></figure><h2 id="高度"><a class="markdownIt-Anchor" href="#高度"></a> 高度</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.height(数字)</span><br><span class="line">.height(&#x27;数字%&#x27;)</span><br></pre></td></tr></table></figure><h2 id="内边距"><a class="markdownIt-Anchor" href="#内边距"></a> 内边距</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.pading()</span><br><span class="line">.pading(&#123;</span><br><span class="line">    top: 数字,</span><br><span class="line">    bottom: 数字,</span><br><span class="line">    left: 数字,</span><br><span class="line">    right: 数字</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="外边距"><a class="markdownIt-Anchor" href="#外边距"></a> 外边距</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.margin(数字)</span><br><span class="line">.margin(&#123;</span><br><span class="line">    top: 数字,</span><br><span class="line">    bottom: 数字,</span><br><span class="line">    left: 数字,</span><br><span class="line">    right: 数字</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="安全区边距"><a class="markdownIt-Anchor" href="#安全区边距"></a> 安全区边距</h2><p>允许容器向自身添加组件级安全区域，供子组件延伸</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.safeAreaPadding(数字)</span><br><span class="line">.safeAreaPadding(&#123;</span><br><span class="line">    top: 数字,</span><br><span class="line">    bottom: 数字,</span><br><span class="line">    start: 数字,</span><br><span class="line">    end: 数字</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="布局权重"><a class="markdownIt-Anchor" href="#布局权重"></a> 布局权重</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.layoutWeight(数字)</span><br></pre></td></tr></table></figure><h1 id="位置设置文档中心"><a class="markdownIt-Anchor" href="#位置设置文档中心"></a> 位置设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location">文档中心</a></h1><h2 id="相对偏移"><a class="markdownIt-Anchor" href="#相对偏移"></a> 相对偏移</h2><p>组件相对原本的布局位置进行偏移</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.offset(&#123;</span><br><span class="line">  x: 数字,</span><br><span class="line">  y: 数字</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="边框设置文档中心"><a class="markdownIt-Anchor" href="#边框设置文档中心"></a> 边框设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border">文档中心</a></h1><h2 id="边框"><a class="markdownIt-Anchor" href="#边框"></a> 边框</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.border(数字)</span><br><span class="line">.border(&#123;</span><br><span class="line">    width: &#123;//设置宽度</span><br><span class="line">        top: 数字,</span><br><span class="line">        bottom: 数字,</span><br><span class="line">        left: 数字,</span><br><span class="line">        right: 数字 </span><br><span class="line">    &#125;,</span><br><span class="line">    radius: &#123;//设置圆角</span><br><span class="line">        topLeft: 数字,</span><br><span class="line">        topRight: 数字,</span><br><span class="line">        bottomLeft: 数字,</span><br><span class="line">        bottomRight: 数字</span><br><span class="line">    &#125;,</span><br><span class="line">    style: BorderStyle.枚举值,</span><br><span class="line">    // style: &#123;</span><br><span class="line">    //     top: BorderStyle.枚举值,</span><br><span class="line">    //     bottom: BorderStyle.枚举值,</span><br><span class="line">    //     left: BorderStyle.枚举值,</span><br><span class="line">    //     right: BorderStyle.枚举值</span><br><span class="line">    // &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="圆角"><a class="markdownIt-Anchor" href="#圆角"></a> 圆角</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.borderRadius(数字)</span><br><span class="line">.borderRadius(&#123;</span><br><span class="line">    topLeft: 数字,</span><br><span class="line">    topRight: 数字,</span><br><span class="line">    bottomLeft: 数字,</span><br><span class="line">    bottomRight: 数字</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>特殊形状圆角</p><ul><li>正圆：宽高都一样，圆角为宽或高的一半</li><li>胶囊：宽大高小，圆角为高的一半</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Column() &#123;</span><br><span class="line">    Image($r(&#x27;app.media.ic_more&#x27;))</span><br><span class="line">        .width(60)</span><br><span class="line">        .height(60)</span><br><span class="line">        .backgroundColor(Color.Green)</span><br><span class="line">        .borderRadius(30)//正圆</span><br><span class="line">    Text(&#x27;胶囊&#x27;)</span><br><span class="line">        .width(100)</span><br><span class="line">        .height(50)</span><br><span class="line">        .backgroundColor(Color.Orange)</span><br><span class="line">        .borderRadius(25)//胶囊</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="背景设置文档中心"><a class="markdownIt-Anchor" href="#背景设置文档中心"></a> 背景设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-background#backgroundcolor">文档中心</a></h1><h2 id="背景色"><a class="markdownIt-Anchor" href="#背景色"></a> 背景色</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.backgroundcolor(颜色格式)</span><br></pre></td></tr></table></figure><h2 id="背景图片"><a class="markdownIt-Anchor" href="#背景图片"></a> 背景图片</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.backgroundImage(&#x27;图片网址&#x27;, ImageRepeat.平铺方式)</span><br><span class="line">.backgroundImage($r(&#x27;图片路径&#x27;), ImageRepeat.平铺方式)</span><br><span class="line">// NoRepeat：不平铺，默认值</span><br><span class="line">// X：水平平铺</span><br><span class="line">// Y：垂直平铺</span><br><span class="line">// XY：水平垂直均平铺</span><br></pre></td></tr></table></figure><h2 id="背景图片宽高"><a class="markdownIt-Anchor" href="#背景图片宽高"></a> 背景图片宽高</h2><p>注意图片不能超过屏幕的两倍，最好适配，不然会导致渲染出问题</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.backgroundImageSize(&#123; x: 数字, y: 数字 &#125;)</span><br><span class="line">.backgroundImageSize(ImageSize.枚举值)</span><br></pre></td></tr></table></figure><h2 id="背景图位置"><a class="markdownIt-Anchor" href="#背景图位置"></a> 背景图位置</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.backgroundImagePosition(&#123; x: 数字, y: 数字 &#125;)</span><br><span class="line">.backgroundImagePosition(Alignment.枚举值)</span><br></pre></td></tr></table></figure><h1 id="透明度文档中心"><a class="markdownIt-Anchor" href="#透明度文档中心"></a> 透明度<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-opacity">文档中心</a></h1><p>设置透明度之后，注意层级关系</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//十六进制若为八位则前两位则为透明度//设置背景颜色透明度</span><br><span class="line">.opacity(数字)//1表示不透明，0表示完全透明</span><br></pre></td></tr></table></figure><h1 id="阴影"><a class="markdownIt-Anchor" href="#阴影"></a> 阴影</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.shadow(&#123;</span><br><span class="line">  radius: 数字,          // 阴影半径</span><br><span class="line">  color: 颜色格式, // 阴影颜色</span><br><span class="line">  offsetX: 数字,        // X轴偏移</span><br><span class="line">  offsetY: 数字         // Y轴偏移（正值向下）</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="布局约束文档中心"><a class="markdownIt-Anchor" href="#布局约束文档中心"></a> 布局约束<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-layout-constraints">文档中心</a></h1><h2 id="宽高比"><a class="markdownIt-Anchor" href="#宽高比"></a> 宽高比</h2><p>指定当前组件的宽高比</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.aspectRatio(数字)</span><br></pre></td></tr></table></figure><h1 id="显隐控制文档中心"><a class="markdownIt-Anchor" href="#显隐控制文档中心"></a> 显隐控制<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-visibility">文档中心</a></h1><p>组件的显隐</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.visibility(Visibility.枚举值)</span><br></pre></td></tr></table></figure><h1 id="z序控制文档中心"><a class="markdownIt-Anchor" href="#z序控制文档中心"></a> Z序控制<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-z-order">文档中心</a></h1><p>组件的堆叠顺序</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.zIndex(数字)//取值为整数数字，取值越大，显示层级越高</span><br><span class="line">.zIndex(1)</span><br></pre></td></tr></table></figure><h1 id="图形变换文档中心"><a class="markdownIt-Anchor" href="#图形变换文档中心"></a> 图形变换<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-transformation#translate">文档中心</a></h1><h2 id="组件平移"><a class="markdownIt-Anchor" href="#组件平移"></a> 组件平移</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.translate(&#123;</span><br><span class="line">  x: 数字,</span><br><span class="line">  y: 数字,</span><br><span class="line">  z: 数字</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="多态样式文档中心"><a class="markdownIt-Anchor" href="#多态样式文档中心"></a> 多态样式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-polymorphic-style">文档中心</a></h1><p>组件不同状态的样式</p><table><thead><tr><th style="text-align:center">normal：无状态时的样式</th><th style="text-align:center">pressed：按下状态的样式</th><th style="text-align:center">disabled：禁用状态的样式</th></tr></thead><tbody><tr><td style="text-align:center">focused：获焦状态的样式</td><td style="text-align:center">clicked：点击状态的样式</td><td style="text-align:center">selected：选中状态的样式</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.stateStyles(&#123;</span><br><span class="line">  状态名: &#123;</span><br><span class="line">    .backgroundColor(&#x27;red&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Button(&#x27;按钮&#x27;)</span><br><span class="line">.stateStyles(&#123;</span><br><span class="line">  normal: &#123;//如果没有加无状态时样式，触发状态样式变成常态样式</span><br><span class="line">    .backgroundColor(&#x27;bule&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line">  pressed: &#123;</span><br><span class="line">    .backgroundColor(&#x27;red&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0.ArkTS基础语法</title>
      <link href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/0.ArkTS%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/0.ArkTS%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>打印日志：console.log(‘消息说明’,‘打印的内容’)</p><p>对象等复杂数据，需要日志打印需要JSON.stringify()转换</p><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/introduction-to-arkts">文档中心</a></p><p>项目：</p><table><thead><tr><th><a href="https://www.yuque.com/megasu/hm_meikou_v1.2,%E7%BE%8E%E8%94%BB%E5%95%86%E5%9F%8E_v1.2,https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*sRUdR543RjcAAAAAAAAAAAAADvuFAQ/original,https://www.yuque.com/megasu/hm_meikou_v1.2" title="" target=""></a></th><th><a href="https://zhousg.atomgit.net/interview_success/project/">HarmonyOS NEXT 面试通</a></th></tr></thead><tbody><tr><td><a href="https://www.bilibili.com/video/BV1EJpLeRE3L/?spm_id_from=333.788.videopod.episodes&amp;vd_source=1c838941386ee32c4501615c317f75e0">守护助手APP项目实战教程_哔哩哔哩_bilibili</a></td><td><a href="https://www.yuque.com/megasu/guardian_v1.0">鸿蒙守护助手-黑马程序员_v1.0</a></td></tr></tbody></table><p>项目代码仓库：</p><table><thead><tr><th><a href="https://gitee.com/megasu/meikou_example">美蔻商城</a></th><th><a href="https://github.com/HarmonyOS-Next/interview-handbook-project">面试通</a></th><th><a href="https://gitee.com/Megasu/hm_guardian">鸿蒙守护助手</a></th></tr></thead><tbody><tr><td><a href="https://gitee.com/itcast_panpu/next12_wechat03.git">微信聊天</a></td><td><a href="https://gitee.com/luckybo0027/xsd">小时达</a></td><td><a href="https://www.yuque.com/attachments/yuque/0/2025/md/51403960/1747548377135-1a44e93a-69b3-4667-9016-d49582c1f895.md">小时达-快递项目（hap+har）.md</a></td></tr></tbody></table><h1 id="变量"><a class="markdownIt-Anchor" href="#变量"></a> 变量</h1><h2 id="基础数据类型"><a class="markdownIt-Anchor" href="#基础数据类型"></a> 基础数据类型</h2><p>let：表示全局变量</p><ul><li>string 字符串, ‘’ 和 &quot;&quot;都可以</li><li>number 数字，<font style="color:#080808;background-color:#ffffff;">Number(数字/变量).toFixed(数字)保留几位小数</font></li><li>boolean 布尔（真、假）</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let 变量名: 类型 = 值</span><br><span class="line">Number(数字/变量).toFixed()//保留两位小数</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 字符类型，&#x27;&#x27; 或 &quot;&quot; 包裹</span><br><span class="line">let title: string = &#x27;巨无霸汉堡&#x27;;</span><br><span class="line">console.log(&#x27;字符串title&#x27;,title);</span><br><span class="line"></span><br><span class="line">//数字</span><br><span class="line">let age: number = 18</span><br><span class="line">console.log(&#x27;年龄age:&#x27;,age);</span><br><span class="line"></span><br><span class="line">//布尔</span><br><span class="line">let islogin: boolean = true</span><br><span class="line">console.log(&#x27;是否登陆成功：&#x27;,islogin)</span><br><span class="line"></span><br><span class="line">//修改</span><br><span class="line">title = &#x27;xinzai&#x27;</span><br><span class="line">console.log(&#x27;字符串title&#x27;,title);</span><br><span class="line">age = 90</span><br><span class="line">console.log(&#x27;年龄age:&#x27;,age);</span><br><span class="line">islogin = false</span><br><span class="line">console.log(&#x27;是否登陆成功：&#x27;,islogin)</span><br></pre></td></tr></table></figure><h2 id="状态变量"><a class="markdownIt-Anchor" href="#状态变量"></a> 状态变量</h2><p>自动更新视图更新也就是改变会引起 UI 的渲染刷新</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@State 变量名: 变量类型 = 值</span><br><span class="line"></span><br><span class="line">@State msg3: string = &#x27;Hello World&#x27;</span><br></pre></td></tr></table></figure><h2 id="联合类型"><a class="markdownIt-Anchor" href="#联合类型"></a> 联合类型</h2><p>灵活的数据类型，它修饰的变量可以存储不同类型的数据</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let 变量: 类型1 | 类型2 | 类型3 = 值</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let judge : number | string = 100</span><br><span class="line">judge = &#x27;A&#x27;</span><br><span class="line">console.log(judge)  //A</span><br><span class="line"></span><br><span class="line">//变量值限定在一组数据范围内选择</span><br><span class="line">let gender: &#x27;man&#x27; | &#x27;woman&#x27; | &#x27;secret&#x27; = &#x27;secret&#x27;</span><br><span class="line">console.log(&#x27;性别：&#x27;,gender)</span><br></pre></td></tr></table></figure><h2 id="枚举类型"><a class="markdownIt-Anchor" href="#枚举类型"></a> 枚举类型</h2><p>约定变量只能在一组数据范围内选择值</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">enum 枚举名 &#123;  </span><br><span class="line">  常量1 = 值,  </span><br><span class="line">  常量2 = 值,  </span><br><span class="line">  ......  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义枚举</span><br><span class="line">enum ThemeColor&#123;</span><br><span class="line">  //常量列表</span><br><span class="line">  Red = &#x27;#ff0f29&#x27;,</span><br><span class="line">  Orange = &#x27;#ff7100&#x27;,</span><br><span class="line">  Green = &#x27;#30b30e&#x27;</span><br><span class="line">&#125;</span><br><span class="line">//给变量设定枚举类型</span><br><span class="line">let color: ThemeColor = ThemeColor.Red</span><br><span class="line">console.log(&#x27;颜色&#x27;,color)</span><br></pre></td></tr></table></figure><h1 id="常量"><a class="markdownIt-Anchor" href="#常量"></a> 常量</h1><p>用来存储不可变数据</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const 常量名: 类型 = 值</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const PI: number = 3.14</span><br><span class="line">console.log(&quot;PI&quot;,PI);</span><br></pre></td></tr></table></figure><h1 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h1><p>一元运算符单独一行的时候前加和后加效果都一致</p><table><thead><tr><th style="text-align:center">算数运算符</th><th style="text-align:center">作用</th><th style="text-align:center">赋值运算符</th><th style="text-align:center">作用</th><th style="text-align:center">一元运算符</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">+</td><td style="text-align:center">加</td><td style="text-align:center">+=</td><td style="text-align:center">加等于</td><td style="text-align:center">++i</td><td style="text-align:center">先加后使用</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">减</td><td style="text-align:center">-=</td><td style="text-align:center">减等于</td><td style="text-align:center">i++</td><td style="text-align:center">先使用后加</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">乘</td><td style="text-align:center">*=</td><td style="text-align:center">乘等于</td><td style="text-align:center">–i</td><td style="text-align:center">先减后使用</td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">除</td><td style="text-align:center">/=</td><td style="text-align:center">除等于</td><td style="text-align:center">i–</td><td style="text-align:center">先使用后减</td></tr><tr><td style="text-align:center">%</td><td style="text-align:center">取余</td><td style="text-align:center">%=</td><td style="text-align:center">取余等于</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><table><thead><tr><th style="text-align:center">比较运算符</th><th style="text-align:center">作用</th><th style="text-align:center">逻辑运算符</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">&gt;</td><td style="text-align:center">大于</td><td style="text-align:center">&amp;&amp;</td><td style="text-align:center">与，都真才真</td></tr><tr><td style="text-align:center">&gt;=</td><td style="text-align:center">大于等于</td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">小于</td><td style="text-align:center">!</td><td style="text-align:center">非，取反</td></tr><tr><td style="text-align:center">&lt;=</td><td style="text-align:center">小于等于</td><td style="text-align:center">!=</td><td style="text-align:center">判断不等于</td></tr><tr><td style="text-align:center">==</td><td style="text-align:center">判断相等</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h1 id="字符串"><a class="markdownIt-Anchor" href="#字符串"></a> 字符串</h1><h2 id="字符串拼接"><a class="markdownIt-Anchor" href="#字符串拼接"></a> 字符串拼接</h2><p>用于拼接字符串和变量</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let name: string = &#x27;小明&#x27;</span><br><span class="line">console.log(&#x27;简介信息&#x27;, &#x27;名字是&#x27; + name)</span><br></pre></td></tr></table></figure><h2 id="模板字符串"><a class="markdownIt-Anchor" href="#模板字符串"></a> 模板字符串</h2><p>更适合于 多个变量 的字符串拼接</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">`...$&#123;变量名1&#125;.....$&#123;变量名2&#125;.....`</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let name: string = &#x27;xinzai&#x27;</span><br><span class="line">let age: number = 18</span><br><span class="line">console.log(&#x27;信息：&#x27;,`名字是$&#123;name&#125;，年龄是$&#123;age&#125;`)</span><br></pre></td></tr></table></figure><h1 id="类型转换"><a class="markdownIt-Anchor" href="#类型转换"></a> 类型转换</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//字符串转数字</span><br><span class="line">Number(变量名)//字符串 直接转数字，转换失败返回NaN（字符串中包含非数字）</span><br><span class="line">parseInt(变量名)//去掉小数部分 转数字，转换失败返回NaN</span><br><span class="line">parseFloat(变量名)//保留小数部分 转数字，转换失败返回NaN</span><br><span class="line">//数字转字符串</span><br><span class="line">变量名.toString()//数字直接转字符串</span><br><span class="line">变量名.toFixed()//四舍五入转字符串，可设置保留几位小数</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let num: string = &#x27;1.1&#x27;</span><br><span class="line">let num1: string = &#x27;1.1a1&#x27;</span><br><span class="line">console.log(&#x27;值：&#x27;,Number(num))   //1.1</span><br><span class="line">console.log(&#x27;值：&#x27;,parseInt(num))//1</span><br><span class="line">console.log(&#x27;值：&#x27;,parseFloat(num))   //1.1</span><br><span class="line">console.log(&#x27;值：&#x27;,Number(num1))  //NaN</span><br><span class="line"></span><br><span class="line">let num: number = 1.12523</span><br><span class="line">console.log(&#x27;值：&#x27;,num.toString())   //&#x27;1.12523&#x27;</span><br><span class="line">console.log(&#x27;值：&#x27;,num.toFixed())//&#x27;1&#x27;</span><br><span class="line">console.log(&#x27;值：&#x27;,num.toFixed(2))    //&#x27;1.13&#x27;，保留两位小数</span><br></pre></td></tr></table></figure><h1 id="数组"><a class="markdownIt-Anchor" href="#数组"></a> 数组</h1><p>下标从零开始</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let 数组名: 类型[] = [数据1, 数据2,...]</span><br><span class="line">let 数组名:Array&lt;类型&gt; = [0,1,2,6]</span><br><span class="line">let 数组名 = Array(数字).fill(填充内容);//数字是创建长度多少的数字，填充内容可字符串或数字 </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let numList2:Array&lt;number&gt; = [0,1,2,6]</span><br><span class="line">let names: string[] = [&#x27;nihao&#x27;,&#x27;xinzai&#x27;,&#x27;bs&#x27;]</span><br><span class="line">console.log(&#x27;数组：&#x27;,names)</span><br><span class="line">console.log(&#x27;1:&#x27;,names[1])</span><br></pre></td></tr></table></figure><h2 id="数组的操作"><a class="markdownIt-Anchor" href="#数组的操作"></a> 数组的操作</h2><p>任意位置 增加 或删除</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">数组名.splice(起始位置, 新增/删除个数, 新增元素1, 新增元素2, ......)//从起始位置开始增加或删除</span><br><span class="line">数组名.length//数组长度</span><br><span class="line">//增加</span><br><span class="line">数组名.unshift(数据1, 数据2, 数据3, ...)//从开头加</span><br><span class="line">数组名.push(数据1, 数据2, 数据3, ...)//从结尾加</span><br><span class="line">数组名.push(...数组名1)//将数组名1的数组提出来后合并到数组名的数组后面</span><br><span class="line">//删除</span><br><span class="line">数组名.shift()//从开头删</span><br><span class="line">数组名.pop()//从结尾删</span><br><span class="line">//筛选，符合条件的保留创建新的数组</span><br><span class="line">//item：arr数组中的数据项，index：arr数组中的数据项索引</span><br><span class="line">数组名.filter((item, index) =&gt; 条件筛选)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name.splice(1,1,&#x27;123&#x27;)</span><br><span class="line">console.log(&#x27;任意新增/删除：&#x27;,name)    //xinzai,123,wfeng,xiaowng</span><br><span class="line">console.log(&#x27;长度：&#x27;, name.length)//4</span><br><span class="line">//增加</span><br><span class="line">name.unshift(&#x27;123&#x27;,&#x27;321&#x27;)</span><br><span class="line">console.log(&#x27;增加：&#x27;,name) //123,321,xinzai,jueni,wfeng,xiaowng</span><br><span class="line">name.push(&#x27;123&#x27;,&#x27;321&#x27;)</span><br><span class="line">console.log(&#x27;增加：&#x27;,name) //xinzai,jueni,wfeng,xiaowng,123,321</span><br><span class="line">//删除</span><br><span class="line">name.shift()</span><br><span class="line">console.log(&#x27;删除：&#x27;,name) //jueni,wfeng,xiaowng</span><br><span class="line">name.pop()</span><br><span class="line">console.log(&#x27;删除：&#x27;,name) //xinzai,jueni,wfeng</span><br><span class="line">//筛选</span><br><span class="line">const fruits = [&quot;apple&quot;, &quot;banana&quot;, &quot;grape&quot;, &quot;orange&quot;];</span><br><span class="line">const filteredFruits = fruits.filter(fruit =&gt; fruit.includes(&quot;ap&quot;));//筛选数组中值为ap</span><br></pre></td></tr></table></figure><h2 id="遍历数组"><a class="markdownIt-Anchor" href="#遍历数组"></a> 遍历数组</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//方式一：普通for循环遍历输出</span><br><span class="line">let name: string[] = [&#x27;xinzai&#x27;,&#x27;lisi&#x27;,&#x27;wangwu&#x27;]</span><br><span class="line">//方式二</span><br><span class="line">for (let item of 数组名) &#123;&#125;//item: 声明的一个变量, 用来在循环的时候接收 每一个数组元素</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (let i = 0;i &lt; name.length;i++)&#123;</span><br><span class="line">    console.log(&#x27;名字&#x27;,name[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let name: string[] = [&#x27;xinzai&#x27;,&#x27;lisi&#x27;,&#x27;wangwu&#x27;]</span><br><span class="line">for (let item of name)&#123;</span><br><span class="line">    console.log(&#x27;名字&#x27;,item)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="对象数组"><a class="markdownIt-Anchor" href="#对象数组"></a> 对象数组</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义接口</span><br><span class="line">interface  接口名&#123;</span><br><span class="line">    //属性</span><br><span class="line">&#125;</span><br><span class="line">//定义对象数组</span><br><span class="line">let 对象数组名: 接口名[] = [&#123; 属性名1: 值, 属性名2: 值, ... &#125;, ...]</span><br><span class="line">//访问</span><br><span class="line">对象数组名[下标].属性值</span><br><span class="line">//需要修改数据，要整个对象都修改，不能修改对象中的一个数据</span><br><span class="line">this.对象数组名[下标值] = &#123;</span><br><span class="line">    属性名1: 值</span><br><span class="line">    属性名2: 值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface  Person&#123;</span><br><span class="line">    stuId: number</span><br><span class="line">    name: string</span><br><span class="line">&#125;</span><br><span class="line">let pArr: Person[] = [&#123;stuId: 1,name:&#x27;小红&#x27;&#125;,&#123;stuId: 2, name:&#x27;xinzai&#x27;&#125;]</span><br><span class="line">console.log(&#x27;数&#x27;,pArr[1].name)</span><br><span class="line">this.images[this.random] = &#123;</span><br><span class="line">    url: `app.media.img_0$&#123;this.random&#125;`,</span><br><span class="line">    count1: this.images[this.random].count1 + 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="函数function"><a class="markdownIt-Anchor" href="#函数function"></a> 函数(function)</h1><p>function：表示全局</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义函数</span><br><span class="line">function 函数名(形参1: 类型, 形参2: 类型,...): 返回值类型&#123;</span><br><span class="line">    return 返回值</span><br><span class="line">&#125;</span><br><span class="line">//调用函数</span><br><span class="line">let 变量名: 类型 = 函数名(实参1,实参2,...)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义函数</span><br><span class="line">function test()&#123;</span><br><span class="line">    console.log(&#x27;五角星&#x27;,&#x27;*&#x27;)</span><br><span class="line">    console.log(&#x27;五角星&#x27;,&#x27;**&#x27;)</span><br><span class="line">    console.log(&#x27;五角星&#x27;,&#x27;***&#x27;)</span><br><span class="line">    console.log(&#x27;五角星&#x27;,&#x27;****&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">//调用函数</span><br><span class="line">test()</span><br><span class="line"></span><br><span class="line">function buy(price: number,num: number)&#123;</span><br><span class="line">    let result: number = price*num</span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;价格：&#x27;,buy(10,3));</span><br></pre></td></tr></table></figure><h1 id="箭头函数"><a class="markdownIt-Anchor" href="#箭头函数"></a> 箭头函数</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let 函数名 = (形参1: 类型, 形参2: 类型,...) =&gt; &#123;  </span><br><span class="line">    // 函数体</span><br><span class="line">    return 返回值</span><br><span class="line">&#125;</span><br><span class="line">函数名(实参1,实参2,...)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let num_Price = (price: number, num: number)=&gt;&#123;</span><br><span class="line">    let result: number = price*num</span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;总价格：&#x27;, num_Price(3,2))</span><br></pre></td></tr></table></figure><h1 id="重复执行函数文档中心"><a class="markdownIt-Anchor" href="#重复执行函数文档中心"></a> 重复执行函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-timer#setinterval">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">  //执行的操作，第一次执行也要等待时间</span><br><span class="line">&#125;, 延迟的毫秒数);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">setInterval(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;do every 1s.&#x27;);</span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure><h1 id="创建定时器函数文档中心"><a class="markdownIt-Anchor" href="#创建定时器函数文档中心"></a> 创建定时器函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-timer#settimeout">文档中心</a></h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">setTimeout(() =&gt; &#123;//不带参数</span><br><span class="line">  //执行的操作，只执行一次</span><br><span class="line">&#125;, 延迟的毫秒数);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.info(&#x27;delay 1s&#x27;);</span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure><h1 id="剩余参数和展开运算符"><a class="markdownIt-Anchor" href="#剩余参数和展开运算符"></a> 剩余参数和展开运算符</h1><p>将 函数 或 方法 中一个不定数量的参数表示为一个数组</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function 函数名(参数1, 参数2, ...数组名:类型[])&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function num(a1: number,a2: number,...theArgs:number[])&#123;</span><br><span class="line">    let count = a1+a2</span><br><span class="line">    for(const flags of theArgs)&#123;</span><br><span class="line">        count += flags</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&#x27;值&#x27;,count)</span><br><span class="line">    return count</span><br><span class="line">&#125;</span><br><span class="line">num(1,2,3)</span><br></pre></td></tr></table></figure><p>展开运算符只能用在数组上(一般用在合并上)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const 数组名: 数据类型[] = [...数据名1, ...数组名2]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const a1: number[] = [1,2,3,4,5,6]</span><br><span class="line">const a2: number[] = [3,4,6,17,27]</span><br><span class="line">const num: number[] = [...a1,...a2]</span><br><span class="line">console.log(&#x27;结果&#x27;,num)</span><br></pre></td></tr></table></figure><h1 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义接口约束对象中变量及函数的类型</span><br><span class="line">interface 接口名&#123;</span><br><span class="line">    属性1: 类型1</span><br><span class="line">    属性2: 类型2</span><br><span class="line">    属性3: 类型3</span><br><span class="line"></span><br><span class="line">    方法名: (参数: 类型) =&gt; 返回值类型</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface Person&#123;</span><br><span class="line">    //声明属性类型</span><br><span class="line">    name: string</span><br><span class="line">    age: number</span><br><span class="line">    weight: number</span><br><span class="line"></span><br><span class="line">    //声明方法</span><br><span class="line">    dance: () =&gt; void</span><br><span class="line">    sing: (sing: string) =&gt; void</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="接口继承"><a class="markdownIt-Anchor" href="#接口继承"></a> 接口继承</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface 接口2 extends 接口1 &#123;</span><br><span class="line">    //属性2:类型</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface IAnimal&#123;</span><br><span class="line">    name: string</span><br><span class="line">    age: number</span><br><span class="line">&#125;</span><br><span class="line">interface IDog extends IAnimal&#123;</span><br><span class="line">    color: string</span><br><span class="line">&#125;</span><br><span class="line">let dog1: IDog = &#123;</span><br><span class="line">    //不仅要实现IDog子接口还需要实现父接口</span><br><span class="line">    name: &#x27;s&#x27;,</span><br><span class="line">    age: 12,</span><br><span class="line">    color: &#x27;s&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="接口实现"><a class="markdownIt-Anchor" href="#接口实现"></a> 接口实现</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class 类 implements 接口&#123;</span><br><span class="line">    // 必须实现 接口中定义的 属性、方法，</span><br><span class="line">    // 否则会报错</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface IDog &#123;</span><br><span class="line">    name: string</span><br><span class="line">    age: number</span><br><span class="line">    color: string</span><br><span class="line">    jump: () =&gt; void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Test implements IDog &#123;</span><br><span class="line">    name: string</span><br><span class="line">    age: number</span><br><span class="line">    color: string</span><br><span class="line"></span><br><span class="line">    constructor(name: string, age: number, color: string) &#123;</span><br><span class="line">        this.name = name</span><br><span class="line">        this.age = age</span><br><span class="line">        this.color = color</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    jump = () =&gt; &#123;</span><br><span class="line">        console.log(&#x27;名字&#x27;,this.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let test:Test = new Test(&#x27;x&#x27;,12,&#x27;s&#x27;)</span><br><span class="line">test.jump()</span><br></pre></td></tr></table></figure><h2 id="接口自动转-class-类"><a class="markdownIt-Anchor" href="#接口自动转-class-类"></a> 接口自动转 class 类</h2><p>若安装存在网络以及权限问题，自行百度解决</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node -v//查看node版本，需在v18.20.1及以上</span><br><span class="line">npm i -g interface2class//安装</span><br><span class="line">i2c -V//检测安装版本</span><br><span class="line">//转换使用，工程在对应的est文件中右键“打开范围”选择Terminal</span><br><span class="line">i2c .\转换的文件</span><br></pre></td></tr></table></figure><h1 id="对象"><a class="markdownIt-Anchor" href="#对象"></a> 对象</h1><p>存储多个不同数据的容器，定义的<font style="color:#080808;background-color:#ffffff;">interface</font>可以给不同的对象重复使用，但对象需要的是相同的结构类型</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let 对象名称: 对象结构类型 = &#123;</span><br><span class="line">    属性名1: 值,</span><br><span class="line">    属性名2: 值,</span><br><span class="line">    </span><br><span class="line">    方法名: (形参名1: 类型,...) =&gt;&#123;</span><br><span class="line">        //方法体</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//调用属性及方法</span><br><span class="line">对象名.属性名1</span><br><span class="line">对象名.方法名1()</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//定义对象</span><br><span class="line">let ym: Person = &#123;</span><br><span class="line">    name: &#x27;李四&#x27;,</span><br><span class="line">    age: 19,</span><br><span class="line">    weight: 88,</span><br><span class="line"></span><br><span class="line">    dance: () =&gt;&#123;</span><br><span class="line">        console.log(&#x27;nihao&#x27;,&#x27;xinzai&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    sing: (song: string) =&gt; &#123;</span><br><span class="line">        console.log(&#x27;唱歌：&#x27;,song)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//调用对象属性</span><br><span class="line">console.log(&#x27;名字&#x27;,ym.name)</span><br><span class="line">console.log(&#x27;年龄：&#x27;,ym.age)</span><br><span class="line">//调用对象方法</span><br><span class="line">ym.dance()</span><br><span class="line">ym.sing(&#x27;奇迹&#x27;)</span><br></pre></td></tr></table></figure><h1 id="分支语句"><a class="markdownIt-Anchor" href="#分支语句"></a> 分支语句</h1><h2 id="if"><a class="markdownIt-Anchor" href="#if"></a> if</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let score: number = 66</span><br><span class="line">if (score &gt;= 90)&#123;</span><br><span class="line">    console.log(&#x27;优秀&#x27;)</span><br><span class="line">&#125;else if (score &gt;= 70)&#123;</span><br><span class="line">    console.log(&#x27;良好&#x27;);</span><br><span class="line">&#125;else &#123;</span><br><span class="line">    console.log(&#x27;不及格&#x27;)  //不及格</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="switch"><a class="markdownIt-Anchor" href="#switch"></a> switch</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let m: number = 2</span><br><span class="line">switch (m)&#123;</span><br><span class="line">    case 1:</span><br><span class="line">        console.log(&#x27;1&#x27;)</span><br><span class="line">        break</span><br><span class="line">    case 2:</span><br><span class="line">        console.log(&#x27;2&#x27;)    //2</span><br><span class="line">        break</span><br><span class="line">    default :</span><br><span class="line">        console.log(&#x27;其他&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三元条件表达式"><a class="markdownIt-Anchor" href="#三元条件表达式"></a> 三元条件表达式</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//当变量名1 的值大于 变量名2 的值，返回变量名1 的值否则返回变量名2 的值</span><br><span class="line">变量名1 &gt; 变量名2? 变量名1 : 变量名2</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let num1: number = 5</span><br><span class="line">let num2: number = 10</span><br><span class="line">let res: number = num1 &gt; num2 ? num1 : num2// 返回较大值</span><br><span class="line">console.log(&#x27;结果是&#x27;, res)//10</span><br></pre></td></tr></table></figure><h1 id="循环语句"><a class="markdownIt-Anchor" href="#循环语句"></a> 循环语句</h1><h2 id="for"><a class="markdownIt-Anchor" href="#for"></a> for</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (let i: number = 0; i &lt; 5; i++) &#123;</span><br><span class="line">    console.log(&#x27;for&#x27;, &#x27;重复执行的代码&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for (const arg of 数组名) &#123;</span><br><span class="line">   console.log(&#x27;值&#x27;, &#x27;arg&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="while"><a class="markdownIt-Anchor" href="#while"></a> while</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while (条件) &#123;</span><br><span class="line">    条件成立重复执行的代码</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let i: number = 1</span><br><span class="line">while (i &lt; 5) &#123;</span><br><span class="line">    console.log(&#x27;while~i&#x27;, &#x27;重复执行的代码&#x27;)</span><br><span class="line">    i++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="随机数生成"><a class="markdownIt-Anchor" href="#随机数生成"></a> 随机数生成</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Math.random()//默认0~1</span><br><span class="line">//需要0~5，需要乘6</span><br><span class="line"></span><br><span class="line">Math.floor()//向下取整</span><br></pre></td></tr></table></figure><h1 id="class类"><a class="markdownIt-Anchor" href="#class类"></a> Class类</h1><p>用于 创建对象 模板。同时类声明也会引入一个 新类型，可定义其 实例属性、方法 和 构造函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 类名 首字母大写（规范）</span><br><span class="line">class 类名&#123;</span><br><span class="line">  // 1. 实例属性(字段)</span><br><span class="line">  字段名.类型 = 值//没有构造函数时必须有初始化值</span><br><span class="line">  字段名?:类型</span><br><span class="line">  // 2. 构造函数，不同实例 有不同的 字段 初始值，在实例化对象时将参数传进构造函数将字段初始化</span><br><span class="line">  constructor(形参名1: 类型, 形参名2: 类型) &#123;//也可以传对象</span><br><span class="line">    this.属性名1 = 形参1</span><br><span class="line">    this.属性名2 = 形参2</span><br><span class="line">  &#125;</span><br><span class="line">  // 3. 方法</span><br><span class="line">  方法名(参数...): 返回值类型&#123;</span><br><span class="line">    // 逻辑...</span><br><span class="line">    // 可以通过 this 获取实例对象</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 使用类 实例化对象 基于类 创建对象</span><br><span class="line">let 实例化类名: 类名 = new 类名()</span><br><span class="line">let 实例化类名: 类名 = new 类名(值1 ,值2)//传入的参数必须和构造函数形参顺序一致</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class cat&#123;</span><br><span class="line">    name: string = &#x27;小黑&#x27;</span><br><span class="line">    food?: string</span><br><span class="line">&#125;</span><br><span class="line">let mycat: cat = new cat()</span><br><span class="line">console.log(&#x27;名字&#x27;,mycat.name)</span><br><span class="line">mycat.food = &#x27;小黄鱼&#x27;</span><br><span class="line">// ?. 可以保证若food没有赋值不会报错，没有赋值显示undefined</span><br><span class="line">console.log(&#x27;食物&#x27;,mycat?.food)</span><br><span class="line">//有构造函数</span><br><span class="line">class Food&#123;</span><br><span class="line">    name: string</span><br><span class="line">    price?: number</span><br><span class="line"></span><br><span class="line">    constructor(name: string, price: number) &#123;</span><br><span class="line">        this.name = name</span><br><span class="line">        this.price = price</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let mycat: Food = new Food(&#x27;西蓝花&#x27;,20)</span><br><span class="line">console.log(&#x27;名字&#x27;,mycat.name)</span><br><span class="line">console.log(&#x27;食物&#x27;,mycat.price)</span><br><span class="line"></span><br><span class="line">//扩展，使用接口，构造函数传入对象</span><br><span class="line">interface IFood&#123;</span><br><span class="line">    name: string</span><br><span class="line">    price: number</span><br><span class="line">&#125;</span><br><span class="line">class Food&#123;</span><br><span class="line">  name: string</span><br><span class="line">  price?: number</span><br><span class="line">  </span><br><span class="line">  constructor(paramsObj: IFood) &#123;</span><br><span class="line">      this.name = paramsObj.name</span><br><span class="line">      this.price = paramsObj.price</span><br><span class="line">  &#125;</span><br><span class="line">  style(name:string)&#123;</span><br><span class="line">      console.log(`你好$&#123;name&#125;`,`菜名$&#123;this.name&#125;`)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">let myfood: Food = new Food(&#123;</span><br><span class="line">    //此时传入的参数可以不用按照构造函数参数的顺序</span><br><span class="line">    name: &#x27;菜心&#x27;,</span><br><span class="line">    price: 20</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&#x27;名字&#x27;,myfood.name)</span><br><span class="line">console.log(&#x27;食物&#x27;,myfood.price)</span><br><span class="line">myfood.style(&#x27;xinzai&#x27;)</span><br></pre></td></tr></table></figure><h2 id="静态属性和静态方法"><a class="markdownIt-Anchor" href="#静态属性和静态方法"></a> 静态属性和静态方法</h2><p>给类添加 静态属性、方法，通过类名访问不需要 new</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">static 静态属性名: 类型 = 值</span><br><span class="line">static 静态方法名(参数): 返回值类型&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Roboot&#123;</span><br><span class="line">    static version: string = &#x27;v2.0&#x27;</span><br><span class="line">    static getRomdom(): number&#123;</span><br><span class="line">        return Math.random()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;版本&#x27;,Roboot.version)</span><br><span class="line">console.log(&#x27;随机数&#x27;,Roboot.getRomdom())</span><br></pre></td></tr></table></figure><h2 id="继承"><a class="markdownIt-Anchor" href="#继承"></a> 继承</h2><p>子类可以继承父类的方法和属性，super 可以访问父类的实例字段、实例方法和构造函数</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class 子类 extends 父类&#123;</span><br><span class="line">    // 自己的字段（属性）</span><br><span class="line">    // 自己的方法</span><br><span class="line">    // 可以重写父类方法</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">    name: string</span><br><span class="line">    age: number</span><br><span class="line">    </span><br><span class="line">    constructor(name: string,age: number) &#123;</span><br><span class="line">        this.age = age</span><br><span class="line">        this.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    sayHi()&#123;</span><br><span class="line">        console.log(&#x27;大家好&#x27;,this.name,this.age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Student extends Person&#123;</span><br><span class="line">    worker: string = &#x27;学习&#x27;   //子类自己的属性</span><br><span class="line"></span><br><span class="line">    constructor(name: string,age: number, worker: string) &#123;</span><br><span class="line">        //子类无法继承父类构造方法，需要类似重写重新调用</span><br><span class="line">        super(name,age)</span><br><span class="line">        this.worker = worker    //初始化子类属性</span><br><span class="line">    &#125;</span><br><span class="line">    //重写父类方法</span><br><span class="line">    sayHi(): void &#123;</span><br><span class="line">        super.sayHi()   //调用父类的方法</span><br><span class="line">        console.log(&#x27;hello&#x27;, this.name,this.age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let student: Student = new Student(&#x27;李四&#x27;,19,&#x27;学习&#x27;)</span><br></pre></td></tr></table></figure><h2 id="检测实例"><a class="markdownIt-Anchor" href="#检测实例"></a> 检测实例</h2><p>instanceof 检测某个对象是否是某个类的实例</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">&#125;</span><br><span class="line">class Student extends Person&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let student: Student = new Student()</span><br><span class="line">console.log(&#x27;判断结果&#x27;, student instanceof Person)</span><br><span class="line"></span><br><span class="line">let temp: number[] = []</span><br><span class="line">console.log(&#x27;判断结果&#x27;,temp instanceof Array)   //判断变量是否是数组</span><br></pre></td></tr></table></figure><h2 id="修饰符"><a class="markdownIt-Anchor" href="#修饰符"></a> 修饰符</h2><p>readonly：只可以取值，无法修改</p><p>private：修饰的成员只能在本类访问，不能在声明该成员的类之外访问, 包括子类</p><p>protected：与private修饰符非常相似，不同点protected修饰的成员允许在 派生类(子类)中访问</p><p>public：任何地方都可以访问，省略不写默认为 public</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">readonly legs: number = 4</span><br><span class="line"></span><br><span class="line">class 类&#123;</span><br><span class="line">    private 属性:类型</span><br><span class="line">    private 方法()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class 类&#123;</span><br><span class="line">    protected 属性:类型</span><br><span class="line">    protected 方法()&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="泛型"><a class="markdownIt-Anchor" href="#泛型"></a> 泛型</h1><p>让【函数】等， 与多种【不同的类型】一起工作，灵活可复用</p><h2 id="泛型函数"><a class="markdownIt-Anchor" href="#泛型函数"></a> 泛型函数</h2><p>类型是 可变 的</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function 函数名&lt;泛型参数名&gt;(形参名1: 泛型参数名) : 泛型参数名&#123;</span><br><span class="line">&#125;</span><br><span class="line">//调用，类型传了什么类型，形参和返回值类型都是同样的类型</span><br><span class="line">函数名&lt;类型&gt;(实参)</span><br><span class="line">函数名(实参)//调用时也可以不用显式写出类型，会根据输入的参数判断</span><br><span class="line"></span><br><span class="line">function fn&lt;T&gt;(name: T): T &#123;</span><br><span class="line">    return name</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn(&#x27;n&#x27;))</span><br><span class="line">console.log(&#x27;zhi&#x27;,fn&lt;number[]&gt;([1,2,3,45,5]))</span><br></pre></td></tr></table></figure><p>进阶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function fn&lt;T&gt;(s: T[]): T[] &#123;</span><br><span class="line">    return s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function fn1&lt;T&gt;(s: T[]): T &#123;</span><br><span class="line">    return s[s.length-1]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(&#x27;值&#x27;, fn&lt;Number&gt;([1, 2, 3, 4, 5]).length)</span><br><span class="line">console.log(&#x27;值&#x27;, fn&lt;string&gt;([&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;]).length)</span><br><span class="line">console.log(&#x27;值&#x27;, fn1&lt;string&gt;([&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;40&#x27;]))</span><br></pre></td></tr></table></figure><h3 id="多个泛型参数"><a class="markdownIt-Anchor" href="#多个泛型参数"></a> 多个泛型参数</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function fn&lt;T1,T2&gt; (parm1:T1,parm2:T2)&#123;</span><br><span class="line">    console.log(&#x27;z1&#x27;,parm1)</span><br><span class="line">    console.log(&#x27;z2&#x27;,parm2)</span><br><span class="line">&#125;</span><br><span class="line">fn(&#x27;aa&#x27;,123)</span><br></pre></td></tr></table></figure><h2 id="泛型约束"><a class="markdownIt-Anchor" href="#泛型约束"></a> 泛型约束</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">interface 接口&#123;</span><br><span class="line">    //属性: 类型</span><br><span class="line">&#125;</span><br><span class="line">function 函数&lt;Type extends 接口&gt;()&#123;&#125;// 传入的类型必须要有 接口中的属性</span><br><span class="line"></span><br><span class="line">interface Ilength &#123;</span><br><span class="line">    length: number</span><br><span class="line">&#125;</span><br><span class="line">function fn&lt;T extends Ilength&gt;(param: T): T &#123;</span><br><span class="line">    return param</span><br><span class="line">&#125;</span><br><span class="line">//传入的参数必须有接口中length属性</span><br><span class="line">console.log(&#x27;值&#x27;, fn(&#x27;132&#x27;))</span><br><span class="line"></span><br><span class="line">class Desk &#123;</span><br><span class="line">    length: number = 2</span><br><span class="line">&#125;</span><br><span class="line">let d = new Desk()</span><br><span class="line">fn&lt;Desk&gt;(d)</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 原生鸿蒙开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 原生鸿蒙开发 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>秘密科技</title>
      <link href="/2025/09/11/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E7%A7%98%E5%AF%86%E7%A7%91%E6%8A%80/"/>
      <url>/2025/09/11/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E7%A7%98%E5%AF%86%E7%A7%91%E6%8A%80/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="c91f47fad2faffdb38d6db87dd1b3c168a7d796906dfbaea34f3380c7ee1a48e">d0082e95ce53ece4a4c0f5b8a727fc3f962b5c64e8654922e002aaab68a80fee8287b5237e990cc3bb2bfba1a3e0315d2966363fe9d120e6754f5085a6baa530f335af0c4ab0c4bc8036a0f7fae3a1749fbd6c3f3219622f5853dbd76d71fde759722a8633248b6889b09dad9ff452b6ab5eeb0979262cf04e8a1b164dbc380978a6349c2c13a63143ab675d35c04064977554521020dd176078ae339941c816cf7bbaae727b5b03af8181e38395fe08886868e4cbaf44b5313d548310d3269806802c2fee73113062dcfe40442aed42850ee5722d1f92116c6740acf6fff6e26999272b6c6a061ea64719cfa7bb0f245e35d0ae8588be9baaf7011c337bff9a45091760e22999d4fb5cdb51ad0c0cbddec23bdbbcd545b0c0522433a4352cbca54bcd75d7ef302528f9422b139d732cc95895ccacc325e67890d77dd55d9fc298dda9994ef99484640868963c12e8b4370ea83851996383dd7f1a44a7203274417e5aaaff57fcd38f978399e7d25c38bebad50b428ce0fd7f04ba82228ec85ffcd1f6c30f47e6fab932d644357ac2942ecf348acc9ccec444d13de3e35075443b6c15840ceb7c057ccc4bb5c64c59b2a40882cb1f17c23c4db3057d7b59bc7fe29b794218bf17958a5f3904866844dd4e35d9796e64c15707d5fca3d49351ecba2b2f7a8b2117f58354e16a222f900d30679378f127bf9887fed6d8c602940fb33e0b4aafe97c6cf9aaddbcbcf226e0882c30e2dee18a495da76a41c0f4106a4e468cd34c3741f89b7b3d6d1f5b56e93c2f7abbe0d045d92110172068a5709ae333527ae34c35f5ed8b643ac9cc9b32ac5a89d6fd52cbda597fdf57e57915ba307c7f6d2ad565ad7b82b75d5bef4f2153ef40a3407154ccf6cb9b46b7124aefe8c7798260793534f20d699edbc24aefb08769af2ce90fb3c9beb47cecd747e5b01dddb3dc75e5e85ab64e4ca5a4d3e3d6943c5170983d7fd592b1c9f5f8b517291ac2eae00c13bc4522f5313b7f5cc8605e1836f1fa3202d95579b2d2db80bf99d864e650138490ebce81dc71d222c4183ea9b4e7687dec302f4b40b735392ee524c8517d7213a3fcef91dcef574863a89e6e7afcc53bfed2736f3634607f1a357f554cad14557c6127f7f025a0d6fb6e599471c6195ce4f77f38e8b4a30245374ed0a6ffaef288b9d71cb4e540882eb957cb7ee9900bad5eed51d35c7d86d906ca84ab20bb488d5263978a9175f8579a5a7b1402515ee8c8e96b74c42a1b34349af15daea27d44459a5295624b2a8281f5a08d2091ea9eec4260bbdb01b8192d86ddd046adaa7ad61ca09ae814db9e4e72fd42132a141dd5b3025247fa6d81e363aaea5e8500418e17147476582fa909e4dd38202f5fb6b98d798affc8e3f025ea2360e74bc389aa953ee5ff4eb2ba9047d9fa1fa94df776dfa2aacc06c5856eca75da4f85345a585697cfd6b219cb96cb0b3ab5de69382f4041f2f2884653d031b5065c205c448aa4df186067e96cb0211a4bca040f1d6181e838ff007e7928a6de9b8a302c0cbb9444159664ed256aae9635048afef371d41da2f0cdaeb8671c0239d5964e84115a0a01aba2b745ba7b3dc03eeebb979283bfa831e7ab5bdd9db7bc2b6eb0664132ecda758acc3b2ffe7fb053b9feb16513f59157711e56cd37e0791b349165dd866e4dbed0e1c80d1e49053bcac9b8654ba5321a4ce715973bcbbfa7b1a233cf9aea7b6271396a5a95ad13cda0d28db6736c8a59e2f7b0c389c0acd669cd308c19f46a8396cd94e306ac76173bc09740db7e0adfe95a9b2155ed66a975a4a9f92bf452d932b2763a0b8bd94c871dcef0989e7258314a5dc4104696b9698c4806c693769780be5614a33eafc0bbf370f4f8aead650511722b78e30762636548b46e77e9deaf9ffdffc0e852d25cd5c55a2d22cd48eb9c44acadaf498a2ea143438d021a533dc594dbd216834a17014abe86d840903d6f52a31b7231c5d8c266ec7ed5b8982cdea801963249c8f487760cc37f228716285a859124f3f5de56ceb17b7efffc94677b47f70c99c7161966546dcfda695605a91a2b04aa7811e201c8e7081437d35bdb213532464ddf0c11980f85255eb86ed5de032489478692c5c58671f3ac43dc8fc7f427402102549d8c89f6eb9cdd1a81da745b09a36c7f3b9f11d4f89c439d0c3b5ec54f189a2b57680bbcaa95232282f049b2a1a6e0c782bd877b7fd1010ef32b34535ef941e934a4ac591ca713f20278cb5c45f78391ee970ba37ba1f6acee702f87d68b11428dcdf846b739ff62bfc71fbec832e6ca6e69f6c191d2959336a6dbe69a15251f2500f083759b2cb44b72aebcd48490783daae3a6267a1abaa288b2fc563d28966362085e39359285a3e24a6f3ea99c58db5b02ee9e016b12e59725da179a147707d2502de99566b705efb98e042dfcb74bc17793363042b0997787e50add7615940a07b8af622773c283b05828baa02414e98917bb50cb39a644ee3e869f52a378067513798a38061c9a5c234bed21e2f55b2c6a347e176c7d9586ddcccdf3c8eb82dbdc5b142c619eff41759e196a7a20ce6946eb3d4dba07815a11e817f25860248fd036635ec7bbbbf1bf3dfc2c1c2ffc1270e8c5507d29aefa3f40479e1a2e3a4f058c1f7f23b8cd2f24c8d13ccd6a5839d34b17af852a5ac56ff30caf55450f782e46e182054e26aa3f63746601d50bed468ad4c1648d8a522f03e9f7ee5b7b8fe10bb0373e1b1a33cce2b0bc29713cd119daacc0f841884ffb7d134ee0e7e6337e188c6985e6f4a70639e389f4052edcdcb87c7ef098b53135ad0ad583189b57fccbcf850ef059bde9a3fa831c32555c24c2779489ac474b0a967dc69535bf97b3f9965485bf630dcdd00c45e21f9e71ecc966f39b2138bd1bbbca4284589405f4f791183ced9d39847431ce88df50f15bbd314fcd43a78ce36b0f514abc6eec1655246600f8d7035c339c1097069085b963cbe7609d936a07e5559c13fb777014acd5ab0c2d57c8080c96ace94855109cfc31e0edf5016539d22ec08f886bd1d6903ab630760d202e8d2d9185b2ca182c021ecccfea1e9a76be03e7d9c482ff55a698c64cb70da59ad6000aa22cbeb1cd63932561f9e39e51536b4a213cdf461201c0d53b9e22f5f0c36432bc71b893e7fca5118c08a28239cb0fb89addcf173da9c49d534c013c90329f8bc95149504ce5f651a7da85bfbab2e1e0858b5c210da841c0a8d662366098a9662bf19be26d0e42fd78a7e9795fe711718c2ada5d0e6cce9aed534d20d31057dfb25473c0f10d8c982bfa61da9ca82a73d7bc0c96e5f125d4dcdaa6aa0447bac6254311a933a8f0661c61acc1dc730b2c9a01466dda72f395cc19e11afd092bf0eb5e786228860eeee23b1369e54c7a83ad22865f6a93d52602b27f9df71e7b82e84595df4fe68b87bb9ac9d3d3609daff426caff94d137ec8c1e3fe8292e3144d3bcc99d74f091b0e03d08b61f1526e443d1860e5b4a4c819728f2cbca94dae5a8b7729d673fe228a44971b80a42dff3a175180b5d873eaadf2e8c7fd2b7c594a9666376e78f08b928e0e135ecef81b68906620088b46c2937f2df82f44829f5cdff144e96df0f81482833b22f41671e13ccf2b2cd5935398a31bf21b9e9595bb0ba988232c126185134a644a076e05400547a1b1847a83cf2dd81acc345a227592145327b0c1b685f670d8b2e44b1dba8d851f6b4009e745a1b1bcec6e8390a34e32e4ad679d5639f83cc07408e058ca596f54ad344533af09573fa3945fc028964f05c58f32d50e0b891b904cd783775112a2c045b9a50864092d723ba23a32381a20c6b00f302aaca7c67cd389bcaa7e07bd798f60bd72165dcf13d935d338a1dbd762a862d29567f2a0c015fabd37fd1fef5fd709e10567f46b76274eaea2fd0bbda881573155378f3a8f9bdc400c0b6f4be1a20a4f89374e86f7113e747b20648f2b04551720fd947fdc8e17dbc1862ba67b8b8968e89e9052a267fd8fa5f5ab6444e1086267d19c8d30c1ac56458ec5186a95c0c976ab9d28923986427d606e7ac3aaab5ebc9149b7ffdc0cbdd2ab844f77d0785cbd47878722ba0d08e82f3628dcd603be70839d12ffddfc955b19370d0eca219276703db3605b593ed20bde9ddb1b3f431c3591474684d1a7d2c913432db66d1ad657953664a327a68dd3a2ef7fc67e3086f46c28403907aae5f2ab719e37715d705ed90be07c3e68f0037d7ed6da1139165a885d776c4ef20f552682df4328003b1207163d4059113baa26330797337cddf652ef1a92731315a1b8e97377aa65711c10d1e023357b0f0245b1fe93b8f3914995fb03a5121b0d45c2f519a045b9d44ae292d383bfdd8295a7b17ebd58c50b78ab100f6b759fdadeb0b9dba7f5c42ec497a3eb2e3a700ef66ba379adc9a5b7ab95679d575546a9247af6b69566add6f3d73dc349ccdb57ed1f257d15147d9124d68b878cceeaa5b78ab4592ede91fa62155923b1547ad767707e2c491e50ac0b366ba652fae3f1e7f8f5e08b154da0795044b0a1e69f6ab6aa29a5bd0a5f1f280f242bd251f40bfcee4671661fd34ed513eb06680e0b391fa12dbe24461bd0316dd705f0710e72ea7ca2853723b91b6bbad04cd33e2b50b88cc13de44d148de3452e44b640e180b742220250968fba7acd41cfaa23eb798d3f6ca56f06f964ebfdbfdf3d0003e97ac7f120d5c4211c863e7078205e45281047479a24b8b744c9e093e5eb442b2ea97ecb876c43614533206e0f409bb6900f462e60bef81d61ad465e230ec98875c530039dc3b96dd965a0971fefefdfa6bb1a087a49961f5ee8baf225eaffc40ba665c37af351b2b097e4a145f32a2fa25e7aa7663d978c32be9d01a220c80a1766e2d31e552906193b712cc39ce63a70f2f0937fdbd3e4d7431cddd6c0f7f906f932a10b4cfc208cb7850e8abf3ee172b021c70a3c9ef6e5792fa470c389eb4ae0397add98ba144a7232d15ed8bb74fce891b4e45bb499c0af020ac8aa9af6066b27cd6ebc7388426bc9e356243308bf5c2f2cfacf4af45fc1de2d61b8a6520006a623a1fb12e828d4d63c00af64adc31184dbb652242024737a245ab721349d961c7e21a2e0901d2902cb560b636cf69196dfe9106512c8928d0bd60f974bfd5106df3838d7fc6a47f2de3c803ebd157cdc63077dca7540ddeaced4c48b483bed365f3a07b6915d4d48ede2c1a7e9e5e3600ca9c1c77537e9712bfbaafdf705eb638cf2e53d4099040b6db36d04b190cf5407df2e1edf5d5656d993d22db8f609f9fac3f58d7047749461989bedf5da7478ecbc838bae74ba53d930a475a79da4d1aa5260c069affcadf8b49b61d2f20f3bbc5aa23ebf3d6e3f211addf340d735d3a0efd3f56ff6851234e93376164c98b26f94c928534384a73a0a38ad59daad83079a825421b8fa16b03b1aa2149b06378472d35ec9eeaad7df38c93468dc979a8d9e766103e898f996ef699454bb2a583e91a480f4bba06d0d25e554c5f0d315d92aebb685a5c2039e5ba09a4a84686561c2afefe5ff095fc174cd35ed4378a7e544df8a9cbd9822e2b3e07b9ed7dbfc7fedaebadbeb941204cd52852afa5fe05cba7d43ba730cd65565cd53dfa32752fb84a7c596bc754e78819fe8610445302891ab91fdcfdf63ec32b61848f4f0bb894130f08cd3e4b70fc93a67fd484a253bd33da466f5754b59a9f329a8faef66cb4383cce2d6fb927979879b9693837c5c69519edaa188fd35c51a40bb72f68e9d74d1baf4b5eeb71eea6c8bdea81d7c12f0f05a539e494a42e1d46feff09b880b34afb5ea10ca3bac8f3a65b3db241afa41ea80f379785c7215bfca45bdcb3b2f41592785e52ccb658b671177eb852ebe993c902416eefa64f1c705de4dec032e5aaa0e6a9b41438cf0ab6076fa9c77d419f417a4569965802a3113eff611171f1c24c65ecf198843fe42193c634ebc705d6c1a5e76c71212d84bd30eebc2e139c6a64fe90070de34c089a1f0971a89fd4186d7a5f2165aa2763b1231c31c800bfc3f0e5cf4212b902da90e4f43429792007491cc28f6202a90d75a3e52a76b52d14b6aeb3b84581a35493a3113ed414a9d5fec77e22b043bc274e6a925c35bf2d68324c47c20a1dd723726c1b908869f1b5dddcaa12a3b6661ab6b6af97ff2eda11a8c6f4389df93a743d1b908ee2ab795d7f5ceeb4a3d716b423787c027513d1412128ee0b39a8ba860af043d5b023d412d8214c8129126547bb8cb42b1342be673764f975db41bef51f6534f1547b30f39d4b7583777b1627ee0c501a2cd7757398d7a4464ee133c8d25a763e247d6a2c170a0b6a9a4ff9498f2ea786736d0669f6e6bb2de53b746e02a46b5d74760931e47722c6046a523932ce88adab39d66f69092418cb0c1eea0d613598a49aad61358de0a02e8b370c573f38faabe00971bae74e9bde892f369ee86e23f65bc126a118c94b5892299b91f1d448044edda292c57b3bb300b3f4a9e8f5be592059914ab32625967c7edd0ee6cf51a283a5ae771a8a47098390bd0d7dfd9a0224f38d4bde64eb6cd767c3f328bd31875bf598f11133d5fe9cfe3f504ad0e29d6cb1f2a7605a0d1ca68ec559948b8587915bd2f05153e1b7f20f840d3a7fb69adb8835c6d209400e122d3707a853258bad36c4ab2b5012535d596a3b8d58634e811658f4c45380c0bc7d859607a04f1782b19cdcd45d22ea1439b4ab0118708b73f7edca05195d60bff131443022ca41f35e4ed32695ace0dae72f26f5a36ed3099a02c7fa3ea08a63dbcc5b565a20c178101d0abfe040f620a5d96613b97697b8cde51206b3b149c43e84be7b0b667767f22a3e1905ad6ae69df12dd8cb85b390207b90efca90e9f8e4a4fa043e0733a659d3c828b62e3f2d2adc4001aae72dfabff8d3a32e7666b005b41e0187c69f0cb0cf632b0c859477718ccb02f6fbe2c370d9894211a46ae146afccb5072c36be2a9fdaf59c0721d171e32480a883bc395a9fd38953216b8fe522a9d7e8196df9a6c4d0adf36ce37d18ece0716e697aa659b2f2c0eb7c94ad213fbb37c23278f1360174d7bc5f4b4f686ad5aa5611a4d01389acfe9a69103ec50edddf310ad79fa655714bd3c54f155a8fd95375a7ffedf5720f5b53857cb957ab3f6159d6336aaab960e5be085ae04d0086b3a43e4d5ad48af462b2988fcab25900263db7f1c8953510f7802f11855db8ccc45f6d0c996afe4496816235025993356a90d5f6870a40e5aa8a33ed6b8c6ff74fe02749c7495fad9bebef4d033bbf6e723ae913321d9c5fc1dab1d23be1ebc7906c67d055f627e7c1325f8225aff1e05e894bd52711a5cb22f3aa81c9e6a21ee85b2019e9c9fe6ce1d01ba8572faa789a910ebf10f1f70e49fd95582645febf9bddef655c94ac4f08a9c904f1ee10038bfe7dafda98ef923ea76998635a5fc153d826113b84cf4ae6ae966bc31bfc2a36e491ddbd1c2b5a3bbcf9f1e1883bffd719e2306e83fc926b4166c418e6d9f4e98f60c3f4d2775efe1a5408110425950b2132bc2eea771a345effa958fdb63bc3d69d92f303e17abbee165116d8e60c47d8bfdd40834198fa95102f6f5bda00c67c3df8b73394c358407c442b2969642a8bece4b3b461a8bfda2fa595d2b6c15341d563cde027729f7852ac79171f060e4d45450c6bfa11b9782dc75d898a36337b56a23ef397dd0377264a04f3fe9a07c2d4fa3f85799e7b3bf76aff770724a7388ede76de8bc61288cc57d97184c0d0aadc496544836c89560605732bb084a5e215cbf600c511542f11beb4027838a54489de4daf434a1aa68f63e09095a8bdf8017921d82b8fb3b2ee29a1257b7829188ef7794ba6c9ad7834ba1f7a05515974084a1338a94f5533adec334601b1592617d6da1c777b724cf42e07c412a8af7948ae436e3d0768b7472778caba59eafe2809bf9aa83c74f235162f305eccee7ac12792245ad2a1b6153af3e1fafbc74d04835afbe98971d70d0cb1790f3b1eb545a96b3cbceb422be8a0a99653f452c5dc187cc5469e411a9e8bc3f7f3560103d99f2bb1c51e235dcea7781df460aed1d18907e24fe251020652494b5a5a3f64304fe195a78787afc29b68fc9d28d474cb13c43596509e708649616ec8920c1b073de25df3e4f7e9e38d58b25b58cdc81640a4dcf25edd14d56fd1a4ddd1417de61ce8d2b1d16d9976de05b5de5faafbecc5a8135f370031f86f33328d3c0f03f36fb646b98405072c7b6865441bfa79471a4e736bdca28e31fa2de6a11df6e2149ae83d51001486ec690f87d712af13c867d18f1b3ce0f2766556d82ca7b51b794e2134c3fc32392ede83c7b7a1a20f0f043d2138b64001aa3e2cd315f05e7552d3460eabe4edff95e1450f9171ca625cf4f818478e6efce2a2b8d17bbc91895edf560689156b39a753b3b9f1798761615e42226a9c193db1c2544436e0df62c4a1f1ff15bcf99e05a16a42ef1f42398fa2ef91e23d192716ab3df75c660868b38c7f9527449892903e82121bb380704940be96f3768065ba711cdda74d12c7736669f9083950f2e73a876f43c4a2d358d6d3c3c24778aefa12273ed1e1d12e83c4140e8d7d42c93e3159a5d64fc4430c78fa6fd14cc999e4fa0c5b2652b96282073d3726d0e9c681b7c2d86f2a0a21af56d8c3aca59d2e7220ad5193d8a13fa4d588a9d8fd253296e0d74dccc4e76e2a93712f766c1c9bd0672fea9f979418727a8de00da874e9d1973359a56033ec6c5254273f971b9966c7c6da6119107ea382bd77a1f6c66f4bc659a5468f622cc7b0ecac676507bb18f6cd7c0477d3b9dea38ab7c49b9d8bc9b0bbe32be9ce56c7afa72fa93f28092282c8ade9063280113de61c3443f18742f91535b85dcee1509a58316a2bc775015eb70a87c533797c8640236b8ee48cc49fd47d4460f54311f1818d1c78326ae89a5f67b5b61adf58d80aa455fcfd3bd61d660a65055b015b904ac0a43a708a24a86de1430b4c56b146ece13d536482cc81fe0dcfa5a850f465980d867150c1513f1a45671cea116da3e7ea42d8590845410d8f5895adc0b17748c3d535bfa3a4f0a61387f8c38e630e1b968649654d7ebc99c46b95fb028416738d152e78dc9b061a8476661b36e2b001fbfc43f32e883bc6edf74f146e7347940dacefce71639d5a547d397bc9136c9bc518d6c8638bc028d3698ab610e757c9fb5b93c2d28561fd40f7b56c6bea8c0af947dbd2307f128058e53ed27842b0ca803401463cf1bd3924fad1a8862cb19f31eb2cd972d101ee4394d0023a93b2582d84a6d1d055080e7f0b5f9d763803d1bf1dd3872609e4bc602741059e0ca586cc24a825d716157059650e2fb5c0f4c07eabe41093d9ed6ac8bc2499bb57ab74a2a1ef229e15753f1d425f1354cebcd107aba04f07addf93c2299a78a850475c883c5c612a8407a6294105619e4f023ebb8ee4b0c0acdafb9aef0c4f2bdf81aad0f465644fe0596ac5758e67f7fdb5e2a482db8bcb4a7d5cf561a9acfe673e163a6217a60302170649638a8d331961fecac22bcc9d983370fc2828dad130b28f75c34a91b7b6527638c9d3bbcf70bad7adbed2fcd088db37c7cdd0a7735b0e446dc413fcf3b318519cefe5c46b03be0dfbabccd5e559b11309ffc1c58fcd25e925dc37b0467b8aa1e9e5a8b674b9ec69835360417da0304058034a29585f167dfe1510c2cbf231ac744c8980e5cadbe9cefac12adf88f190ef5c4085942b87d35043e9050fbb4c0637e75947bbe7650ce03a852ec55677aeda28e238df4312bb5d3d0ec47b6604803fc0fec7639b6a0b2076575a45fe5c2e1bd71c10a436105e9c7a401cc87454c82a565b7a47296320d85869b08236c35974ffecbb089f9b2e6f4a4a39a992445551516b7240b4ef626da693feab668d8d4d721324be05216279260bb69b4e873e66ced66b84c785c2d2782e77c9e245deacf56000ae6735c8238d963e610994be71680004dafd8bc23d79d170bffbd42c605a2ad755f697866328926702e3e3bb430c86864eba2630f667def1ec74b70c6510e6619fcf29d7f1a1819910c4b5cde1e56469cf570672ced18022afe2100ca8a25ddee6a79cab2a5abb0bd588f0b36adec5df2a7751fa4d743f2c76faf857d371efcb09e35bd6ede93ad1a1d4033aae4cd50d322e9475c2ab9dd3bd4a10ed2e9776da43540b432d75ad33eda87c1a72dc34eb98a4daa7b1ec120b4b5a6b3e3548eb4c46a571a3c0094e510f3a2d96f50a2c15663171f6ede093085d69f1e67131c7d2a7da0238570acf6dcfe7090aa155a380ed8f0c098e1f2d505ed982f0a8d9db8985df5a143ec352013c27aa851970cddb24601e7b05192a97dd3e2a1a4baa0b62771404b51fdab97ce23230d8562f6bf955b649fd17c94faa5f6a6daa06db46dd9b97aa1f2088d450e78bdb6bd5fae74e9eeb1c62809ac0173334482937d166c852975d56d729609119f3df51bbc907c5fa0ffcd69b36b89850598aa79ee3e7f7b03dabf1414b644f53930aa937c5d8c8f663cd0160a089af22ce522bf4de24554428ce567f33eb4b600c4943499bf81f3df3f6a74df21dc049847edcbd468e864a78b2e2a49bbc87e440802a17125e68d237dce9134b5ca9ca48246c05c6e0d690e27371d0857a1f3ad35683a8c51a3dfae804b8408cb8fc9f36818888c01394f2f4eea55b5266cffddd4b8ef09ae8bbf438ef7e4a72cb020cd43d84bc62609cdd426c7d8f702f3c1e4bb85661b636bb2bc8ba8b083227737cffd8f80325952e2dab291f5c3f8322751c3a936342535dc48da5253ca6d9aecc51ba05608f3754141e3b83b1b90a61fbb4d98a420071bbed11628a3e513f270776fc57be094d9ab03c338741806d806482a41c0bd48aaad6754b67b3bd4448555e60ec02557dfe58534068ac5b6ca58b897a47fa72d980f34ad1e8d89509bad01df310938d054b75189fc6eabcde4c885fa5adecea2b69388e2ccfd927d595bb4669f4977a22344235f77be405b98b19df7dc9b3649cb18f5672fdf33e52473a70761be5f3bdfcab4cf30848a218d08d93e7fd74cb3bb47416d806f06575318a3da2c11490ef7644dc1e71ecf56a2479ec3a8e2578891b05b345c88020604ea5ae04317a0b0ac4098a6ac627215a04d5c97ff84221d6e0cfc99bf0c23e008b0eb5d83b315b79e295551e02ac2f84e48c330150c53714c824bd3d410cee49dcd44118e83f2444fda0ca3e498acd11f5b4b3cf79adf0088e1b6e8b7a4ca784310945e95e35be020b79112490e0f26847df0bf0f2521e6c204c9325d31d9d06ebc6a913e25e77791b530a0c7a34dd7fa0fb6e1eaeed4925ff74d7208cf39b21c8a55e08a9106bb325d4a71850ea55eabe48c590dac1377308f1eed8c280fe206ec5617779892ffed7e7b29b344a831cf6e3e9ab834bb958ff598b800c3de4ec3ba603ef3360cff301eec43458b00bf5dea99b369b4ad7d081bb46c013ae7a991f1dee593b95fc5417349f7ec88b0733ce6dff97b954b2542cdcd5cc41a217c2f229a40021c9bde26b65ebe35b64c27fe51fed20537c254bff5ce0d2a0124fcade31c08bf09b0b79a394b8ce74ff871bc27984b26b5bc0572b3f093627c92e6ba8793ebcdb222347880da5673d411354bf31a0deb47e51fdc02228caf57b9a5f3535d70da381e9d535192cfcc0774dad3ea669ff208b5aa7b76acda1dab30207bb3c00dc14cb73516b5064a05748930571460088f6f92f354399915ae666a3e8b551e76c5e5549c025f1edf80a3e4afb04869419effa765e4e61636012df0b95b96d2275bcfe49238ccfd23f6b21ae9402f886f3146c57775829f0eca5ef44d917a4afd95027ffc2aca95fd02b5cdcb9b34a62907183301bfe2eda2b3756714dd79ecebe531fdfc15aaef02f9313b80fba7a9e9ef69da607b23c60643c26b7bbdab141352191655b4e5f0afc0f9475c1982a41456a56d5a68ebc50152043d161b6ae2974abaad9539bda852684160334b9783896bc869b0dad65cbbfa4f7ad02c2d5cb83f9dfd1c58c4f725cac716f5e171acedc55441af25cfe045afd934c18aba36d4f54413f46a7f5679b9f47ef5a7ddd714d4b5e1330afa88096c06a19a7087788bba3200a9c86e9204781b8bc484c81a6206cd861b533838bf9278c49640e540b6c446b94ac5c6d4673fddcdda8db4b947250bc0c43fa8f6ecfe0c6dd5693d5e1dd1492618f3ce256758178b894a4703ef2670d9c6bcea0d345fdfe1be7937dabb4658b494b98e01763f0dd628596a4e0fc</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 工具分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 秘密科技 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0.Linux基础命令</title>
      <link href="/2025/09/08/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/0.Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/09/08/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/0.Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>终端打开：一个窗口打开第二个：<code>Ctrl+Shift+t</code>，不同串口打开：<code>Ctrl+Alt+t</code></p><p>虚拟机Ubuntu安装参考：<a href="https://blog.csdn.net/weixin_48728769/article/details/126989849?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170693530616800182141076%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=170693530616800182141076&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-126989849-null-null.142%5Ev99%5Epc_search_result_base9&amp;utm_term=Ubuntu20.04%E4%B8%8B%E8%BD%BD&amp;spm=1018.2226.3001.4187">下载安装Ubuntu 20.04详细教程_ubuntu20.04下载-CSDN博客</a></p></blockquote><h1 id="文件和目录操作"><a class="markdownIt-Anchor" href="#文件和目录操作"></a> 文件和目录操作</h1><p>参考：<a href="https://blog.csdn.net/weixin_45908488/article/details/123703179?spm=1001.2014.3001.5502">Linux命令大全（常用的命令解析）-CSDN博客</a></p><blockquote><p>查看文件</p></blockquote><ul><li>查看当前目录里面内容：<code>ls</code></li><li>查看当前目录里面内容(详细信息)：<code>ls -l</code></li><li>查看当前目录里面内容(包括隐藏)：<code>ls -a</code></li><li>查看系统加载哪些驱动：<code>lsmod</code></li><li>查看系统有哪些usb设备：<code>lsusb</code></li></ul><blockquote><p>文件夹操作</p></blockquote><ul><li>进入哪个文件夹(不知道有哪些需先查看)：<code>cd 文件夹名</code>，连续进入：<code>cd 文件夹名1/文件夹名2</code></li><li>返回上一级：<code>cd ..</code></li><li>切换到系统根目录：<code>cd /</code></li><li>切换用户主目录：：<code>cd ~</code></li><li>返回当前文件夹所在路径：<code>pwd</code></li><li>创建文件夹：<code>mkdir 文件夹名</code></li></ul><blockquote><p>文件操作</p></blockquote><ul><li>新建文件：<code>touch 文件.后缀名</code></li><li>删除文件：<code>rm 文件.后缀名</code>，删除文件夹中后缀名全部文件：<code>rm *.后缀名</code></li><li>删除文件夹：<code>rm -R 文件夹名</code></li><li>复制文件：<code>cp 文件名.后缀名 路径</code></li><li>移动文件：<code>mv 文件名.后缀名 路径</code></li><li>查看文件中内容：<code>cat 文件名.后缀名</code></li></ul><h1 id="管理员"><a class="markdownIt-Anchor" href="#管理员"></a> 管理员</h1><p>查看登录账户：who</p><p>-q或–count : 只显示用户的登录账号和登录用户的数量</p><p>-u或–heading : 显示列标题</p><p>管理员权限：<code>sudo 操作</code></p><p>创建root用户：<code>sudo passwd root</code>，进入root用户：<code>su root</code></p><p>切换用户：<code>su 用户名</code></p><h1 id="安装应用"><a class="markdownIt-Anchor" href="#安装应用"></a> 安装应用</h1><blockquote><p>查看IP：ifconfig</p></blockquote><h2 id="apt"><a class="markdownIt-Anchor" href="#apt"></a> apt</h2><p>参考：<a href="https://blog.csdn.net/m0_46278037/article/details/120232679?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171212013516800182718297%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171212013516800182718297&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-120232679-null-null.142%5Ev100%5Epc_search_result_base9&amp;utm_term=apt%20Linux&amp;spm=1018.2226.3001.4187">详解 Linux 中 apt 命令的使用_apt purge命令-CSDN博客</a></p><p>安装：<code>sudo apt install &lt;package_name&gt;</code></p><p>使用 apt 更新包数据库：<code>sudo apt update</code></p><p>使用 apt 升级已安装的软件包：<code>sudo apt upgrade</code></p><h2 id="换源"><a class="markdownIt-Anchor" href="#换源"></a> 换源</h2><p>根据图示更改为国内镜像源，参考：<a href="https://blog.csdn.net/qq_45878098/article/details/126037838">ubuntu换源-CSDN博客</a></p><img src="https://s2.loli.net/2025/12/28/f64evodZjgm9lz2.webp" style="zoom:50%;" /><h1 id="文本处理"><a class="markdownIt-Anchor" href="#文本处理"></a> 文本处理</h1><h2 id="vim"><a class="markdownIt-Anchor" href="#vim"></a> vim</h2><p>参考：<a href="https://blog.csdn.net/qq_29689343/article/details/116162089?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=Linux%E6%96%87%E6%9C%AC&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-5-116162089.142%5Ev100%5Epc_search_result_base9&amp;spm=1018.2226.3001.4187">linux常用命令：文本编辑_linux编辑文本-CSDN博客</a></p><p>安装：<code>sudo apt install vim</code>，创建一个.c文件：<code>vim 文件名.c</code></p><p>当编辑文件完成后按 Esc 键即可返回命令模式</p><p>在命令模式状态下按<code>:</code>键，Vim 窗口的左下方出现一个<code>:</code>符号</p><blockquote><p><code>wq</code>：保存并退出，<code>wq!</code>：强制保存并推出，<code>q</code>：不保存退出，<code>q!</code>：不保存强制退出</p><p><code>set nu</code>：文本编辑显示行号，<code>/需要搜索的文本</code>：搜索文本（n查看下一个，N查看上一个）</p></blockquote><p>gedit：文本编辑器</p><h1 id="压缩与解压"><a class="markdownIt-Anchor" href="#压缩与解压"></a> 压缩与解压</h1><blockquote><p>通用形式</p></blockquote><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">tar [选项] [文件]</span><br><span class="line"></span><br><span class="line">文件：指定要处理的文件或目录列表</span><br><span class="line">选项：</span><br><span class="line">    <span class="literal">-c</span>: 创建一个新的归档文件。</span><br><span class="line">    <span class="literal">-r</span>: 向已存在的归档文件中添加文件。</span><br><span class="line">    <span class="literal">-t</span>: 列出归档文件的内容。</span><br><span class="line">    <span class="literal">-u</span>: 更新归档文件，即添加比归档文件中副本更新的文件。</span><br><span class="line">    <span class="literal">-x</span>: 从归档文件中提取文件。</span><br><span class="line">    <span class="literal">-v</span>: 在处理文件时显示详细信息。</span><br><span class="line">    <span class="operator">-f</span>: 指定归档文件的名称。</span><br><span class="line">    <span class="literal">-z</span>: 通过gzip进行压缩或解压缩。</span><br><span class="line">    <span class="literal">-j</span>: 通过bzip2进行压缩或解压缩。</span><br><span class="line">    <span class="literal">-W</span>: 确认归档文件的正确性</span><br></pre></td></tr></table></figure><blockquote><p>tar压缩：tar -cvf test.tar *.c</p><p>tar解压：tar -xvf test.tar</p></blockquote><p>压缩/解压缩(zip/unzip)</p><p>压缩文件: zip [-r] 压缩文件名 被压缩的文件</p><p>解压缩文件:unzip 打包文件.zip -d 解压后的目录</p><h1 id="查找"><a class="markdownIt-Anchor" href="#查找"></a> 查找</h1><blockquote><p><code>find</code>：查找文件，sudo find  /home/wfeng  -name  “*.c”</p></blockquote><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">sudo find [起始目录] [表达式]</span><br><span class="line"></span><br><span class="line"> 起始目录：find 命令开始搜索的目录</span><br><span class="line"> 表达式：</span><br><span class="line">    <span class="literal">-name</span>：匹配文件名。</span><br><span class="line">    <span class="literal">-type</span>：匹配文件类型（例如，f 表示普通文件，d 表示目录）。</span><br><span class="line">    <span class="literal">-size</span>：根据文件大小匹配文件。</span><br><span class="line">    <span class="literal">-mtime</span>：根据文件最后修改时间匹配文件。</span><br><span class="line">    <span class="literal">-exec</span>：对匹配搜索条件的文件执行命令</span><br></pre></td></tr></table></figure><blockquote><p><code>grep</code>：查找文件中的字符，grep “d” a.c</p></blockquote><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">grep [选项] [搜索模式] [文件…]</span><br><span class="line"></span><br><span class="line">[选项]：可选，用于定制grep的行为，例如是否忽略大小写（<span class="literal">-i</span>），是否显示行号（<span class="literal">-n</span>）等</span><br><span class="line">[搜索模式]：想要搜索的文本或正则表达式。</span><br><span class="line">[文件…]：要搜索的文件。如果省略文件名，grep会从标准输入读取数据</span><br></pre></td></tr></table></figure><blockquote><p><code>dmesg</code>：系统内核打印，特定搜索：dmesg | grep usb</p></blockquote><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">dmesg | grep [选项] “搜索字符串”</span><br><span class="line"></span><br><span class="line">dmesg：用于获取内核消息</span><br><span class="line">|：管道符，将 dmesg 的输出传递给 grep</span><br><span class="line">grep：文本搜索命令</span><br><span class="line">[选项]：可选参数，用于定制 grep 的行为，例如忽略大小写（<span class="literal">-i</span>），显示行号（<span class="literal">-n</span>）等</span><br><span class="line">“搜索字符串”：要搜索的文本字符串</span><br></pre></td></tr></table></figure><h1 id="基础编译测试"><a class="markdownIt-Anchor" href="#基础编译测试"></a> 基础编译测试</h1><p>安装gcc：<code>sudo apt install gcc</code></p><p>编译 .c：<code>gcc 文件名.c -o 生成文件名</code>，再运行编译生成的可执行文件：<code>./可执行文件名.后缀名</code></p><p>查看文件属性：<code>file 文件名.后缀名</code>，例：file mian.c</p><p>修改权限：<code>sudo chmod 777 文件名.后缀名</code>，例：sudo chmod 777 test.c</p><h1 id="其他命令"><a class="markdownIt-Anchor" href="#其他命令"></a> 其他命令</h1><ul><li>查看网络信息(IP地址等)：<code>ifconfig</code>(<a href="https://blog.csdn.net/AnChenliang_1002/article/details/131466890">Linux下ifconfig指令详解-CSDN博客</a>)</li><li>echo：输出指定的字符串信息或显示变量的值的命令(<a href="https://blog.csdn.net/rhn_111/article/details/128954511">Linux基础命令-echo输出信息_linuxecho怎么把字符串输在最顶端-CSDN博客</a>)</li><li>显示应用运行的进程：<code>ps</code>，显示系统全部进程：<code>top</code>(<a href="https://blog.csdn.net/Y1730008223CONG/article/details/126533853">【Linux】ps和top进程管理命令_ps和top命令的区别-CSDN博客</a>)，退出：<code>ctrl c/z</code></li><li>杀死进程：kill -9 进程号</li><li>发送信号到进程：<code>kill</code>(<a href="https://www.runoob.com/linux/linux-comm-kill.html?source=1">Linux kill 命令 | 菜鸟教程</a>)</li><li>关机：<code>shutdown</code>(默认一分钟后关)，重启：<code>reboot</code></li><li>管道符号 | ，例：ls /usr/bin | grep ‘^au’</li><li>查看系统监听端口：netstat [-anptu] ，例：netstat -anp |grep mysql<ul><li>-a : 显示所有已打开的端口</li><li>-p : 显示对应的进程id</li><li>-n : 用数字显示对应的端口， 不用别名显示</li><li>-t : 显示所有tcp协议端口</li><li>-u : 显示所有udp协议端口</li></ul></li><li>查看系统监听端口：lsof -i，例：lsof -i:3306 列出使用端口3306的进程信息</li><li>查看日志信息：head 文件名，默认显示日志文件有前10行内容<ul><li>tail 文件名，默认显示日志文件最后10行内容，tail -f 文件名: 实时显示日志的文件信息</li></ul></li></ul><h1 id="环境搭建"><a class="markdownIt-Anchor" href="#环境搭建"></a> 环境搭建</h1><p>通过SSH，Windows可以连接到Linux，在MobaXterm中操作Linux</p><p>安装SSH：Linux <code>sudo apt-get install openssh-server</code>，Windows <code>MobaXterm软件</code></p><p>MobaXterm连接Linux，按照图中填写IP，连接后输入Linux用户名以及密码</p><img src="https://s2.loli.net/2025/12/28/3R6KwxFv25aEBgy.webp" style="zoom:50%;" /><h2 id="传文件"><a class="markdownIt-Anchor" href="#传文件"></a> 传文件</h2><h3 id="ftp"><a class="markdownIt-Anchor" href="#ftp"></a> FTP</h3><p>安装：<code>sudo apt-get install vsftpd</code></p><p><code>sudo vim /etc/vsftpd.conf</code>，找到 #write_enable=YES，把#删掉，然后<code>Esc</code>、<code>:</code>、<code>wq</code>、回车</p><img src="https://s2.loli.net/2025/12/28/8PXDZAeEBTKiNbW.webp" style="zoom:50%;" /><p>重启FTP：<code>sudo /etc/init.d/vsftpd restart</code></p><p>Windows安装：<code>FileZilla</code>软件，输入Linux的IP、用户名、密码 连接Linux的FTP</p><p>本地站点则为Windows的文件，远程站点则为Linux文件，双击Windows中的文件自动传到Linux，在Linux右键下载则传到Windows</p><img src="https://s2.loli.net/2025/12/28/aMFVkufTJzCpdbS.webp" style="zoom: 67%;" /><h3 id="samba"><a class="markdownIt-Anchor" href="#samba"></a> Samba</h3><p>Linux安装：运行以下命令</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">sudo apt<span class="literal">-get</span> upgrade</span><br><span class="line">sudo apt<span class="literal">-get</span> update</span><br><span class="line">sudo apt<span class="literal">-get</span> dist<span class="literal">-upgrade</span></span><br><span class="line">sudo apt<span class="literal">-get</span> install samba samba<span class="literal">-common</span></span><br><span class="line">samba <span class="literal">-V</span>//如果出现下面版本号说明已经安装了samba服务器</span><br><span class="line">sudo mkdir /home/share</span><br><span class="line">sudo chmod <span class="number">777</span> /home/用户名</span><br><span class="line">sudo smbpasswd <span class="literal">-a</span> 用户名//需要确认输入两个相同的密码确认</span><br><span class="line">sudo <span class="built_in">cp</span> /etc/samba/smb.conf /etc/samba/smb.conf.bak//备份 smb.conf 配置文件</span><br></pre></td></tr></table></figure><p>修改文件：<code>sudo vim /etc/samba/smb.conf</code>，在最后添加下面的内容，里面名字(xinzai)要改成自己的</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">[<span class="type">global</span>]</span><br><span class="line"> </span><br><span class="line">    ; 创建工作组 设定 Samba Server 所要加入的工作组或者域  </span><br><span class="line">    workgroup = WORKGROUP </span><br><span class="line"> </span><br><span class="line">    ; 为了防止出现中文目录乱码的情况。其中根据你的local，UTF<span class="literal">-8</span> 有可能需要改成 cp936</span><br><span class="line">    ; display charset = UTF<span class="literal">-8</span></span><br><span class="line">    unix charset = UTF<span class="literal">-8</span></span><br><span class="line">    dos charset = cp936 </span><br><span class="line">  </span><br><span class="line">    ; 是否允许guest用户访问</span><br><span class="line">    guest ok = no</span><br><span class="line">    </span><br><span class="line">    ; 注：如果 <span class="comment">#security 存在就直接修改，不存在就创建</span></span><br><span class="line">    ; security = user </span><br><span class="line"> </span><br><span class="line">    ; 安全模式  我们设置用户安全级别</span><br><span class="line">    security = user </span><br><span class="line">  </span><br><span class="line">  ; 说明：用来定义用户名映射，比如可以将root换成administrator、admin等。不过要事先在smbusers文件中定义好。</span><br><span class="line">  ; 比如：root = administrator admin，这样就可以用administrator或admin这两个用户来代替root登陆Samba Server，更贴近windows用户的习惯。</span><br><span class="line">    username map = /etc/Samba/smbusers </span><br><span class="line"> </span><br><span class="line">; 共享名，该共享标签，该名字为在电脑上看到的共享名 注意网络映射的路径是这标签名字不是共享路径的名字</span><br><span class="line">[<span class="type">share</span>]</span><br><span class="line"> </span><br><span class="line">    ; 该共享描述</span><br><span class="line">    comment = Shared Folder with username and password </span><br><span class="line"> </span><br><span class="line">    ; 共享文件夹路径</span><br><span class="line">    path = /home/xinzai/</span><br><span class="line"> </span><br><span class="line">    ; 表示是否允许匿名访问该共享目录</span><br><span class="line">    public = no</span><br><span class="line"> </span><br><span class="line">    ; 配置的Samba访问账号 指明可以访问的用户</span><br><span class="line">    valid users = xinzai</span><br><span class="line"> </span><br><span class="line">    ; 表示是否可以在 Window Explorer中显示该目录</span><br><span class="line">    browsable = no</span><br><span class="line"> </span><br><span class="line">    ; 指明新建立的文件的属性</span><br><span class="line">    create mask = <span class="number">777</span> </span><br><span class="line"> </span><br><span class="line">    ; 指明新建立的目录的属性</span><br><span class="line">    directory mask = <span class="number">777</span></span><br><span class="line"> </span><br><span class="line">    ; force <span class="built_in">group</span> 和force user 规定创建的文件或文件夹的拥有者和组拥有者是谁 </span><br><span class="line">    ; 一般这两个值来空，则表示拥有者和组拥有者为创建文件者。 如设定值，如force <span class="built_in">group</span>=xinzai</span><br><span class="line">    ; Force user=yhq，则不管是谁创建的文件和文件夹，拥有者都为yhq和yhq组。</span><br><span class="line"> </span><br><span class="line">    ; force user强制把建立文件的属主是谁。如果我有一个目录，让guest可以写，那么guest就可以删除，</span><br><span class="line">    ; 如果我用force user=yhq强制建立文件的属主是yhq，同时限制create mask = <span class="number">0755</span>，</span><br><span class="line">    ; 这样guest就不能删除了。</span><br><span class="line"> </span><br><span class="line">    force user = xinzai </span><br><span class="line">    force <span class="built_in">group</span> = xinzai</span><br><span class="line"> </span><br><span class="line">    ; available用来指定该共享资源是否可用</span><br><span class="line">    available = yes </span><br><span class="line"> </span><br><span class="line">    ; 共享路径读权限 设置共享是否可浏览，如果no则表示隐藏，需要通过<span class="string">&quot;//ip/共享目录&quot;</span>进行访问</span><br><span class="line">    browseable = yes</span><br><span class="line"> </span><br><span class="line">    ; 共享路径写权限</span><br><span class="line">    writable = yes</span><br></pre></td></tr></table></figure><p>重启samba服务器：<code>sudo service smbd restart</code></p><p>Windows：安装图中所示，创建映射网络驱动器，文件夹填写：<code>\\虚拟机IP地址\share</code>，例：\192.168.31.169\share，然后输入账号和密码，创建时一般都是与Linux账户设置一致</p><img src="https://s2.loli.net/2025/12/28/n3ZOLtQuoG8gCNa.webp" style="zoom: 50%;" /><blockquote><p>scp：<a href="https://www.runoob.com/linux/linux-comm-scp.html">Linux scp 命令 | 菜鸟教程</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 嵌入式软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux基础命令 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客搭建相关</title>
      <link href="/2025/09/02/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9B%B8%E5%85%B3/"/>
      <url>/2025/09/02/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9B%B8%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="github博客搭建及使用手册"><a class="markdownIt-Anchor" href="#github博客搭建及使用手册"></a> GitHub博客搭建及使用手册</h1><p>Hexo+github搭建个人博客 教程：<a href="https://blog.csdn.net/wushibo123/article/details/124619123">【2023最新版】Hexo+github搭建个人博客并绑定个人域名_github博客绑定域名-CSDN博客</a></p><p>hexo博客换主题 教程：<a href="https://zhuanlan.zhihu.com/p/385525053">https://zhuanlan.zhihu.com/p/385525053</a></p><p>珍藏的 Hexo 博客主题：安知鱼：<a href="https://docs.anheyu.com/">安知鱼主题</a>，Solitude：<a href="https://solitude.js.org/">Solitude</a></p><p>GitHub+Typora写博客+图片上传 教程，插入图片时若前面有弹出选择不需要选，在source下<code>_posts</code> 文件夹下生成 md 文件，生成完成之后，会有对应名称的文件夹生成（要删除移到其他文件夹，或改文件夹名字再移动进去），图中要保存在设置的路径下的${fiilename}文件夹中，然后再复制进去（注意：文章距图片路径）参考：<a href="https://blog.csdn.net/Qxiaofei_/article/details/124629908">【Hexo】GitHub+Typora写博客+图片上传_hexo 上传图片-CSDN博客</a></p><img src="https://s2.loli.net/2025/12/28/3t1GcLi4xDMK2jJ.png" style="zoom:50%;" /><p>在项目中的_config.yml网址需要用这个，否则可能上传时卡顿导致错误</p><img src="https://s2.loli.net/2025/12/28/FATHSvhQIaNCO87.png" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//创建md文件</span><br><span class="line">hexo new post &quot;新建博客文章名&quot;</span><br><span class="line"></span><br><span class="line">//上传博客</span><br><span class="line">hexo cl &amp;&amp; hexo g  &amp;&amp; hexo d</span><br><span class="line"></span><br><span class="line">//文章分类方法</span><br><span class="line">categories:</span><br><span class="line">- 分类名字</span><br><span class="line"></span><br><span class="line">//文章标签</span><br><span class="line">tags:</span><br><span class="line">- 标签名字</span><br></pre></td></tr></table></figure><p>Hexo添加分类和标签，<a href="https://blog.csdn.net/cflsup/article/details/123452683">Hexo添加分类和标签_hexo文章分类-CSDN博客</a></p><p>npm下载插件慢等问题，改用淘宝源 教程：<a href="https://blog.csdn.net/m0_52861000/article/details/132412681">npm下载慢 淘宝镜像失效-CSDN博客</a></p><p>Hexo设置文章置顶+私密文章 教程：<a href="https://blog.csdn.net/cungudafa/article/details/104346521">Hexo（sakura）设置文章置顶+私密文章_hexo文章置顶-CSDN博客</a></p><p>Typora编写技巧：</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">&amp;</span>ensp;<span class="built_in">&amp;</span>ensp;<span class="built_in">&amp;</span>ensp;<span class="built_in">&amp;</span>ensp;//编写的缩进要在网页中显示，需要在文本前加入四个</span><br><span class="line">&lt;center&gt;需要输入的文本&lt;/center&gt;//需要文本居中</span><br><span class="line">&lt;font color=&quot;red&quot;&gt;&lt;strong&gt;需要输入的文本&lt;/strong&gt;&lt;/font&gt;//文本标红加粗</span><br><span class="line">https://blog.csdn.net/lose<span class="built_in">_</span>hair/article/details/128576954//文字高亮以及文字标红教程</span><br><span class="line">https://blog.csdn.net/qq<span class="built_in">_</span>41261251/article/details/102817673//一些文本编辑技巧教程</span><br><span class="line">//高亮</span><br><span class="line">    ==highlight 1==//高亮黄色，但网页不显示</span><br><span class="line">    &lt;mark&gt;highlight 2&lt;/mark&gt;//高亮黄色</span><br><span class="line">    &lt;span style=&quot;background-color:rgb(100,200,200,0.5)&quot;&gt;highlight 3&lt;/span&gt;//高亮自定义颜色</span><br><span class="line">    ```code 1```//高亮灰色</span><br><span class="line">    `code 2`//高亮灰色</span><br><span class="line">若一些符号显示不了，则在前面打一个 <span class="keyword">\ </span>显示，或打空格</span><br><span class="line">图片有两种语法，一种HTML（可以缩放但不美观且图片下面没有小标题）另一种 Markdown（美观且有小标题</span><br><span class="line">但不能缩放图片）图片右键可选择图片转换语法，选择对应需要的语法</span><br><span class="line">超链接：[名字](链接)快捷键：ctrl+k</span><br></pre></td></tr></table></figure><h1 id="博客上传报错解决方案"><a class="markdownIt-Anchor" href="#博客上传报错解决方案"></a> 博客上传报错解决方案</h1><p>在确保配置ssh秘钥等正确情况下尝试一下解决方法，报错如下：</p><p><img src="https://s2.loli.net/2025/12/28/NAebDLwaR9Y4MIP.webp" alt="" /></p><p>最好能配合科学上网来处理，一般都是网络问题</p><p>解决方法一：删除博客文件夹中的 <strong>.deploy_git</strong> 文件夹，在git命令窗口中输入<code>git config --global core.autocrlf false</code>，再重新上传</p><p>解决方法二：找到 <strong>.deploy_git</strong> 文件夹中的 <strong>index.lock</strong> 文件，删除就好了</p><p>解决方法三：在C盘——用户——你的主机名文件夹中找到.ssh文件夹中找到 config 文件，如果没有可以新建一个，文件添加下面内容保存，重新上传</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User YourEmail（你的邮箱）</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id<span class="built_in">_</span>rsa</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure><h1 id="博客搜索配置"><a class="markdownIt-Anchor" href="#博客搜索配置"></a> 博客搜索配置</h1><p>配置完成之后，需要去主题配置文件将搜索配置成 algolia 或 本地</p><h2 id="algolia搜索"><a class="markdownIt-Anchor" href="#algolia搜索"></a> algolia搜索</h2><p>进入官网注册并登录账号：<a href="https://dashboard.algolia.com/users/sign_in?redirect_to=%2Fapps%2FV1R8T877I8%2Fdashboard">Just a moment…</a>，参考：<a href="https://www.mebi.me/hexo-with-algolia#6-%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0%E8%AE%B0%E5%BD%95">hexo博客使用algolia搜索</a></p><h3 id="创建应用"><a class="markdownIt-Anchor" href="#创建应用"></a> 创建应用</h3><p>选择地区时，不是全部地区都可以，选择亮颜色的就可以</p><img src="https://s2.loli.net/2025/12/28/n3bVBKP7AdsLqWm.webp" style="zoom:50%;" /><p>创建之后，可以回到首页可以看到我们三个API值（等等需要用）</p><img src="https://s2.loli.net/2025/12/28/9Sm5hNj64lnkgLt.webp" style="zoom:50%;" /><h3 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h3><p>进入博客目录，安装插件 <code>hexo-algoliasearch</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-algoliasearch --save</span><br></pre></td></tr></table></figure><p>安装成功后在博客根目录 <code>_config.yml</code> 中添加下面代码，将appId、apiKey、adminApiKey中的值替换为上面三个API的值</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">algolia:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="string">&quot;Z7A3XW4R2I&quot;</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="string">&quot;12db1ad54372045549ef465881c17e743&quot;</span></span><br><span class="line">  <span class="attr">adminApiKey:</span> <span class="string">&quot;40321c7c207e7f73b63a19aa24c4761b&quot;</span></span><br><span class="line">  <span class="attr">chunkSize:</span> <span class="number">5000</span></span><br><span class="line">  <span class="attr">indexName:</span> <span class="string">&quot;my-hexo-blog&quot;</span></span><br><span class="line">  <span class="attr">fields:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">content:strip:truncate,0,500</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">excerpt:strip</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gallery</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">permalink</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">slug</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tags</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">title</span></span><br></pre></td></tr></table></figure><p>执行下面命令上传博客内容供 algolia 生成检索</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo algolia</span><br></pre></td></tr></table></figure><h3 id="自动上传记录"><a class="markdownIt-Anchor" href="#自动上传记录"></a> 自动上传记录</h3><p>修改博客根目录中的 <code>package.json</code></p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span>、</span><br><span class="line">        <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">        -    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">        +    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy &amp;&amp; hexo algolia&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>或者借助 github 的工作流，添加 algolia.yml 文件</p><img src="https://s2.loli.net/2025/12/28/dHqJosCV65tX13S.webp"  /><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name: Algolia Upload Records</span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches</span><br><span class="line">      - main   # 替换为你的分支名</span><br><span class="line">jobs:</span><br><span class="line">  algolia:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">      - name: checkout</span><br><span class="line">        uses: actions/checkout@v3</span><br><span class="line">        with:</span><br><span class="line">          submodules: recursive</span><br><span class="line">      - name: npm install</span><br><span class="line">        run: |</span><br><span class="line">          npm install hexo-cli &amp;&amp; \</span><br><span class="line">          npm install hexo-algoliasearch &amp;&amp; \</span><br><span class="line">          npx hexo generate &amp;&amp; \</span><br><span class="line">          npx hexo algolia -n</span><br></pre></td></tr></table></figure><h2 id="本地搜索"><a class="markdownIt-Anchor" href="#本地搜索"></a> 本地搜索</h2><p>安装插件，二选一即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br><span class="line"></span><br><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>安装完成之后，在博客根目录中 <code>_config.yml</code> 中添加下面代码</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">template:</span> <span class="string">./search.xml</span></span><br></pre></td></tr></table></figure><h1 id="新电脑-个人博客迁移"><a class="markdownIt-Anchor" href="#新电脑-个人博客迁移"></a> 新电脑 个人博客迁移</h1><h2 id="安装和配置软件"><a class="markdownIt-Anchor" href="#安装和配置软件"></a> 安装和配置软件</h2><p>安装Git 客户端，安装过程省略，一般默认下一步</p><pre><code>下载地址：[Git - Downloads](https://git-scm.com/downloads)这个无脑下一步即可无需配置</code></pre><p>安装node JS，安装过程省略，一般默认下一步</p><pre><code>下载地址：[下载 | Node.js 中文网](https://nodejs.cn/download/)配置看这位大佬教程：[Node.js安装与配置（详细步骤）_nodejs安装及环境配置-CSDN博客](https://blog.csdn.net/qq_42006801/article/details/124830995)</code></pre><p>如果出现以下错误，需要将下面三个文件夹修改权限</p><p><img src="https://s2.loli.net/2025/12/28/zw6SiLVAh7uZ9eJ.webp" alt="" /></p><p>拷贝个人博客文件夹中全部文件到新电脑。</p><h2 id="安装hexo"><a class="markdownIt-Anchor" href="#安装hexo"></a> 安装hexo</h2><p>在 cmd 下输入下面指令安装 hexo</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><img src="https://s2.loli.net/2025/12/28/2yEsmhgOXA4ducW.png" style="zoom:67%;" /><h2 id="配置博客"><a class="markdownIt-Anchor" href="#配置博客"></a> 配置博客</h2><p>进入 F:/Blog 目录（你拷贝到新电脑的目录），右键git，输入下面指令安装相关模块</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">// “ ”内换成自己对应的</span><br><span class="line">git config <span class="literal">--global</span> user.name <span class="string">&quot;HuGen&quot;</span></span><br><span class="line">git config <span class="literal">--global</span> user.email <span class="string">&quot;LoveHuGen@126q.com&quot;</span></span><br><span class="line">ssh<span class="literal">-keygen</span> <span class="literal">-t</span> rsa <span class="literal">-C</span> <span class="string">&quot;LoveHuGen@126q.com&quot;</span></span><br></pre></td></tr></table></figure><p>Github 添加 SSH Keys</p><p>1、在本地创建 <code>SSH Keys</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;wujiajiansh@163.com&quot;</span><br><span class="line">//一直回车，直到结束</span><br></pre></td></tr></table></figure><p>2、复制key</p><img src="https://s2.loli.net/2025/12/28/O8bKhLoPmG7WMHy.png" style="zoom: 67%;" /><p>进入登录GitHub，在设置中添加ssh key</p><p><img src="https://s2.loli.net/2025/12/28/QlwyiAHFGfTqj2X.png" alt="" /></p><p>将上一步中的文件里面的内容全部复制进去 ，点击添加</p><p><img src="https://s2.loli.net/2025/12/28/LPyxSe4M1q78Zgh.png" alt="" /></p><h2 id="部署博客"><a class="markdownIt-Anchor" href="#部署博客"></a> 部署博客</h2><p>打开电脑的：Windows PowerShell 进入博客目录</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save  // 文章部署到 git 的模块</span><br><span class="line">（下面为选择安装）</span><br><span class="line">npm install hexo-generator-feed --save  // 建立 RSS 订阅</span><br><span class="line">npm install hexo-generator-sitemap --save // 建立站点地图</span><br></pre></td></tr></table></figure><p>依次命令安装</p><img src="https://s2.loli.net/2025/12/28/pJ9Q2RwECeW6sdF.png" style="zoom:50%;" /><p>全部安装完成之后，一键三连部署上传</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g  &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><h1 id="githubpicgo图片上传"><a class="markdownIt-Anchor" href="#githubpicgo图片上传"></a> GitHub+Picgo图片上传</h1><p>Picgo下载，修改安装路径，其他一路下一步！</p><blockquote><p><a href="https://github.com/Molunerfinn/picgo/releases">Releases · Molunerfinn/PicGo</a></p></blockquote><p>注册GitHub，注册过程不详细展开，不会的百度一下</p><blockquote><p><a href="https://github.com/">GitHub · Build and ship software on a single, collaborative platform</a></p></blockquote><h2 id="新建github仓库"><a class="markdownIt-Anchor" href="#新建github仓库"></a> 新建GitHub仓库</h2><img src="https://s2.loli.net/2025/12/28/R26UpPGnulA4qYo.png" style="zoom:67%;" /><p>填写好图片信息，创建即可</p><p><img src="https://s2.loli.net/2025/12/28/poks2fvbnPIAE5X.png" alt="" /></p><h2 id="生成token令牌"><a class="markdownIt-Anchor" href="#生成token令牌"></a> 生成Token令牌</h2><p>点击头像，点击<code>Settings</code>，滑到最后，点击图中圈出的</p><img src="https://s2.loli.net/2025/12/28/IvkCGlNWt9aBXfi.png" style="zoom:50%;" /><p><img src="https://s2.loli.net/2025/12/28/lZnziVEJfkyrS2R.png" alt="" /></p><p>按图中顺序依次进入</p><p><img src="https://s2.loli.net/2025/12/28/pvlfMbUeAHP5m43.png" alt="" /></p><p>过期时间：<code>No expiration</code>(永久不过期)</p><p><img src="https://s2.loli.net/2025/12/28/WGIDt2Hx8c9z5hw.png" alt="" /></p><blockquote><p><strong>务必将令牌保存起来</strong>，放在一个安全的地方，页面关掉后就看不到了</p></blockquote><p><img src="https://s2.loli.net/2025/12/28/BboFk5Vj9gZcEUw.png" alt="" /></p><h2 id="创建img文件夹"><a class="markdownIt-Anchor" href="#创建img文件夹"></a> 创建img文件夹</h2><p>回到刚才新建存放图片的仓库，新建文件夹</p><img src="https://s2.loli.net/2025/12/28/pwM7fCIPdD6zSKX.png" style="zoom:50%;" /><p>给文件夹命名</p><p><img src="https://s2.loli.net/2025/12/28/pBWDEVlaeYgRZvk.png" alt="" /></p><h2 id="设置github图床"><a class="markdownIt-Anchor" href="#设置github图床"></a> 设置GitHub图床</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">自定义域名需要配置为：https://cdn.jsdelivr.net/gh/用户名/仓库名，这样就才可以通过cdn访问图片</span><br><span class="line">仓库名：GitHub用户名/GitHub仓库地址</span><br><span class="line">分支名：main</span><br><span class="line">Token：GitHub中设定的AccessToken</span><br><span class="line">自定义域名：https://cdn.jsdelivr.net/gh/用户名/仓库名</span><br></pre></td></tr></table></figure><img src="https://s2.loli.net/2025/12/28/Cp8AgUucetl5fnQ.png" style="zoom:50%;" /><p>点击上传区上传图片，上传成功之后</p><img src="https://s2.loli.net/2025/12/28/BSi7hw9YFGnJ6K5.png" style="zoom:50%;" /><p>如果提示网络不好等错误，可能不稳定，稍后再试试看。或者可以重启试试看!！</p><p>在Typora中，文件-》偏好设置中，设置成下图，将语法偏好所有选项关闭，可以避免直接复制图片进Typora报错</p><img src="https://s2.loli.net/2025/12/28/zsUK7f8IDFtnwL6.png" style="zoom:50%;" /><p>仓库可能最多只能存放1g，网上说的，所以最好快到的时候重新建一个仓库</p><p>差不多到达1g，重新建一个仓库，建仓库上述有说，但新仓库不能与旧仓库同名，可在后面加1，创建完成后，其他无需设置，在PicGo设置一下新仓库名，和自定义域名后面的仓库名</p><img src="https://s2.loli.net/2025/12/28/SmgCs26Pb8UpRuH.png" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> 技术积累 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客搭建相关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客CDN解析</title>
      <link href="/2025/08/31/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%8D%9A%E5%AE%A2CDN%E8%A7%A3%E6%9E%90/"/>
      <url>/2025/08/31/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/%E5%8D%9A%E5%AE%A2CDN%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="hurricanedns解析博客"><a class="markdownIt-Anchor" href="#hurricanedns解析博客"></a> HurricaneDNS解析博客</h1><p>首先需要一个域名，购买完域名之后，我们打开HurricaneDNS：<a href="https://dns.he.net/">Hurricane Electric Hosted DNS</a></p><p>先注册账号，注册过程按照提示填写注册即可</p><img src="https://s2.loli.net/2025/12/28/L49gmjzav63pq8X.webp" style="zoom:50%;" /><p>注册好之后，我们直接登陆，直接添加域名</p><p><img src="https://s2.loli.net/2025/12/28/8QD4TysxSLzeP9U.webp" alt="" /></p><p>输入购买的域名</p><img src="https://s2.loli.net/2025/12/28/gM9o4tUbmhn3NTS.webp" style="zoom:50%;" /><p>进入添加记录</p><p><img src="https://s2.loli.net/2025/12/28/rSgL8olkOIpyE19.webp" alt="" /></p><p>添加对应的类型添加，按照如下方式添加<code>类型为A</code>，名称为<code>@</code>，IPv4地址为<code>185.199.108.153</code>，<strong>按照上述方式再添加以下三条记录，类型和名称和上述相同，IPv4地址分别为</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">185.199.109.153</span><br><span class="line">185.199.110.153</span><br><span class="line">185.199.111.153</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/12/28/8ju51opQgPhMbTa.webp" alt="" /></p><p>添加好后我们去购买域名的地方，<a href="https://mi.aliyun.com/?spm=5176.29045373.J_2177541330.5.3d1d183838ot1j#eyJwcm9kdWN0VHlwZSI6MiwicXVpY2tTZWFyY2giOiJbXCJcIl0iLCJrZXl3b3JkIjoiIiwiY29uc3RpdHV0ZUFyciI6WyIiXSwiZml4ZWRQcmljZVNlYXJjaFR5cGUiOiIiLCJxdWlja1NvcnQiOlsicHJpY2UiLCJhc2NlbmQiXSwibWF4U2FsZUF2YWlsRGF5IjoiIiwic2FsZUF2YWlsRGF5UmFuZ2UiOnsibWluU2FsZUF2YWlsRGF5IjoiIiwibWF4U2FsZUF2YWlsRGF5IjoiIn0sIm1pbkRvbWFpbkF2YWlsRGF5IjozMDAsImRvbWFpbkF2YWlsRGF5UmFuZ2UiOnsibWluRG9tYWluQXZhaWxEYXkiOjMwMCwibWF4RG9tYWluQXZhaWxEYXkiOiIifSwic2Vzc2lvbkNvZGUiOiIxZXhsWEVsYTZsRGhfb21sT2M5ZzUiLCJjb25zdGl0dXRlIjoiIiwibWluU2FsZUF2YWlsRGF5IjoiIiwibWF4RG9tYWluQXZhaWxEYXkiOiIiLCJ0YWIiOiJzZWxlY3RlZCJ9">域名交易_一口价域名_域名抢注-阿里云万网</a>，进入控制台</p><img src="https://s2.loli.net/2025/12/28/7ijFtkQlYhnMewC.webp" style="zoom:50%;" /><p>进入域名管理</p><img src="https://s2.loli.net/2025/12/28/9A5FJp2IhkeOG8Y.webp" style="zoom:67%;" /><p>进入域名列表，点击管理</p><p><img src="https://s2.loli.net/2025/12/28/cOYvKQarwZebfpI.webp" alt="" /></p><p>进入DSN管理，修改DNS</p><p><img src="https://s2.loli.net/2025/12/28/J8qSM2guhkK9viL.webp" alt="" /></p><p>将以下这些全部填入</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">NS1.HE.NET、NS2.HE.NET、NS3.HE.NET、NS4.HE.NET、NE5.HE.NET</span><br></pre></td></tr></table></figure><img src="https://s2.loli.net/2025/12/28/4r7bT6maL1HchDA.webp" style="zoom:50%;" /><p>每次上传好之后，需要去GitHub对应项目里面，进入设置，进入pages，设置一下域名</p><p><img src="https://s2.loli.net/2025/12/28/r7OBegR9xU8kMt4.webp" alt="" /></p><h1 id="cloudflare-cdn解析"><a class="markdownIt-Anchor" href="#cloudflare-cdn解析"></a> cloudflare CDN解析</h1><h2 id="域名购买"><a class="markdownIt-Anchor" href="#域名购买"></a> 域名购买</h2><p>阿里可能需要实名认证等，在注册账号是，按照提示注册即可，购买期间若需补充其它信息，按要求补充即可</p><p>这里选择阿里云的域名，提供的这个的非常便宜实惠的域名，但是续费可能就是原价，可以一年换一次，购买：<a href="https://mi.aliyun.com/?spm=5176.29045373.J_2177541330.5.3d1d183838ot1j#eyJwcm9kdWN0VHlwZSI6MiwicXVpY2tTZWFyY2giOiJbXCJcIl0iLCJrZXl3b3JkIjoiIiwiY29uc3RpdHV0ZUFyciI6WyIiXSwiZml4ZWRQcmljZVNlYXJjaFR5cGUiOiJzZWxlY3RlZCIsInF1aWNrU29ydCI6WyJwcmljZSIsImFzY2VuZCJdLCJtYXhTYWxlQXZhaWxEYXkiOiIiLCJzYWxlQXZhaWxEYXlSYW5nZSI6eyJtaW5TYWxlQXZhaWxEYXkiOiIiLCJtYXhTYWxlQXZhaWxEYXkiOiIifSwibWluRG9tYWluQXZhaWxEYXkiOjMwMCwiZG9tYWluQXZhaWxEYXlSYW5nZSI6eyJtaW5Eb21haW5BdmFpbERheSI6MzAwLCJtYXhEb21haW5BdmFpbERheSI6IiJ9LCJzZXNzaW9uQ29kZSI6ImV6bXZHaF81WWEyVGtxNXZGMEs5cyIsImNvbnN0aXR1dGUiOiIiLCJtaW5TYWxlQXZhaWxEYXkiOiIiLCJtYXhEb21haW5BdmFpbERheSI6IiIsInRhYiI6InNlbGVjdGVkIn0=">域名交易_一口价域名_域名抢注-阿里云万网</a>。</p><p>购买完成后，在控制台看是否成功，可能需要等待几分钟</p><p><img src="https://s2.loli.net/2025/12/28/XWhfcP3yTj5aFgK.png" alt="" /></p><p>进入控制台后，进入域名控制台</p><p><img src="https://s2.loli.net/2025/12/28/4ylnUXEp1NkuvqH.png" alt="" /></p><p>这里可查看域名</p><p><img src="https://s2.loli.net/2025/12/28/e5N9wfuv7STWHYP.png" alt="" /></p><h2 id="修改dns"><a class="markdownIt-Anchor" href="#修改dns"></a> 修改DNS</h2><p>在域名列表点击 管理</p><p><img src="https://s2.loli.net/2025/12/28/OuZmKrjF3LXlxIU.png" alt="" /></p><p>修改DNS，添加需要的</p><p><img src="https://s2.loli.net/2025/12/28/DlroGmp14nBt7MA.png" alt="" /></p><h2 id="域名购买-2"><a class="markdownIt-Anchor" href="#域名购买-2"></a> 域名购买</h2><p><a href="https://www.cloudflare-cn.com/">科赋锐信息科技Cloudflare</a>，进入后直接先注册账号</p><p>设置成中文，进入网站绑定域名</p><p><img src="https://s2.loli.net/2025/12/28/sT6exdg2XAl3PBc.png" alt="" /></p><p>在左侧栏中进入网站一栏，点击右方添加站点，第一次可能没有这个，但中间有一个可以直接添加</p><p><img src="https://s2.loli.net/2025/12/28/ESBxa1uF93eR2gb.png" alt="" /></p><p>输入自己的域名，注意不要带<code>www</code>或者<code>https</code>，比如我的就直接填写<code>qinyu.space</code></p><img src="https://s2.loli.net/2025/12/28/T6lSUF7G8thpqYf.png" style="zoom:50%;" /><p>选择套餐，<code>free</code>即可</p><img src="https://s2.loli.net/2025/12/28/xhArlWCbOizS4wg.png" style="zoom: 33%;" /><p>点击继续后 cloudflare 会自动扫描域名的 dns 记录，如果是刚刚创建的域名，可能扫描的结果为空。<strong>截图中的几条记录可以不用管</strong></p><img src="https://s2.loli.net/2025/12/28/968vCwl3ZpAEasD.png" style="zoom:50%;" /><p>这一步很重要，点击添加记录，按照如下方式添加<code>类型为A</code>，名称为<code>@</code>，IPv4地址为<code>185.199.108.153</code>，<strong>按照上述方式再添加以下三条记录，类型和名称和上述相同，IPv4地址分别为</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">185.199.109.153</span><br><span class="line">185.199.110.153</span><br><span class="line">185.199.111.153</span><br></pre></td></tr></table></figure><p>完成之后应该能看到列表中有以下四条这样的记录，除了名称是自己的域名外其他应该都和图中相同</p><img src="https://s2.loli.net/2025/12/28/LlEWPTeY6utDUpZ.png" style="zoom:50%;" /><p>上述添加的4条ip地址均是GitHub Pages 的 IP 地址，具体可查看<a href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">地址</a></p><p>点击继续后，往下滑 cloudflare 会要求将我们DNS服务器修改为以下图中所示的的服务器，可以先截个图或者存文档里</p><img src="https://s2.loli.net/2025/12/28/XNP6RVKsDtdrSu3.png" style="zoom:50%;" /><p>点击下方继续后会有一个快速入门指南，里面的配置可以都开启：</p><img src="https://s2.loli.net/2025/12/28/cOlTuZFDW4h6EMH.png" style="zoom:50%;" /><p>回到上面讲述修改DNS，DNS服务器更改后生效需要一段时间，少则几分钟，慢则需要几个小时</p><p>返回 cloudflare，如果看到 “Cloudflare 正在保护您的站点”说明已经配置成功了：</p><img src="https://s2.loli.net/2025/12/28/In4VCmsRxOZt5Do.png" style="zoom: 33%;" /><h2 id="设置github-page"><a class="markdownIt-Anchor" href="#设置github-page"></a> 设置Github page</h2><p>进入github.io对应的仓库，进入 <code>Settings</code>：</p><p><img src="https://s2.loli.net/2025/12/28/1WX8tCaDul594ZQ.png" alt="" /></p><p>进入左栏中的<code>pages</code>，在 <code>Custom domain</code>中输入自己的域名，点击<code>save</code>，如果成功会显示下图：</p><p><img src="https://s2.loli.net/2025/12/28/39splLa5QNUjJ6A.png" alt="" /></p><p>这样就可以通过域名来访问自己的博客了，还可以在上图中勾选 <code>Enforcrs HTTPS</code>，这样网站仅会通过https提供服务</p><p>本文参考：<a href="https://qinyu.space/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/%E5%88%A9%E7%94%A8cloudflare%E5%8A%A0%E9%80%9Fgithub%E4%B8%BB%E9%A1%B5%E8%AE%BF%E9%97%AE/#%E9%85%8D%E7%BD%AE-cloudflare">博客搭建（一）| 利用cloudflare加速github博客访问</a></p><h2 id="cloudflare自动部署博客"><a class="markdownIt-Anchor" href="#cloudflare自动部署博客"></a> cloudflare自动部署博客</h2><p>新建部署，绑定GitHub账号选择对应仓库绑定即可</p><img src="https://s2.loli.net/2025/12/28/ZtuTfzrm3NoMyxh.png" style="zoom:50%;" /><p>绑定自己的域名，这里的域名可以设置成自己的子域名，这样就可以拥有两个不同域名的博客，详细设置看下文</p><p><img src="https://s2.loli.net/2025/12/28/h8P16mpoSi9qNKD.png" alt="" /></p><h1 id="dns解析填写"><a class="markdownIt-Anchor" href="#dns解析填写"></a> DNS解析填写</h1><p>首先进入我们购买域名的页面，这里以阿里为例，进入阿里控制台</p><p><img src="https://s2.loli.net/2025/12/28/s3HhSny8oP2Gc5A.webp" alt="" /></p><p>进入域名列表，进入管理</p><p><img src="https://s2.loli.net/2025/12/28/t7FTos6WaBrpyDb.webp" alt="" /></p><p>这里的DNS修改，意思就是说，你DNS要选择哪家来控制你域名的解析，例如：如果你域名想在腾讯控制，填写解析，你就要先去腾讯的DNS服务添加你的域名，然后将服务地址复制到这里更换，更换完成之后，以后域名的相关解析就在腾讯控制，不在阿里控制了</p><p>这里一般选择一家即可，不能添加多家的DNS，这里我是配置到腾讯控制</p><img src="https://s2.loli.net/2025/12/28/t7FTos6WaBrpyDb.webp" style="zoom:50%;" /><p>现在我们打开腾讯的DNS：<a href="https://console.dnspod.cn/">登录 - 腾讯云</a>，添加域名(可能要添加TXT记录在原域名解析里面添加后验证即可)，然后进入解析</p><p><img src="https://s2.loli.net/2025/12/28/LScju7g51YxWIaH.webp" alt="" /></p><p>进入解析页面后，点击域名设置，可以看到我们腾讯所属的服务器，然后去阿里的域名管理将DNS修改成腾讯的服务器地址，则就完成了，如果你想更换别家的NDS也是相同的步骤，先添加域名，后查看服务器地址，再修改DNS</p><img src="https://s2.loli.net/2025/12/28/xXAv817Yibyn5eZ.webp" style="zoom:50%;" /><p>现在来看解析里面应该怎么添加（以腾讯为例），对应的意思是什么。一般www.主域名等于主域名不能作为子域名使用</p><p>主机记录：</p><ul><li>@：则你原域名</li><li>如果写了别的则就是子域名，如：xinzai，则为xinzai.主域名（注意：www不能作为子域名）</li></ul><p>记录类型：</p><ul><li>A：将主机记录的域名解析到记录值的服务器地址</li><li>CNAME：将域名指向另一个域名地址，与其保持相同解析</li><li>TXT：一般添加域名等作为验证用，一般验证的时候会给出<code>主机记录</code>及<code>记录值</code></li><li>NS：一般是将子域名交给别家DNS解析，也就是，现在主域名是在腾讯DNS，子域名要在阿里解析，则需要选择NS</li></ul><p>记录值：</p><ul><li>记录类型为A：填写解析的服务器地址，例解析GitHub的静态博客，则将GitHub的服务器地址填写进入</li><li>记录类型为CNAME：填写域名，需要指向的域名</li><li>记录类型为TXT：按照需要验证的给出值填写即可</li><li>记录类型为NS：填写你要在哪家解析的服务地址（先去添加域名，再查看服务器地址）</li></ul><p>TTL ：</p><ul><li><strong>指解析记录在 DNS 服务器缓存的生存时间，数值越小则生效越快</strong></li><li>600：一般默认值，如不了解请保留 600 秒即可</li><li>3600：当记录值较少变动时，建议选择 3600 秒，有利于提升解析速度</li><li>60：当记录值频繁变动，可选择 60 秒，但解析速度可能略受影响</li></ul><p><img src="https://s2.loli.net/2025/12/28/NrejZhut3iOQysA.webp" alt="" /></p><p>目前我是这样的，域名在阿里购买，再阿里将DNS修改为cloudflare ，后面解析都在cloudflare 添加和删除</p><p>主域名在cloudflare自动部署页面绑定，再使用NS解析，将子域名指向阿里、腾讯，在阿里、腾讯添加A解析(GitHub服务地址)，再去GitHub页面设置绑定子域名，这样就两个域名访问博客</p>]]></content>
      
      
      <categories>
          
          <category> 技术积累 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客CDN解析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.理论</title>
      <link href="/2025/08/29/%E8%BD%AF%E6%B5%8B/1-%E7%90%86%E8%AE%BA/"/>
      <url>/2025/08/29/%E8%BD%AF%E6%B5%8B/1-%E7%90%86%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<ol><li>方向（一）:功能测试+接口测试</li><li>方向（二）:功能测试+性能测试</li><li>方向（三）:功能测试+ web自动化</li></ol><p>C/S架构(客户端)：比如微信、QQ</p><p>B/S架构(浏览器)：browser-server浏览器服务器比如淘宝京东</p><p>预发布环境（UAT 环境）验收测试进行的环境</p><p>Vaild：V 有效，Invalid：I 无效</p><p>动态测试：运行被测系统而进行的测试</p><p>静态测试：不需要运行被测系统，而进行的测试（界面检测、文档检测、代码走查）</p><p>功能测试：验证软件的业务功能是否符合需求</p><p>界面测试：被测系统界面与原型图是否一致</p><p>安全测试：对被测系统的安全进行测试（对账号进行输入用户名密码、是否允许输入、sql 注入）</p><p>兼容性测试：被测系统不同的测试环境下是否正常</p><p>易用性测试：被测系统各个功能是否操作方便，是否容易理解、容易上手</p><p>性能测试（负载测试、压力测试）：某个特定时间，用户数量剧增，软件是否正常</p><p>冒烟测试：批量开始测试之前，执行业务正向用例，验证软件是否具备可测性。一般由开发或测试主管负责</p><p>回归测试：开发对存在的问题的功能进行修改后，再一次进行的测试</p><p>探索性测试：根据自己的项目经验而进行的随意测试</p><p>测试点：软件包含多个功能点，每个功能点包含多个子功能（测试点），测试点是软件功能细分的最小单元</p><p>it：集成测试，st：系统测试，uat：验收测试</p><p>DRAFT：初稿，MODIFY：修订，RELEASE：终稿</p><p>软件测试定义：使用技术手段验证软件是否满足需求</p><h1 id="常见测试分类"><a class="markdownIt-Anchor" href="#常见测试分类"></a> 常见测试分类</h1><h2 id="按阶段划分"><a class="markdownIt-Anchor" href="#按阶段划分"></a> 按阶段划分</h2><p>单元测试：针对程序源代码进行测试，确保各单元模块被正确的编译，比如有具体到模块的测试，也有具体到类，函数、方法的测试等</p><p>集成测试：又称接口测试，针对模块之间访问地址进行测试。----比如说注册和充值这两个功能是否能够连通</p><p>系统测试：针对程序功能、非功能（界面、文档、兼容性、易用性、性能）进行测试</p><p>验收测试：主要分为内测、公测，使用不同人群来发掘项目缺陷。</p><p>Alpha 测试：把用户请到开发方进行测试，测试环境受到开发方控制，测试人数不多，测试时间集中</p><p>Beta 测试：测试环境不受到开发方控制，测试人数较多，测试时间不集中</p><h2 id="按代码可见度划分"><a class="markdownIt-Anchor" href="#按代码可见度划分"></a> 按代码可见度划分</h2><h3 id="黑盒测试"><a class="markdownIt-Anchor" href="#黑盒测试"></a> 黑盒测试</h3><p>不关注源代码，针对程序UI功能进行测试。也是功能测试</p><h3 id="白盒测试"><a class="markdownIt-Anchor" href="#白盒测试"></a> 白盒测试</h3><p>全部代码可见，UI 界面不可见（注重内部逻辑）也是单元测测试</p><h3 id="灰盒测试"><a class="markdownIt-Anchor" href="#灰盒测试"></a> 灰盒测试</h3><p>针对程序部分代码进行测试（接口），功能可见，也是接口测试</p><h1 id="模型"><a class="markdownIt-Anchor" href="#模型"></a> 模型</h1><h2 id="开发模型"><a class="markdownIt-Anchor" href="#开发模型"></a> 开发模型</h2><ul><li>瀑布模型（一般不使用）<ul><li>问题定义及规划（需求规格说明书 SRS）–&gt;需求分析–&gt;设计–&gt;编码–&gt;测试–&gt;运行维护</li><li>特点：自上而下，有顺序性</li><li>缺点：测试介入较晚，回溯成本较高</li></ul></li><li>V 模型<ul><li><img src="https://s2.loli.net/2026/01/01/ima4Ppxl16u7tJe.png" alt="" /></li></ul></li><li>敏捷开发模型<ul><li>迭代周期短，整个项目分为多个独立小项目</li></ul></li></ul><h2 id="测试模型"><a class="markdownIt-Anchor" href="#测试模型"></a> 测试模型</h2><p><strong>质量模型</strong>（衡量一个优秀软件的维度）</p><ul><li>功能性</li><li>性能</li><li>兼容性</li><li>易用性</li><li>可靠性</li><li>安全性</li><li>可维护性</li><li>可移植性</li></ul><p>测试流程</p><ol><li>需求评审</li><li>计划编写</li><li>用例设计</li><li>用例执行</li><li>缺陷管理</li><li>测试报告</li></ol><h1 id="用例设计编写格式"><a class="markdownIt-Anchor" href="#用例设计编写格式"></a> 用例设计编写格式</h1><p><img src="https://s2.loli.net/2026/01/01/BFgrQCS5vGNxPuK.png" alt="" /></p><ol><li>用例编号：：项目简称 _ 功能 _ 编号</li><li>用例标题：预期结果（测试点）</li><li>项目/模块：对应一个功能模块(细分功能)</li><li>优先级：P0 ~ P4（P0 最高）（<strong>业务正向P0逆向P1，单功能正向P2逆向P3，UI/建议性意见P4</strong>）</li><li>前置条件：需要满足一些前提条件，否则用例无法执行</li><li>测试数据：需要加工的输入信息，根据具体情况来设计</li><li>测试步骤：明确给出每个步骤的描述，执行人员可以根据该步骤完成执行工作</li><li>预期结果：执行用例期望得到的结果(预期结果唯一，不能出现“是否或者”）</li></ol><p><img src="https://s2.loli.net/2026/01/01/qmv1Yr5fnjKplBa.png" alt="" /><img src="https://s2.loli.net/2026/01/01/WfZFwq8baXScQIE.png" style="zoom: 67%;" /></p><h1 id="用例设计方法黑盒测试"><a class="markdownIt-Anchor" href="#用例设计方法黑盒测试"></a> 用例设计方法（黑盒测试）</h1><h2 id="等价类划分法"><a class="markdownIt-Anchor" href="#等价类划分法"></a> 等价类划分法</h2><p>根据相同特征数据集合进行划分</p><p>有效等价类（合法输入）和无效等价类（非法输入）</p><p>正向：一次尽可能将多个正确数据组合</p><p>逆向（错误）：一次只能覆盖一个</p><p>适用场景：需要有大量数据测试输入，但是没法穷举测试的地方（如输入框、下拉列表、单选复选框）</p><p>步骤：</p><ol><li>明确需求</li><li>确定有效和无效等价类（长度、类型、规则）</li><li>提取数据编写测试用例</li></ol><p>案例：验证手机号合法性</p><ul><li>区号：空或者是三位数字</li><li>前缀码：非“0”且非“1”开头的三位数字</li><li>后缀码：四位数字</li><li><img src="https://s2.loli.net/2026/01/01/ZnuqrOKB9Q4eWPt.png" style="zoom:50%;" /><img src="https://s2.loli.net/2026/01/01/dtQWqcVk6RiYJlG.png" style="zoom:50%;" /><img src="https://s2.loli.net/2026/01/01/YChrQ5BXlPTED4O.png" style="zoom: 40%;" /></li></ul><h2 id="边界值分析法"><a class="markdownIt-Anchor" href="#边界值分析法"></a> 边界值分析法</h2><p>在等价类的基础上针对有边界范围的测试数据输入的地方（重点关注边界）</p><p>选取正好等于、刚好大于、刚好小于边界的值作为测试数据</p><p>上点：边界上的点(正好等于)（必选）</p><p>离点：距离上点最近的点(刚好大于、刚好小于)（闭外开内）</p><p>内点：范围内的点(区间范围内的数据)（取中间数）（必选）</p><p>测试类似账号密码默认加上：空和已存在</p><p>步骤：</p><ol><li>明确需求</li><li>确定有效和无效等价类（只关注类型）</li><li>确定边界范围值（长度）</li><li>提取数据编写测试用例</li></ol><p>需求：通过边界值法验证QQ号码的合法性</p><p>6~10位自然数</p><p><img src="https://s2.loli.net/2026/01/01/m6RtCjwLZIE8scF.png" style="zoom:50%;" /><img src="https://s2.loli.net/2026/01/01/epEvFVtbLZOGNS8.png" alt="红色是优化删除的" style="zoom:50%;" /></p><h2 id="因果图法"><a class="markdownIt-Anchor" href="#因果图法"></a> 因果图法</h2><p>当需求中存在多个条件，不同条件中存在不同的结果</p><p>列出需求中的因子（条件）和结果</p><p>转换为判定表：将因果图转化为判定表，覆盖所有组合。</p><h2 id="判定表法"><a class="markdownIt-Anchor" href="#判定表法"></a> 判定表法</h2><p>解决多条件依赖的问题</p><p>条件桩：列出问题中的所有条件，列出条件的次序无关紧要。</p><p>动作桩：列出问题中可能采取的操作，操作的排列顺序没有约束。</p><p>条件项：列出条件对应的取值，所有可能情况下的真假值。</p><p>动作项：到出条件项的、各种取值情况下应该采取的动作结果。</p><p>判定表中贯穿条件项和动作项的一列就是一条规则</p><p>假设有n个条件，每个条件的取值有两个(0,1)，全组合有2的n次方种规则</p><p>使用场景：</p><ul><li>有多个输入条件，多个输出结果，输入条件之间有组合关系，输入条件和输出结果之间有依赖(制约)关系</li><li>判定表一般适用于条件组合数量较少的情况 （比如 4 个条件以下）</li></ul><p>需求（⽂件修改）：</p><ul><li>输入的第一列字符必须是A或B</li><li>第二列字符必须是一个数字</li><li>如果第一列字符不正确，则给出信息L</li><li>如果第二列字符不正确，则给出信息M</li><li>如果两列字符输入正确，则修改文件成功</li></ul><p><img src="https://s2.loli.net/2026/01/01/JwikIBqgAMu48mP.png" style="zoom:50%;" /><img src="https://s2.loli.net/2026/01/01/yQjpXBhZHCide6U.png" style="zoom:50%;" /></p><h2 id="场景法流程图法"><a class="markdownIt-Anchor" href="#场景法流程图法"></a> 场景法（流程图法）</h2><p>基于用户实际使用场景设计测试用例，模拟端到端的业务流程，验证系统的交互和功能完整性。</p><p>画流程图（格式）</p><img src="https://s2.loli.net/2026/01/01/RumQLtZUpdqnPOs.png" style="zoom: 33%;" /><p>步骤：</p><ol><li>分析用户业务流程。</li><li>设计覆盖主流程、备选流程和异常流程的测试场景。</li></ol><img src="https://s2.loli.net/2026/01/01/WbuURFhfaoIElQA.png" style="zoom:50%;" /><p><img src="https://s2.loli.net/2026/01/01/Kf9tbrx2IOSUw7h.png" style="zoom:50%;" /> <img src="https://s2.loli.net/2026/01/01/YbLqo86VjnNUhix.png" style="zoom:50%;" /></p><h2 id="错误推测法反推法"><a class="markdownIt-Anchor" href="#错误推测法反推法"></a> 错误推测法（反推法）</h2><p>基于经验或直觉推测可能出错的场景，针对性设计测试用例。通常结合历史缺陷数据或常见编程错误。</p><p>测试文件上传功能：</p><p>上传超大文件、空文件、病毒文件、重复文件名等。</p><p>适用场景：经验丰富的测试人员、回归测试或补充其他测试方法。</p><h2 id="正交实验法"><a class="markdownIt-Anchor" href="#正交实验法"></a> 正交实验法</h2><p>因果关系比较庞大的情况下，条件很多，组合很多，输出结果很多</p><img src="https://s2.loli.net/2026/01/01/VQwZKmLfCcEiHWO.png" style="zoom:50%;" /><p>什么是bug：漏洞缺陷+改进建议+不符合需求</p><p>Bug 等级</p><ul><li>致命错误：—blocker<ul><li>常规操作引起的系统崩溃、死机、死循环、闪退</li><li>造成数据泄漏的安全性问题，比如恶意攻击造成的账户私密信息泄露</li><li>涉及金钱计算</li><li>阻断性测试，所有测试工作进行不下去（冒烟测试）</li></ul></li><li>严重错误：critical<ul><li>重要功能不能实现；</li><li>错误的波及面广，影响到其它重要功能正常实现</li><li>非常规操作导致的程序崩溃、死机、死循环、闪退</li><li>外观(界面)难以接受的缺陷；</li><li>密码明文显冠； (界面+数据库)</li><li>偶现的致命性bug</li></ul></li><li>一般错误：major最多<ul><li>不影响产品的运行、不会成为故障起因，但对产品外观和下道工序影响较大的缺陷</li><li>次要功能不能正常实现</li><li>操作界面错误（包括数据窗口内列名定义、含义不一致）；</li><li>查询错误，数据错误显示；</li><li>简单的输入限制未放在前端进行控制；</li><li>删除操作未给出提示；</li><li>偶现的严重性bug</li></ul></li></ul><h1 id="缺陷管理"><a class="markdownIt-Anchor" href="#缺陷管理"></a> 缺陷管理</h1><p>项⽬管理⼯具-管理缺陷 (禅道、 JIRA、 TFS)</p><p>Excel管理缺陷</p><p>缺陷核⼼要素</p><ul><li>缺陷的标题</li><li>缺陷的预期结果</li><li>缺陷的预置条件</li><li>缺陷的实际结果</li><li>缺陷的复现步骤</li><li>缺陷的必要附件</li></ul><h2 id="缺陷提交要素"><a class="markdownIt-Anchor" href="#缺陷提交要素"></a> 缺陷提交要素</h2><p>缺陷报告编号</p><p>严重程度</p><ul><li>严重（S1）：主功能</li><li>一般（S2）：次要功能</li><li>微小（S3）：易用性、界面</li><li>建议（S4）：建议性问题</li></ul><p>缺陷优先级</p><ul><li>Priority0:24小时之内解决</li><li>Priority1：发布前必须修复</li><li>Priority2：可以在下一个版本中修复</li></ul><p>Bug类型</p><p>缺陷状态</p><ul><li>new:新建</li><li>Open:打开</li><li>Closed:关闭</li><li>Postponed:延期</li></ul><h2 id="缺陷编写"><a class="markdownIt-Anchor" href="#缺陷编写"></a> 缺陷编写</h2><img src="https://s2.loli.net/2026/01/01/PEKuRsAYpmi2j8e.png" style="zoom:50%;" /><p>缺陷标题</p><ul><li>方式1：测试数据+执行结果（预期）</li><li>方式2：测试数据+执行结果（需求）</li><li>方式3：测试数据+预期+执行结果</li></ul><h2 id="缺陷提交流程"><a class="markdownIt-Anchor" href="#缺陷提交流程"></a> 缺陷提交流程</h2><img src="https://s2.loli.net/2026/01/01/cZbilHtFk8NAxGf.png" style="zoom: 50%;" />]]></content>
      
      
      <categories>
          
          <category> 软测 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>资源库</title>
      <link href="/2025/08/29/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E8%B5%84%E6%BA%90%E5%BA%93/"/>
      <url>/2025/08/29/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E8%B5%84%E6%BA%90%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="个人资源"><a class="markdownIt-Anchor" href="#个人资源"></a> 个人资源</h1><table><thead><tr><th style="text-align:center">资源名</th><th style="text-align:center">链接</th><th style="text-align:center">提取码</th><th style="text-align:center">资源所属盘</th></tr></thead><tbody><tr><td style="text-align:center">BCompare</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je19yba">https://xinzaigeek.lanzoub.com/b00je19yba</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">IDM</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c6ze">https://xinzaigeek.lanzoub.com/b00je1c6ze</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">比特彗星</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c78d">https://xinzaigeek.lanzoub.com/b00je1c78d</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">迅雷</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c7fa">https://xinzaigeek.lanzoub.com/b00je1c7fa</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Motrix</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c7oj">https://xinzaigeek.lanzoub.com/b00je1c7oj</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Xdown</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c7za">https://xinzaigeek.lanzoub.com/b00je1c7za</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">某度文库下载</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c88j">https://xinzaigeek.lanzoub.com/b00je1c88j</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">7Z解压缩</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c92j">https://xinzaigeek.lanzoub.com/b00je1c92j</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Bandizip</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c9cj">https://xinzaigeek.lanzoub.com/b00je1c9cj</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">WinRAR</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c9ob">https://xinzaigeek.lanzoub.com/b00je1c9ob</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">卸载神器geek</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1c9xa">https://xinzaigeek.lanzoub.com/b00je1c9xa</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Win11资源管理器修改Win10</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1fwtc">https://xinzaigeek.lanzoub.com/b00je1fwtc</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">一键删除keil工程中间文件</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1fx4d">https://xinzaigeek.lanzoub.com/b00je1fx4d</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">分区及磁盘文件修复</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1fyte">https://xinzaigeek.lanzoub.com/b00je1fyte</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">ST-Link驱动</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g00h">https://xinzaigeek.lanzoub.com/b00je1g00h</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Maven</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g0da">https://xinzaigeek.lanzoub.com/b00je1g0da</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">C-Free5</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g0kh">https://xinzaigeek.lanzoub.com/b00je1g0kh</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">火绒单文件</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g0li">https://xinzaigeek.lanzoub.com/b00je1g0li</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">联想管家单文件</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g0uh">https://xinzaigeek.lanzoub.com/b00je1g0uh</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Github加速工具</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g12f">https://xinzaigeek.lanzoub.com/b00je1g12f</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Snipaste</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g16j">https://xinzaigeek.lanzoub.com/b00je1g16j</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">PixPin</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g2kj">https://xinzaigeek.lanzoub.com/b00je1g2kj</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">禁止Windows更新</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g19c">https://xinzaigeek.lanzoub.com/b00je1g19c</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">卸载_关闭Windows杀毒</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g1ve">https://xinzaigeek.lanzoub.com/b00je1g1ve</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Windows激活工具</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g1fi">https://xinzaigeek.lanzoub.com/b00je1g1fi</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">驱动人生</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g1mf">https://xinzaigeek.lanzoub.com/b00je1g1mf</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">小狼毫输入法</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g1pi">https://xinzaigeek.lanzoub.com/b00je1g1pi</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">U盘工具</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g23c">https://xinzaigeek.lanzoub.com/b00je1g23c</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Windows系统官方下载工具</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g2ba">https://xinzaigeek.lanzoub.com/b00je1g2ba</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">浏览器插件</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g2ed">https://xinzaigeek.lanzoub.com/b00je1g2ed</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Bandicam录屏</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g33i">https://xinzaigeek.lanzoub.com/b00je1g33i</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">PotPlayer</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g3af">https://xinzaigeek.lanzoub.com/b00je1g3af</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">Python编译器</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g6ra">https://xinzaigeek.lanzoub.com/b00je1g6ra</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">MySQL</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je1g7ih">https://xinzaigeek.lanzoub.com/b00je1g7ih</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">NoMeiryoUI</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je519qb">https://xinzaigeek.lanzoub.com/b00je519qb</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">鸿蒙字体</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je519za">https://xinzaigeek.lanzoub.com/b00je519za</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">串口工具</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00je77ggb">https://xinzaigeek.lanzoub.com/b00je77ggb</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">MobaXterm</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jeazv1c">https://xinzaigeek.lanzoub.com/b00jeazv1c</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">音乐格式转换</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jeboaxi">https://xinzaigeek.lanzoub.com/b00jeboaxi</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">AutoHotkey脚本成品</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jec7c8j">https://xinzaigeek.lanzoub.com/b00jec7c8j</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">关闭VBS</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jech66b">https://xinzaigeek.lanzoub.com/b00jech66b</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">手心输入法</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jee6gfg">https://xinzaigeek.lanzoub.com/b00jee6gfg</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">天翼云电脑永不休眠</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jegwbih">https://xinzaigeek.lanzoub.com/b00jegwbih</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">FRPMGR</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jehrv3i">https://xinzaigeek.lanzoub.com/b00jehrv3i</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center">鸿蒙工具箱</td><td style="text-align:center"><a href="https://xinzaigeek.lanzoub.com/b00jeqmhxi">https://xinzaigeek.lanzoub.com/b00jeqmhxi</a></td><td style="text-align:center">xinzai</td><td style="text-align:center">蓝奏云</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">xinzai</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">xinzai</td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">xinzai</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">C语言编译器</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXip2dQic8w">https://caiyun.139.com/m/i?2jQXip2dQic8w</a></td><td style="text-align:center">txsh</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">VSCode</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXi00qNs30t">https://caiyun.139.com/m/i?2jQXi00qNs30t</a></td><td style="text-align:center">0cwd</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">CubeMX</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXip2dMTAci">https://caiyun.139.com/m/i?2jQXip2dMTAci</a></td><td style="text-align:center">yew9</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">SQLServer</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2Firypp">https://caiyun.139.com/m/i?2jQXiv2Firypp</a></td><td style="text-align:center">tb3h</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">PyCharm</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y24Vh4">https://caiyun.139.com/m/i?2jQXif1y24Vh4</a></td><td style="text-align:center">r62n</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Navicat</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXi916vFK7e">https://caiyun.139.com/m/i?2jQXi916vFK7e</a></td><td style="text-align:center">5bj5</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Java_jdk</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXim20xCb2d">https://caiyun.139.com/m/i?2jQXim20xCb2d</a></td><td style="text-align:center">2mhv</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">IDEA</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y250c7">https://caiyun.139.com/m/i?2jQXif1y250c7</a></td><td style="text-align:center">uiwe</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Docker</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhTZZh0d2o">https://caiyun.139.com/m/i?2jQXhTZZh0d2o</a></td><td style="text-align:center">fv4o</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">启动盘制作工具</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXi60TemReu">https://caiyun.139.com/m/i?2jQXi60TemReu</a></td><td style="text-align:center">n6jc</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Hasher</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXip2dMTMaf">https://caiyun.139.com/m/i?2jQXip2dMTMaf</a></td><td style="text-align:center">01u6</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">安卓各类APP</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhX0cw0Tyg">https://caiyun.139.com/m/i?2jQXhX0cw0Tyg</a></td><td style="text-align:center">6imm</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">DLL修复工具</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXi60TgMFic">https://caiyun.139.com/m/i?2jQXi60TgMFic</a></td><td style="text-align:center">xhg4</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">NET修复器</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y256j2">https://caiyun.139.com/m/i?2jQXif1y256j2</a></td><td style="text-align:center">efvz</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">微软运行库</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXip2dQinxr">https://caiyun.139.com/m/i?2jQXip2dQinxr</a></td><td style="text-align:center">44mu</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">360网络大师</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y4vsv5">https://caiyun.139.com/m/i?2jQXif1y4vsv5</a></td><td style="text-align:center">74ig</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">360驱动大师</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXii1MiDB5b">https://caiyun.139.com/m/i?2jQXii1MiDB5b</a></td><td style="text-align:center">6sw8</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Typora</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2FirEl9">https://caiyun.139.com/m/i?2jQXiv2FirEl9</a></td><td style="text-align:center">bchx</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">搜狗输入法</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiH3zb5cna">https://caiyun.139.com/m/i?2jQXiH3zb5cna</a></td><td style="text-align:center">wx2w</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Office</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXii1MiDGrz">https://caiyun.139.com/m/i?2jQXii1MiDGrz</a></td><td style="text-align:center">zt42</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Win10系统</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2FkJUcv">https://caiyun.139.com/m/i?2jQXiv2FkJUcv</a></td><td style="text-align:center">onbw</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Win7系统</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhMZwR8Xc8">https://caiyun.139.com/m/i?2jQXhMZwR8Xc8</a></td><td style="text-align:center">ug15</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">有道翻译</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhMZwR92w2">https://caiyun.139.com/m/i?2jQXhMZwR92w2</a></td><td style="text-align:center">154d</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">剪映</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2FirLy6">https://caiyun.139.com/m/i?2jQXiv2FirLy6</a></td><td style="text-align:center">enn8</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">EV录屏</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y25ne7">https://caiyun.139.com/m/i?2jQXif1y25ne7</a></td><td style="text-align:center">ve5v</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">PS</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y25sx1">https://caiyun.139.com/m/i?2jQXif1y25sx1</a></td><td style="text-align:center">magg</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">PR</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1y25xmt">https://caiyun.139.com/m/i?2jQXif1y25xmt</a></td><td style="text-align:center">nprm</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Ai</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhMZwR9hes">https://caiyun.139.com/m/i?2jQXhMZwR9hes</a></td><td style="text-align:center">f804</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">AE</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiH3zb5oy8">https://caiyun.139.com/m/i?2jQXiH3zb5oy8</a></td><td style="text-align:center">u857</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Win2012Server系统</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2FkK6cf">https://caiyun.139.com/m/i?2jQXiv2FkK6cf</a></td><td style="text-align:center">z8qw</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Win11系统</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXim20xCncr">https://caiyun.139.com/m/i?2jQXim20xCncr</a></td><td style="text-align:center">y2sa</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">VMware虚拟机</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2FkKb08">https://caiyun.139.com/m/i?2jQXiv2FkKb08</a></td><td style="text-align:center">araj</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">便携版软件</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhTZZh0t45">https://caiyun.139.com/m/i?2jQXhTZZh0t45</a></td><td style="text-align:center">sm1k</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">MindManager</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXii1MiDSeq">https://caiyun.139.com/m/i?2jQXii1MiDSeq</a></td><td style="text-align:center">arph</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Xmind</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2Fisck5">https://caiyun.139.com/m/i?2jQXiv2Fisck5</a></td><td style="text-align:center">apsx</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Visio</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiH3zb5u46">https://caiyun.139.com/m/i?2jQXiH3zb5u46</a></td><td style="text-align:center">zqqe</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">WPS特别定制版</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXic1jNahok">https://caiyun.139.com/m/i?2jQXic1jNahok</a></td><td style="text-align:center">knqr</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Acrobat_Pro</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXic1jKP9fr">https://caiyun.139.com/m/i?2jQXic1jKP9fr</a></td><td style="text-align:center">dpqd</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">福昕PDF</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXi60TgN3y0">https://caiyun.139.com/m/i?2jQXi60TgN3y0</a></td><td style="text-align:center">iv8s</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">傲梅轻松备份</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXhTZZh0Ppa">https://caiyun.139.com/m/i?2jQXhTZZh0Ppa</a></td><td style="text-align:center">qyxv</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">esp-idf</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXif1xRuLj3">https://caiyun.139.com/m/i?2jQXif1xRuLj3</a></td><td style="text-align:center">4lkk</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Android Studio</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXis2rFW066">https://caiyun.139.com/m/i?2jQXis2rFW066</a></td><td style="text-align:center">2y7z</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">.android_.gradle库</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2jQXiv2EZn666">https://caiyun.139.com/m/i?2jQXiv2EZn666</a></td><td style="text-align:center">f6ef</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">CubeIDE</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2m90bWRhPKKqv">https://caiyun.139.com/m/i?2m90bWRhPKKqv</a></td><td style="text-align:center">7y7w</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">嵌入式手册大全</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2mknqhevDWtcq">https://caiyun.139.com/m/i?2mknqhevDWtcq</a></td><td style="text-align:center">5n3t</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">江科大STM32F103标准库资料</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2mknpZdadu0lq">https://caiyun.139.com/m/i?2mknpZdadu0lq</a></td><td style="text-align:center">istp</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Keil软件</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2mknqkeJPB9el">https://caiyun.139.com/m/i?2mknqkeJPB9el</a></td><td style="text-align:center">b9bh</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">CentOS系统</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2mWL7FFvMWz9l">https://caiyun.139.com/m/i?2mWL7FFvMWz9l</a></td><td style="text-align:center">sdk4</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">FinalShell</td><td style="text-align:center"><a href="https://caiyun.139.com/m/i?2mWL7wER70h6t">https://caiyun.139.com/m/i?2mWL7wER70h6t</a></td><td style="text-align:center">9xh1</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Frpc</td><td style="text-align:center"><a href="https://caiyun.139.com/w/i/2nQQRPCibVrcx">https://caiyun.139.com/w/i/2nQQRPCibVrcx</a></td><td style="text-align:center">y0di</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center">Apifox</td><td style="text-align:center"><a href="https://caiyun.139.com/w/i/2nQQSFG7360tx">https://caiyun.139.com/w/i/2nQQSFG7360tx</a></td><td style="text-align:center">yaxj</td><td style="text-align:center">移动云盘</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h1 id="网址资源"><a class="markdownIt-Anchor" href="#网址资源"></a> 网址资源</h1><table><thead><tr><th style="text-align:center">资源名称</th><th style="text-align:center">链接</th></tr></thead><tbody><tr><td style="text-align:center">OpenHarmony源代码</td><td style="text-align:center"><a href="https://gitee.com/openharmony/docs/blob/master/zh-cn/device-dev/get-code/sourcecode-acquire.md#https://gitee.com/link?target=https%3A%2F%2Frepo.huaweicloud.com%2Fopenharmony%2Fos%2F4.1-Release%2Fcode-v4.1-Release.tar.gz">链接</a></td></tr><tr><td style="text-align:center">Ubuntu系统镜像</td><td style="text-align:center"><a href="https://releases.ubuntu.com/?_gl=1*k8vgeb*_gcl_au*MTc2NjcyMzQwNy4xNzI2NzE0NDc3&amp;_ga=2.198801199.1471697272.1726714466-1798178156.1726714428">链接</a></td></tr><tr><td style="text-align:center">多种系统镜像</td><td style="text-align:center"><a href="https://next.itellyou.cn/Identity/Account/Login?ReturnUrl=%2FOriginal%2F">新链接</a></td></tr><tr><td style="text-align:center"><a href="https://msdn.itellyou.cn/">旧链接</a></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">微PE工具箱</td><td style="text-align:center"><a href="https://www.wepe.com.cn/download.html">https://www.wepe.com.cn/download.html</a></td></tr><tr><td style="text-align:center">联想官方驱动</td><td style="text-align:center"><a href="https://newsupport.lenovo.com.cn/driveDownloads_index.html?fromsource=guanwangshouyexiadaohang">链接</a></td></tr><tr><td style="text-align:center">Motrix下载器</td><td style="text-align:center"><a href="https://motrix.app/download">https://motrix.app/download</a></td></tr><tr><td style="text-align:center">Xdown下载器</td><td style="text-align:center"><a href="https://xdown.org/">https://xdown.org/</a></td></tr><tr><td style="text-align:center">PixPin截图</td><td style="text-align:center"><a href="https://pixpin.cn/">https://pixpin.cn/</a></td></tr><tr><td style="text-align:center">Android Studio</td><td style="text-align:center"><a href="https://developer.android.google.cn/studio?hl=zh-cn">https://developer.android.google.cn/studio?hl=zh-cn</a></td></tr><tr><td style="text-align:center">DevEco Studio</td><td style="text-align:center"><a href="https://developer.huawei.com/consumer/cn/download/">https://developer.huawei.com/consumer/cn/download/</a></td></tr><tr><td style="text-align:center">VSCode</td><td style="text-align:center"><a href="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a></td></tr><tr><td style="text-align:center">Keil</td><td style="text-align:center"><a href="https://www.keil.com/download/product/">https://www.keil.com/download/product/</a></td></tr><tr><td style="text-align:center">Watt Toolkit加速器</td><td style="text-align:center"><a href="https://steampp.net/">https://steampp.net/</a></td></tr><tr><td style="text-align:center">TTime 翻译</td><td style="text-align:center"><a href="https://ttime.v1.timerecord.cn/">https://ttime.v1.timerecord.cn/</a></td></tr><tr><td style="text-align:center">火狐定制版</td><td style="text-align:center"><a href="https://tete009.pages.dev/en-US/software#FX136_CL19">https://tete009.pages.dev/en-US/software#FX136_CL19</a></td></tr><tr><td style="text-align:center">火狐老版本</td><td style="text-align:center"><a href="https://ftp.mozilla.org/pub/mozilla.org//firefox/releases/">https://ftp.mozilla.org/pub/mozilla.org//firefox/releases/</a></td></tr><tr><td style="text-align:center">gcc交叉编译器</td><td style="text-align:center"><a href="https://developer.arm.com/downloads/-/gnu-a">https://developer.arm.com/downloads/-/gnu-a</a></td></tr><tr><td style="text-align:center">ST中文文档</td><td style="text-align:center"><a href="https://www.stmcu.org.cn/">https://www.stmcu.org.cn/</a></td></tr><tr><td style="text-align:center">插件下载</td><td style="text-align:center"><a href="https://www.crxsoso.com/">https://www.crxsoso.com/</a><br /><a href="https://www.youxiaohou.com/">https://www.youxiaohou.com/</a><br /><a href="https://chrome.zzzmh.cn/index">https://chrome.zzzmh.cn/index</a><br /><a href="https://extensiondock.com/cn">https://extensiondock.com/cn</a><br /><a href="https://chrome.pictureknow.com/">https://chrome.pictureknow.com/</a></td></tr><tr><td style="text-align:center">HiSpark Studio</td><td style="text-align:center"><a href="https://developers.hisilicon.com/devCenter/index?id=9dfafc50-7189-4fb4-a">https://developers.hisilicon.com/devCenter/index?id=9dfafc50-7189-4fb4-a</a></td></tr><tr><td style="text-align:center">影视</td><td style="text-align:center"><a href="https://www.kdocs.cn/l/cicnV9O7Wpi0">https://www.kdocs.cn/l/cicnV9O7Wpi0</a></td></tr><tr><td style="text-align:center">MQTTX</td><td style="text-align:center"><a href="https://mqttx.app/zh/downloads">https://mqttx.app/zh/downloads</a></td></tr><tr><td style="text-align:center">EMQX</td><td style="text-align:center"><a href="https://www.emqx.com/zh/downloads/broker">https://www.emqx.com/zh/downloads/broker</a></td></tr><tr><td style="text-align:center">EMQX公共服务</td><td style="text-align:center"><a href="https://www.emqx.com/zh/mqtt-dashboard#/dashboard/overview">https://www.emqx.com/zh/mqtt-dashboard#/dashboard/overview</a></td></tr><tr><td style="text-align:center">NSSM</td><td style="text-align:center"><a href="https://nssm.cc/download">https://nssm.cc/download</a></td></tr><tr><td style="text-align:center">nginx</td><td style="text-align:center"><a href="https://nginx.org/en/download.html">https://nginx.org/en/download.html</a></td></tr><tr><td style="text-align:center">VirtualBox</td><td style="text-align:center"><a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">CAJViewer</td><td style="text-align:center"><a href="https://cajviewer.cnki.net/download.html">https://cajviewer.cnki.net/download.html</a></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h1 id="开发文档"><a class="markdownIt-Anchor" href="#开发文档"></a> 开发文档</h1><table><thead><tr><th style="text-align:center">文档名称</th><th style="text-align:center">链接</th></tr></thead><tbody><tr><td style="text-align:center">无名科技</td><td style="text-align:center"><a href="https://www.nologo.tech/">https://www.nologo.tech/</a></td></tr><tr><td style="text-align:center">Open Harmony</td><td style="text-align:center"><a href="https://device.harmonyos.com/cn/develop/">https://device.harmonyos.com/cn/develop/</a></td></tr><tr><td style="text-align:center">RT-Thread</td><td style="text-align:center"><a href="https://www.rt-thread.org/document/site/#/rt-thread-version/rt-thread-standard/README">链接</a></td></tr><tr><td style="text-align:center">Vue</td><td style="text-align:center"><a href="https://cn.vuejs.org/guide/introduction">https://cn.vuejs.org/guide/introduction</a></td></tr><tr><td style="text-align:center">Docker</td><td style="text-align:center"><a href="https://docker.easydoc.net/doc/81170005/cCewZWoN/lTKfePfP">https://docker.easydoc.net/doc/81170005/cCewZWoN/lTKfePfP</a></td></tr><tr><td style="text-align:center">MyBatis-Plus</td><td style="text-align:center"><a href="https://baomidou.com/introduce/">https://baomidou.com/introduce/</a></td></tr><tr><td style="text-align:center">嘉立创EDA标准版</td><td style="text-align:center"><a href="https://docs.lceda.cn/cn/Introduction/Introduction-to-LCEDA/">https://docs.lceda.cn/cn/Introduction/Introduction-to-LCEDA/</a></td></tr><tr><td style="text-align:center">嘉立创EDA专业版</td><td style="text-align:center"><a href="https://prodocs.lceda.cn/cn/introduction/introduction/">https://prodocs.lceda.cn/cn/introduction/introduction/</a></td></tr><tr><td style="text-align:center">机智云</td><td style="text-align:center"><a href="https://devdocs.gizwits.com/">https://devdocs.gizwits.com/</a></td></tr><tr><td style="text-align:center">嘉立创＿ESP32S3R8N</td><td style="text-align:center"><a href="https://lceda001.feishu.cn/wiki/GOIlwwfbIi1SC3k8594cDeFVn8g">https://lceda001.feishu.cn/wiki/GOIlwwfbIi1SC3k8594cDeFVn8g</a></td></tr><tr><td style="text-align:center">乐鑫ESP</td><td style="text-align:center"><a href="https://www.espressif.com.cn/zh-hans/support/documents/technical-documents">链接</a></td></tr><tr><td style="text-align:center">嘉立创文档</td><td style="text-align:center"><a href="https://wiki.lckfb.com/zh-hans/">https://wiki.lckfb.com/zh-hans/</a></td></tr><tr><td style="text-align:center">LVGL</td><td style="text-align:center"><a href="https://lvgl.100ask.net/master/">https://lvgl.100ask.net/master/</a></td></tr><tr><td style="text-align:center">野火资料</td><td style="text-align:center"><a href="https://doc.embedfire.com/products/link/zh/latest/index.html">https://doc.embedfire.com/products/link/zh/latest/index.html</a></td></tr><tr><td style="text-align:center">FreeRTOS入门与工程实践</td><td style="text-align:center"><a href="https://rtos.100ask.net/zh/FreeRTOS/DShanMCU-F103/">https://rtos.100ask.net/zh/FreeRTOS/DShanMCU-F103/</a></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><h1 id="在线工具库"><a class="markdownIt-Anchor" href="#在线工具库"></a> 在线工具库</h1><table><thead><tr><th style="text-align:center">工具名称</th><th style="text-align:center">链接</th></tr></thead><tbody><tr><td style="text-align:center">随机密码生成</td><td style="text-align:center"><a href="https://1password.com/zh-cn/password-generator">https://1password.com/zh-cn/password-generator</a></td></tr><tr><td style="text-align:center">测试网站速度</td><td style="text-align:center"><a href="https://ping.chinaz.com/">https://ping.chinaz.com/</a></td></tr><tr><td style="text-align:center">白描OCR</td><td style="text-align:center"><a href="https://web.baimiaoapp.com/">https://web.baimiaoapp.com/</a></td></tr><tr><td style="text-align:center">生成在线PDF</td><td style="text-align:center"><a href="https://maifile.cn/maiupload.php">https://maifile.cn/maiupload.php</a></td></tr><tr><td style="text-align:center">菜鸟教程十六进制颜色查询</td><td style="text-align:center"><a href="https://www.runoob.com/cssref/css-colorsfull.html">https://www.runoob.com/cssref/css-colorsfull.html</a></td></tr><tr><td style="text-align:center">十六进制颜色查询</td><td style="text-align:center"><a href="https://colorsinspo.com/color-palettes/2">https://colorsinspo.com/color-palettes/2</a></td></tr><tr><td style="text-align:center">查询IP地址归属地</td><td style="text-align:center"><a href="https://tool.lu/ip/">https://tool.lu/ip/</a></td></tr><tr><td style="text-align:center">图片修复</td><td style="text-align:center"><a href="https://image.baidu.com/search/index?tn=baiduimage&amp;ipn=r&amp;ct=201326592&amp;cl=2&amp;lm=-1&amp;st=-1&amp;fm=detail&amp;fr=baiduimageedit&amp;hs=0&amp;xthttps=111110&amp;sf=1&amp;fmq=1713767239197_R&amp;pv=&amp;ic=0&amp;nc=1&amp;z=&amp;se=&amp;showtab=0&amp;fb=0&amp;width=&amp;height=&amp;face=0&amp;istype=2&amp;ie=utf-8&amp;word=bdaitpzs%E7%99%BE%E5%BA%A6AI%E5%9B%BE%E7%89%87%E5%8A%A9%E6%89%8Bbdaitpzs&amp;o">百度AI图片助手</a></td></tr><tr><td style="text-align:center">图片压缩</td><td style="text-align:center"><a href="https://tinypng.com/">TinyPng</a><br /><a href="https://www.secaibi.com/tools/%E5%9C%A8%E7%BA%BF%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/">色彩笔</a><br /><a href="https://zh.recompressor.com/">Recompressor</a><br /><a href="https://www.picdiet.com/zh-cn?ref=dartools.com#google_vignette">Picdiet</a><br /><a href="https://squoosh.app/">Squoosh</a><br /><a href="https://imagecompressor.com/zh/#google_vignette">Optimizilla</a></td></tr><tr><td style="text-align:center">云图床</td><td style="text-align:center"><a href="https://sm.ms/">sm.ms（主）</a><br /><a href="https://smms.app/">sm.ms（副）</a><br /><a href="https://freeimage.host/">freeimage图床</a><br /><a href="https://postimages.org/">postimage图床</a><br /><a href="https://www.imgbed.link/">风筝图床</a><br /><a href="https://www.imgurl.org/">ImgURL图床</a><br /><a href="https://helloimg.com/">Hello图床</a></td></tr><tr><td style="text-align:center">一键生成UML序列图</td><td style="text-align:center"><a href="https://www.plantuml.com/plantuml/uml/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000">https://www.plantuml.com/plantuml/uml/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000</a><br /><a href="https://www.planttext.com/">https://www.planttext.com/</a></td></tr><tr><td style="text-align:center">在线抠图</td><td style="text-align:center"><a href="https://remove.photos/zh-cn/#google_vignette">https://remove.photos/zh-cn/#google_vignette</a><br /><a href="https://www.koukoutu.com/removebgtool/all">https://www.koukoutu.com/removebgtool/all</a></td></tr><tr><td style="text-align:center">转Base64格式</td><td style="text-align:center"><a href="https://base64.guru/converter/encode/image">https://base64.guru/converter/encode/image</a></td></tr><tr><td style="text-align:center">CAJ转PDF</td><td style="text-align:center"><a href="https://remeins.com/index/app/caj2pdf">https://remeins.com/index/app/caj2pdf</a><br /><a href="https://caj.gentleltd.cn/">https://caj.gentleltd.cn/</a></td></tr><tr><td style="text-align:center">网站图标提取</td><td style="text-align:center"><a href="https://www.faviconextractor.com/zh">https://www.faviconextractor.com/zh</a></td></tr><tr><td style="text-align:center">图片转PDF</td><td style="text-align:center"><a href="https://smallpdf.com/cn/jpg-to-pdf">https://smallpdf.com/cn/jpg-to-pdf</a></td></tr><tr><td style="text-align:center">SVG 代码编辑器</td><td style="text-align:center"><a href="https://tooltool.net/zh/svg">https://tooltool.net/zh/svg</a></td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 工具分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 资源库 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
