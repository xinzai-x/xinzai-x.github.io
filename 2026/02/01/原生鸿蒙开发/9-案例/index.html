<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>9.æ¡ˆä¾‹ | æ˜Ÿä»”æå®¢</title><meta name="keywords" content="åŸç”Ÿé¸¿è’™å¼€å‘"><meta name="author" content="æ˜Ÿä»”"><meta name="copyright" content="æ˜Ÿä»”"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="9.æ¡ˆä¾‹"><meta name="application-name" content="9.æ¡ˆä¾‹"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta name="description" content="163é‚®ç®±é‚®ä»¶å‘é€ ä»£ç é“¾æ¥ï¼šhttps:&amp;#x2F;&amp;#x2F;pan.wo.cn&amp;#x2F;s&amp;#x2F;1J1c4w90901  æå–ç ï¼š1Spc å‚è€ƒåšå®¢ï¼šhttps:&amp;#x2F;&amp;#x2F;developer.huawei.com&amp;#x2F;consumer&amp;#x2F;cn&amp;#x2F;blog&amp;#x2F;topic&amp;#x2F;03148160059378015 åœ¨module.json5é…ç½®æ–‡ä»¶"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.6673543.xyz/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"ä½œè€…: æ˜Ÿä»”","link":"é“¾æ¥: ","source":"æ¥æº: æ˜Ÿä»”æå®¢","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","copySuccess":"å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€"}},
  lightbox: 'null',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'æ˜Ÿä»”æå®¢',
  title: '9.æ¡ˆä¾‹',
  postAI: '',
  pageFillDescription: ' 163é‚®ç®±é‚®ä»¶å‘é€,  å¤©æ°”é‚®ç®±é‚®ä»¶å‘é€ä»£ç é“¾æ¥æå–ç å‚è€ƒåšå®¢åœ¨é…ç½®æ–‡ä»¶åŠ ä¸Šå¯¹æƒé™çš„å£°æ˜å¯¼å…¥æ‰€éœ€çš„æ¨¡å—ç½‘ç»œå¥—æ¥å­—æ¨¡å—ç”¨äºé€šä¿¡å·¥å…·æ¨¡å—ç”¨äºç¼–ç è§£ç ç­‰æ¥å£å®šä¹‰æœ¬åœ°ç»‘å®šåœ°å€åœ°å€æ—æœåŠ¡å™¨åœ°å€æœåŠ¡å™¨ç«¯å£åœ°å€æ—æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ•°æ®äºŒè¿›åˆ¶æ ¼å¼æ”¯æŒçš„åè®®ç‰ˆæœ¬åŠ å¯†å¥—ä»¶é…ç½®æœåŠ¡å™¨åœ°å€ä¿¡æ¯å®‰å…¨é€‰é¡¹å…¨å±€å®ä¾‹æ˜¯å¦å·²ç»‘å®šæœ¬åœ°åœ°å€æ˜¯å¦æ”¶åˆ°æœåŠ¡å™¨å“åº”æœåŠ¡å™¨åœ°å€ç«¯å£é‚®ç®±ç”¨æˆ·åé‚®ç®±æˆæƒç ä¸æ˜¯ç™»å½•å¯†ç æ”¶ä»¶äººåˆ—è¡¨é€—å·åˆ†éš”æ„è§åé¦ˆé‚®ä»¶æ ‡é¢˜å‘ä»¶äººé‚®ç®±é‚®ä»¶å†…å®¹æ˜¯å¦å¯ä»¥å‘é€é‚®ä»¶ç™»å½•æˆåŠŸåè®¾ä¸ºæ„å»ºå‡½æ•°é‚®ä»¶å‘é€å®¢æˆ·ç«¯é‚®ç®±æœåŠ¡å™¨åœ°å€è¾“å…¥é‚®ç®±æœåŠ¡å™¨åœ°å€æœåŠ¡å™¨ç«¯å£è¾“å…¥é‚®ç®±æœåŠ¡å™¨ç«¯å£ç”¨æˆ·åè¾“å…¥é‚®ç®±ç”¨æˆ·åå¯†ç è¾“å…¥å’Œç™»å½•æŒ‰é’®ç™»å½•å¯†ç æˆæƒç ç™»å½•æ”¶ä»¶äººè¾“å…¥æ”¶ä»¶äººé‚®ç®±å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš”é‚®ä»¶æ ‡é¢˜è¾“å…¥æ ‡é¢˜å‘ä»¶äººé‚®ç®±è¾“å…¥å‘ä»¶äººé‚®ç®±é‚®ä»¶å†…å®¹è¾“å…¥å’Œå‘é€æŒ‰é’®é‚®ä»¶å†…å®¹å‘é€ä»…åœ¨ç™»å½•æˆåŠŸåå¯ç”¨åˆ›å»ºæ–°çš„å®ä¾‹ç»‘å®šåˆ°æœ¬åœ°åœ°å€å¹¶è®¾ç½®ç›‘å¬å™¨ç»‘å®šåˆ°æ‰€æœ‰åœ°å€ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯ç›‘å¬é”™è¯¯äº‹ä»¶é”™è¯¯æœªçŸ¥é”™è¯¯è¯¦ç»†é”™è¯¯å¯¹è±¡ç›‘å¬è¿æ¥å…³é—­äº‹ä»¶è¿æ¥å·²è¢«æœåŠ¡å™¨æ–­å¼€å¯èƒ½æ˜¯ç©ºé—²è¶…æ—¶å‘é€æŒ‰é’®å·²ç¦ç”¨è¯·é‡æ–°ç‚¹å‡»ç™»å½•æˆ–å‘é€æ¥é‡è¿æ¸…ç†èµ„æºç™»å½•æµç¨‹é…ç½®é€‰é¡¹æ”¯æŒå’ŒåŠ å¯†å¥—ä»¶è¿æ¥æœåŠ¡å™¨æ­£åœ¨è¿æ¥è¿æ¥æˆåŠŸç­‰å¾…æœåŠ¡å™¨æ¬¢è¿æ¶ˆæ¯æœªæ”¶åˆ°æ¬¢è¿æ¶ˆæ¯æ¡æ‰‹æµç¨‹å‘é€å‘½ä»¤å¼€å§‹è®¤è¯ç¼–ç çš„ç”¨æˆ·åå’Œå¯†ç ç®€åŒ–åˆ¤æ–­å®é™…åº”æ£€æŸ¥å“åº”ç ç™»å½•æˆåŠŸå¯ä»¥å¼€å§‹å‘é€é‚®ä»¶ç™»å½•å¤±è´¥è¯·æ£€æŸ¥é‚®ç®±æˆæƒç ç™»å½•å¤±è´¥å‘é€é‚®ä»¶è¿æ¥ä¸å¯ç”¨æ­£åœ¨è‡ªåŠ¨å°è¯•é‡è¿å¼€å§‹å‘é€é‚®ä»¶å‘é€æµç¨‹å‘ä»¶äººæ”¶ä»¶äººåˆ—è¡¨æ”¯æŒå¤šä¸ªå‡†å¤‡å‘é€æ•°æ®æ„å»ºé‚®ä»¶å¤´ç¼–ç æ ‡é¢˜ç¼–ç å†…å®¹æ•°æ®ç»“æŸæ ‡è®°åˆ†å—å‘é€é‚®ä»¶å†…å®¹é¿å…å¤§åŒ…ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤æœåŠ¡å™¨æœªç¡®è®¤é‚®ä»¶æ¥æ”¶é‚®ä»¶å‘é€æˆåŠŸè¿æ¥ä¿æŒæ‰“å¼€å¯ç»§ç»­å‘é€ä¸‹ä¸€å°å‘é€å¤±è´¥æ‰§è¡Œå‘½ä»¤å¹¶ç­‰å¾…å“åº”æœªåˆå§‹åŒ–å‘½ä»¤ä»¥ç»“æŸå‘é€å‘½ä»¤å¤±è´¥ç­‰å¾…æœåŠ¡å™¨å“åº”è½®è¯¢æ–¹å¼ç­‰å¾…å“åº”è¶…æ—¶æ¯æ¯«ç§’æ£€æŸ¥ä¸€æ¬¡ç¼–ç å‡½æ•°å­—ç¬¦ä¸²è½¬ç¼–ç å¤±è´¥è½¬å­—ç¬¦ä¸²å‡½æ•°è§£ç è§£ç å¤±è´¥è§£ç å¤±è´¥å¼‚æ­¥ä¼‘çœ å‡½æ•°å¤©æ°”ä»£ç é“¾æ¥æå–ç ä½ç½®å®šä½åœ¨ä¸­æ·»åŠ ç½‘ç»œè®¿é—®æƒé™æ£€æŸ¥æ•°æ®æ˜¯å¦ä¸ºæ ¼å¼ä½¿ç”¨é¸¿è’™ç³»ç»Ÿè§£å‹æ•°æ®åŠ è½½å¤±è´¥è§£å‹å¤±è´¥ç½‘ç»œè¯·æ±‚å·¥å…·ç±»ä½¿ç”¨æ”¯æŒè‡ªåŠ¨è§£å‹æˆ–æ‰‹åŠ¨å¤„ç†è¯·æ±‚åœ°å€å“åº”æ•°æ®å‘èµ·è¯·æ±‚å…è®¸å‹ç¼©é¸¿è’™æ¨¡å—ä¸æ”¯æŒå‚æ•°è¯·æ±‚å“åº”ç å“åº”æ•°æ®ç±»å‹å¤„ç†æ•°æ®çš„å‡½æ•°è§£æå°è¯•è§£ææ•°æ®å‰å­—ç¬¦è§£ææˆåŠŸå¤„ç†å“åº”å¤±è´¥åŸå§‹æ•°æ®å‰å¤„ç†å“åº”å¤±è´¥æ”¶åˆ°å­—ç¬¦ä¸²æ•°æ®é•¿åº¦ç³»ç»Ÿå·²è‡ªåŠ¨è§£å‹ç›´æ¥ä½¿ç”¨å¦‚æœæ˜¯æ‰‹åŠ¨å¤„ç†æ”¶åˆ°æ•°æ®é•¿åº¦ç»§ç»­å¤„ç†é€»è¾‘è§£å‹å¤±è´¥ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆç»§ç»­å¤„ç†é€»è¾‘æœªçŸ¥å“åº”æ•°æ®ç±»å‹æ•°æ®åœ¨å„è‡ªçš„å¤„ç†åˆ†æ”¯ä¸­è°ƒç”¨æ•°æ®å¤„ç†å¤±è´¥æ•°æ®å¤„ç†å¤±è´¥è¯·æ±‚å¤±è´¥çŠ¶æ€ç ç½‘ç»œè¯·æ±‚å¤±è´¥ç½‘ç»œè¯·æ±‚å¤±è´¥å¿…é¡»é”€æ¯å’Œé£å¤©æ°”é…ç½®ä½ çš„ä¸“å±åŸŸåæ ¹æ®åŸå¸‚è·å–å¤©æ°”æ•°æ®åŸå¸‚åç§°è·å–åŸå¸‚ç§»é™¤ç¦ç”¨å‹ç¼©å‚æ•°è®©æœåŠ¡å™¨æ­£å¸¸è‡ªåŠ¨å¤„ç†è¯·æ±‚ä½ç½®ä½ç½®å“åº”æˆåŠŸæœªæ‰¾åˆ°è¯¥åŸå¸‚çš„å¤©æ°”æ•°æ®æ‰¾åˆ°åŸå¸‚åŸå¸‚åè·å–å®æ—¶å¤©æ°”ç§»é™¤ç¦ç”¨å‹ç¼©å‚æ•°è¯·æ±‚å®æ—¶å¤©æ°”å®æ—¶å¤©æ°”å“åº”æˆåŠŸè·å–æœªæ¥å¤©é¢„æŠ¥è¯·æ±‚å¤©æ°”é¢„æŠ¥å¤©æ°”é¢„æŠ¥å“åº”æˆåŠŸæ•°æ®è½¬æ¢ä¿æŒä¸å˜æ•°æ®å¤„ç†å®Œæˆè·å–å¤©æ°”å¤±è´¥å®æ—¶å¤©æ°”æ•°æ®æ¨¡å‹æ¸©åº¦å¤©æ°”çŠ¶å†µæ™´é›¨å¤šäº‘é£å‘é£åŠ›ç­‰çº§æ¹¿åº¦æ›´æ–°æ—¶é—´æœªæ¥é¢„æŠ¥æ•°æ®æ¨¡å‹æ—¥æœŸæœ€é«˜æ¸©æœ€ä½æ¸©ç™½å¤©å¤©æ°”çŠ¶å†µå¤©æ°”å“åº”ä½“æ¨¡å‹ä½ç½®æŸ¥è¯¢å“åº”æ¨¡å‹å®æ—¶å¤©æ°”å“åº”æ¨¡å‹æœªæ¥é¢„æŠ¥å“åº”æ¨¡å‹çŠ¶æ€ç®¡ç†åŒ—äº¬é»˜è®¤æŸ¥è¯¢åŒ—äº¬é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®æ ‡é¢˜åŒºåŸŸé¸¿è’™å¤©æ°”åŸå¸‚æŸ¥è¯¢åŒºåŸŸè¯·è¾“å…¥åŸå¸‚åç§°æŸ¥è¯¢åŠ è½½çŠ¶æ€æç¤ºé”™è¯¯æç¤ºå®æ—¶å¤©æ°”å±•ç¤ºå®æ—¶å¤©æ°”æ›´æ–°æ—¶é—´å¤©æ°”è¯¦æƒ…é£å‘é£åŠ›çº§æ¹¿åº¦æœªæ¥é¢„æŠ¥å±•ç¤ºæœªæ¥å¤©é¢„æŠ¥æ„å»ºå¤©æ°”ä¿¡æ¯å­é¡¹æ ¼å¼åŒ–æ—¶é—´è·å–å¤©æ°”æ•°æ®è·å–å¤©æ°”æ•°æ®å¤±è´¥è¯·é‡è¯•è·å–å¤©æ°”å¤±è´¥',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-02-19 17:55:04',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">æ˜Ÿä»”æå®¢</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><span> ç¬”è®°</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> æ ‡ç­¾</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" itemprop="url">åŸç”Ÿé¸¿è’™å¼€å‘</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>åŸç”Ÿé¸¿è’™å¼€å‘</span></a></span></div></div><h1 class="post-title" itemprop="name headline">9.æ¡ˆä¾‹</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2026-02-01T07:08:25.000Z" title="å‘è¡¨äº 2026-02-01 15:08:25">2026-02-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2026-02-19T09:55:04.687Z" title="æ›´æ–°äº 2026-02-19 17:55:04">2026-02-19</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºé•¿æ²™"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>é•¿æ²™</span></div></div></div><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.6673543.xyz/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/"><header><a class="post-meta-categories" href="/categories/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" itemprop="url">åŸç”Ÿé¸¿è’™å¼€å‘</a><a href="/tags/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" tabindex="-1" itemprop="url">åŸç”Ÿé¸¿è’™å¼€å‘</a><h1 id="CrawlerTitle" itemprop="name headline">9.æ¡ˆä¾‹</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">æ˜Ÿä»”</span><time itemprop="dateCreated datePublished" datetime="2026-02-01T07:08:25.000Z" title="å‘è¡¨äº 2026-02-01 15:08:25">2026-02-01</time><time itemprop="dateCreated datePublished" datetime="2026-02-19T09:55:04.687Z" title="æ›´æ–°äº 2026-02-19 17:55:04">2026-02-19</time></header><h1 id="163é‚®ç®±é‚®ä»¶å‘é€"><a class="markdownIt-Anchor" href="#163é‚®ç®±é‚®ä»¶å‘é€"></a> 163é‚®ç®±é‚®ä»¶å‘é€</h1>
<p>ä»£ç é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://pan.wo.cn/s/1J1c4w90901">https://pan.wo.cn/s/1J1c4w90901</a>  æå–ç ï¼š1Spc</p>
<p>å‚è€ƒåšå®¢ï¼š<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/blog/topic/03148160059378015">https://developer.huawei.com/consumer/cn/blog/topic/03148160059378015</a></p>
<p>åœ¨module.json5é…ç½®æ–‡ä»¶åŠ ä¸Šå¯¹æƒé™çš„å£°æ˜ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.INTERNET&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥æ‰€éœ€çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> socket <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.socket&#x27;</span>; <span class="comment">// ç½‘ç»œå¥—æ¥å­—æ¨¡å—ï¼Œç”¨äºTCP/TLSé€šä¿¡</span></span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">&#x27;@ohos.util&#x27;</span>; <span class="comment">// å·¥å…·æ¨¡å—ï¼Œç”¨äºBase64ç¼–ç /è§£ç ç­‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å£å®šä¹‰</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">LocalAddress</span> &#123;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>; <span class="comment">// æœ¬åœ°ç»‘å®šåœ°å€</span></span><br><span class="line">  <span class="attr">family</span>: <span class="built_in">number</span>; <span class="comment">// åœ°å€æ—ï¼ˆIPv4=1, IPv6=2ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ServerAddress</span> &#123;</span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span>; <span class="comment">// æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">  <span class="attr">port</span>: <span class="built_in">number</span>; <span class="comment">// æœåŠ¡å™¨ç«¯å£</span></span><br><span class="line">  <span class="attr">family</span>: <span class="built_in">number</span>; <span class="comment">// åœ°å€æ—</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MessageValue</span> &#123;</span><br><span class="line">  <span class="attr">message</span>: <span class="title class_">ArrayBuffer</span>; <span class="comment">// æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ•°æ®ï¼ˆäºŒè¿›åˆ¶æ ¼å¼ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SecureOptions</span> &#123;</span><br><span class="line">  <span class="attr">protocols</span>: socket.<span class="property">Protocol</span>[]; <span class="comment">// æ”¯æŒçš„TLSåè®®ç‰ˆæœ¬</span></span><br><span class="line">  <span class="attr">cipherSuite</span>: <span class="built_in">string</span>; <span class="comment">// åŠ å¯†å¥—ä»¶é…ç½®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ConnectOptions</span> &#123;</span><br><span class="line">  <span class="attr">address</span>: <span class="title class_">ServerAddress</span>; <span class="comment">// æœåŠ¡å™¨åœ°å€ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">secureOptions</span>: <span class="title class_">SecureOptions</span>; <span class="comment">// TLSå®‰å…¨é€‰é¡¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€TLSSocketå®ä¾‹</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">tlsSocket</span>: socket.<span class="property">TLSSocket</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="attr">bindLocal</span>: <span class="built_in">boolean</span> = <span class="literal">false</span> <span class="comment">// Socketæ˜¯å¦å·²ç»‘å®šæœ¬åœ°åœ°å€</span></span><br><span class="line">  <span class="attr">isServerResponse</span>: <span class="built_in">boolean</span> = <span class="literal">false</span> <span class="comment">// æ˜¯å¦æ”¶åˆ°æœåŠ¡å™¨å“åº”</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">serverAddr</span>: <span class="built_in">string</span> = <span class="string">&quot;smtp.163.com&quot;</span> <span class="comment">// SMTPæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">serverPort</span>: <span class="built_in">number</span> = <span class="number">465</span> <span class="comment">// SMTP TLSç«¯å£</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">userName</span>: <span class="built_in">string</span> = <span class="string">&quot;staseaiot@163.com&quot;</span> <span class="comment">// é‚®ç®±ç”¨æˆ·å</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">passwd</span>: <span class="built_in">string</span> = <span class="string">&quot;DAtTEFxcvXt76ByV&quot;</span> <span class="comment">// é‚®ç®±æˆæƒç ï¼ˆä¸æ˜¯ç™»å½•å¯†ç ï¼‰</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">rcptList</span>: <span class="built_in">string</span> = <span class="string">&quot;1970884166@qq.com&quot;</span> <span class="comment">// æ”¶ä»¶äººåˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mailTitle</span>: <span class="built_in">string</span> = <span class="string">&quot;æ„è§åé¦ˆ&quot;</span> <span class="comment">// é‚®ä»¶æ ‡é¢˜</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mailFrom</span>: <span class="built_in">string</span> = <span class="string">&quot;staseaiot@163.com&quot;</span> <span class="comment">// å‘ä»¶äººé‚®ç®±</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">mailContent</span>: <span class="built_in">string</span> = <span class="string">&quot;This is greeting from Harmony OS&quot;</span> <span class="comment">// é‚®ä»¶å†…å®¹</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">canSend</span>: <span class="built_in">boolean</span> = <span class="literal">false</span> <span class="comment">// æ˜¯å¦å¯ä»¥å‘é€é‚®ä»¶ï¼ˆç™»å½•æˆåŠŸåè®¾ä¸ºtrueï¼‰</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// UIæ„å»ºå‡½æ•°</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;é‚®ä»¶å‘é€å®¢æˆ·ç«¯ï¼ˆ163é‚®ç®± - 465 TLSï¼‰&quot;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æœåŠ¡å™¨åœ°å€è¾“å…¥</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;é‚®ç®±æœåŠ¡å™¨åœ°å€ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">120</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">serverAddr</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">serverAddr</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æœåŠ¡å™¨ç«¯å£è¾“å…¥</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;é‚®ç®±æœåŠ¡å™¨ç«¯å£ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">120</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">serverPort</span>.<span class="title function_">toString</span>() &#125;)</span><br><span class="line">            .<span class="title function_">type</span>(<span class="title class_">InputType</span>.<span class="property">Number</span>)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">serverPort</span> = <span class="built_in">parseInt</span>(value) &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨æˆ·åè¾“å…¥</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;é‚®ç®±ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">90</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">userName</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">userName</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯†ç è¾“å…¥å’Œç™»å½•æŒ‰é’®</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;ç™»å½•å¯†ç (æˆæƒç )ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">130</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">passwd</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">passwd</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&quot;ç™»å½•&quot;</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="title function_">login</span>() &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">70</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ”¶ä»¶äººè¾“å…¥</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;æ”¶ä»¶äººé‚®ç®±ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">90</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">placeholder</span>: <span class="string">&quot;å¤šä¸ªä½¿ç”¨é€—å·åˆ†éš”&quot;</span>, <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">rcptList</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">rcptList</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‚®ä»¶æ ‡é¢˜è¾“å…¥</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;æ ‡é¢˜ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">mailTitle</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">mailTitle</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘ä»¶äººé‚®ç®±è¾“å…¥</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;å‘ä»¶äººé‚®ç®±ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">90</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">0</span>)</span><br><span class="line">          <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">mailFrom</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">mailFrom</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">            .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‚®ä»¶å†…å®¹è¾“å…¥å’Œå‘é€æŒ‰é’®</span></span><br><span class="line">        <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span>, <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;é‚®ä»¶å†…å®¹ï¼š&quot;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">TextArea</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">mailContent</span> &#125;)</span><br><span class="line">            .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="property">mailContent</span> = value &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">120</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&quot;å‘é€&quot;</span>)</span><br><span class="line">            .<span class="title function_">enabled</span>(<span class="variable language_">this</span>.<span class="property">canSend</span>) <span class="comment">// ä»…åœ¨ç™»å½•æˆåŠŸåå¯ç”¨</span></span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">this</span>.<span class="title function_">sendMail</span>() &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">flexGrow</span>(<span class="number">1</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ›å»ºæ–°çš„TLSSocketå®ä¾‹</span></span><br><span class="line">  <span class="title function_">createNewSocket</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tlsSocket) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123; tlsSocket.<span class="title function_">close</span>(); &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    tlsSocket = socket.<span class="title function_">constructTLSSocketInstance</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bindLocal</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»‘å®šSocketåˆ°æœ¬åœ°åœ°å€å¹¶è®¾ç½®ç›‘å¬å™¨</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">bindSocket</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createNewSocket</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> <span class="attr">localAddress</span>: <span class="title class_">LocalAddress</span> = &#123; <span class="attr">address</span>: <span class="string">&quot;0.0.0.0&quot;</span>, <span class="attr">family</span>: <span class="number">1</span> &#125;; <span class="comment">// ç»‘å®šåˆ°æ‰€æœ‰IPv4åœ°å€</span></span><br><span class="line">      <span class="keyword">await</span> tlsSocket!.<span class="title function_">bind</span>(localAddress);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: bind success&quot;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">bindLocal</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: bind fail - <span class="subst">$&#123;e.message || e&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯</span></span><br><span class="line">    tlsSocket!.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="function">(<span class="params"><span class="attr">value</span>: <span class="title class_">MessageValue</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isServerResponse</span> = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">let</span> msg = <span class="title function_">buf2String</span>(value.<span class="property">message</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`S: <span class="subst">$&#123;msg&#125;</span>`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬é”™è¯¯äº‹ä»¶</span></span><br><span class="line">    tlsSocket!.<span class="title function_">on</span>(<span class="string">&quot;error&quot;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`E: Socket é”™è¯¯ - <span class="subst">$&#123;err.message || err.code || <span class="string">&#x27;æœªçŸ¥ TLS é”™è¯¯&#x27;</span>&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è¯¦ç»†é”™è¯¯å¯¹è±¡:&quot;</span>, err);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬è¿æ¥å…³é—­äº‹ä»¶</span></span><br><span class="line">    tlsSocket!.<span class="title function_">on</span>(<span class="string">&quot;close&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: è¿æ¥å·²è¢«æœåŠ¡å™¨æ–­å¼€ï¼ˆå¯èƒ½æ˜¯ç©ºé—²è¶…æ—¶ï¼‰&quot;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: å‘é€æŒ‰é’®å·²ç¦ç”¨ï¼Œè¯·é‡æ–°ç‚¹å‡»&#x27;ç™»å½•&#x27;æˆ–&#x27;å‘é€&#x27;æ¥é‡è¿&quot;</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">canSend</span> = <span class="literal">false</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç†Socketèµ„æº</span></span><br><span class="line">  <span class="title function_">cleanupSocket</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (tlsSocket) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123; tlsSocket.<span class="title function_">close</span>(); &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">      tlsSocket = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bindLocal</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isServerResponse</span> = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// SMTPç™»å½•æµç¨‹</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">bindSocket</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> <span class="attr">serverAddress</span>: <span class="title class_">ServerAddress</span> = &#123; <span class="attr">address</span>: <span class="variable language_">this</span>.<span class="property">serverAddr</span>, <span class="attr">port</span>: <span class="variable language_">this</span>.<span class="property">serverPort</span>, <span class="attr">family</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é…ç½®TLSé€‰é¡¹</span></span><br><span class="line">      <span class="keyword">const</span> <span class="attr">secureOptions</span>: <span class="title class_">SecureOptions</span> = &#123;</span><br><span class="line">        <span class="attr">protocols</span>: [socket.<span class="property">Protocol</span>.<span class="property">TLSv12</span>, socket.<span class="property">Protocol</span>.<span class="property">TLSv13</span>], <span class="comment">// æ”¯æŒTLS 1.2å’Œ1.3</span></span><br><span class="line">        <span class="attr">cipherSuite</span>: <span class="string">&#x27;TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256&#x27;</span> <span class="comment">// åŠ å¯†å¥—ä»¶</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> <span class="attr">connectOptions</span>: <span class="title class_">ConnectOptions</span> = &#123;</span><br><span class="line">        <span class="attr">address</span>: serverAddress,</span><br><span class="line">        <span class="attr">secureOptions</span>: secureOptions</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¿æ¥SMTPæœåŠ¡å™¨</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C: æ­£åœ¨è¿æ¥ <span class="subst">$&#123;<span class="variable language_">this</span>.serverAddr&#125;</span>:<span class="subst">$&#123;<span class="variable language_">this</span>.serverPort&#125;</span> (TLS)...`</span>);</span><br><span class="line">      <span class="keyword">await</span> tlsSocket!.<span class="title function_">connect</span>(connectOptions);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: TLS è¿æ¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç­‰å¾…æœåŠ¡å™¨æ¬¢è¿æ¶ˆæ¯ï¼ˆ220ï¼‰</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">wait4ServerResponse</span>(<span class="number">10000</span>);</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;æœªæ”¶åˆ° 220 æ¬¢è¿æ¶ˆæ¯&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// SMTPæ¡æ‰‹æµç¨‹</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">&quot;EHLO harmonyos.next&quot;</span>); <span class="comment">// å‘é€EHLOå‘½ä»¤</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">&quot;AUTH LOGIN&quot;</span>); <span class="comment">// å¼€å§‹è®¤è¯</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// Base64ç¼–ç çš„ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">      <span class="keyword">let</span> loginName = <span class="title function_">string2Base64</span>(<span class="variable language_">this</span>.<span class="property">userName</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(loginName);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> passWd = <span class="title function_">string2Base64</span>(<span class="variable language_">this</span>.<span class="property">passwd</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(passWd);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;  <span class="comment">// ç®€åŒ–åˆ¤æ–­ï¼ˆå®é™…åº”æ£€æŸ¥235å“åº”ç ï¼‰</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">canSend</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: ç™»å½•æˆåŠŸï¼ï¼ˆ235 Authentication successfulï¼‰&quot;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: å¯ä»¥å¼€å§‹å‘é€é‚®ä»¶&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±/æˆæƒç &quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: ç™»å½•å¤±è´¥ - <span class="subst">$&#123;e.message || e&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘é€é‚®ä»¶</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">sendMail</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">canSend</span> || !tlsSocket) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: è¿æ¥ä¸å¯ç”¨ï¼Œæ­£åœ¨è‡ªåŠ¨å°è¯•é‡è¿...&quot;</span>);</span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">login</span>();</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">canSend</span>) <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: å¼€å§‹å‘é€é‚®ä»¶...&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// SMTPå‘é€æµç¨‹</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">`MAIL FROM:&lt;<span class="subst">$&#123;<span class="variable language_">this</span>.mailFrom&#125;</span>&gt;`</span>); <span class="comment">// å‘ä»¶äºº</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ”¶ä»¶äººåˆ—è¡¨ï¼ˆæ”¯æŒå¤šä¸ªï¼‰</span></span><br><span class="line">      <span class="keyword">let</span> rcptMails = <span class="variable language_">this</span>.<span class="property">rcptList</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> rcpt <span class="keyword">of</span> rcptMails) &#123;</span><br><span class="line">        rcpt = rcpt.<span class="title function_">trim</span>();</span><br><span class="line">        <span class="keyword">if</span> (rcpt) <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">`RCPT TO:&lt;<span class="subst">$&#123;rcpt&#125;</span>&gt;`</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exeCmdAndWait4Response</span>(<span class="string">&quot;DATA&quot;</span>); <span class="comment">// å‡†å¤‡å‘é€æ•°æ®</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ„å»ºé‚®ä»¶å¤´</span></span><br><span class="line">      <span class="keyword">let</span> mailBody = <span class="string">`From: <span class="subst">$&#123;<span class="variable language_">this</span>.mailFrom&#125;</span>\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`To: <span class="subst">$&#123;<span class="variable language_">this</span>.rcptList&#125;</span>\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`Subject: =?utf-8?B?<span class="subst">$&#123;string2Base64(<span class="variable language_">this</span>.mailTitle)&#125;</span>?=\r\n`</span>; <span class="comment">// Base64ç¼–ç æ ‡é¢˜</span></span><br><span class="line">      mailBody += <span class="string">`Date: <span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().toUTCString()&#125;</span>\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`Content-Type: text/plain; charset=&quot;utf-8&quot;\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`Content-Transfer-Encoding: base64\r\n\r\n`</span>;</span><br><span class="line">      mailBody += <span class="string">`<span class="subst">$&#123;string2Base64(<span class="variable language_">this</span>.mailContent)&#125;</span>\r\n`</span>; <span class="comment">// Base64ç¼–ç å†…å®¹</span></span><br><span class="line">      mailBody += <span class="string">&quot;.\r\n&quot;</span>; <span class="comment">// SMTPæ•°æ®ç»“æŸæ ‡è®°</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ†å—å‘é€é‚®ä»¶å†…å®¹ï¼ˆé¿å…å¤§åŒ…ï¼‰</span></span><br><span class="line">      <span class="keyword">const</span> chunkSize = <span class="number">2048</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mailBody.<span class="property">length</span>; i += chunkSize) &#123;</span><br><span class="line">        <span class="keyword">const</span> chunk = mailBody.<span class="title function_">substring</span>(i, i + chunkSize);</span><br><span class="line">        <span class="keyword">await</span> tlsSocket!.<span class="title function_">send</span>(chunk);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C: [chunk sent, length=<span class="subst">$&#123;chunk.length&#125;</span>]`</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤</span></span><br><span class="line">      <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">wait4ServerResponse</span>(<span class="number">15000</span>);</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;æœåŠ¡å™¨æœªç¡®è®¤é‚®ä»¶æ¥æ”¶&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;C: é‚®ä»¶å‘é€æˆåŠŸï¼è¿æ¥ä¿æŒæ‰“å¼€ï¼Œå¯ç»§ç»­å‘é€ä¸‹ä¸€å°&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: å‘é€å¤±è´¥ - <span class="subst">$&#123;e.message || e&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">cleanupSocket</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰§è¡ŒSMTPå‘½ä»¤å¹¶ç­‰å¾…å“åº”</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">exeCmdAndWait4Response</span>(<span class="params"><span class="attr">cmd</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!tlsSocket) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Socket æœªåˆå§‹åŒ–&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isServerResponse</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">let</span> fullCmd = cmd + <span class="string">&quot;\r\n&quot;</span>; <span class="comment">// SMTPå‘½ä»¤ä»¥CRLFç»“æŸ</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> tlsSocket.<span class="title function_">send</span>(fullCmd);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C: <span class="subst">$&#123;cmd&#125;</span>`</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (sendErr) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`C: å‘é€å‘½ä»¤å¤±è´¥ - <span class="subst">$&#123;sendErr.message || sendErr&#125;</span>`</span>);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(sendErr.<span class="property">message</span> || sendErr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">wait4ServerResponse</span>(<span class="number">10000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç­‰å¾…æœåŠ¡å™¨å“åº”ï¼ˆè½®è¯¢æ–¹å¼ï¼‰</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">wait4ServerResponse</span>(<span class="params"><span class="attr">timeoutMs</span>: <span class="built_in">number</span> = <span class="number">10000</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="variable language_">this</span>.<span class="property">isServerResponse</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Date</span>.<span class="title function_">now</span>() - start &gt; timeoutMs) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`ç­‰å¾…å“åº”è¶…æ—¶ (<span class="subst">$&#123;timeoutMs&#125;</span>ms)`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">sleep</span>(<span class="number">100</span>); <span class="comment">// æ¯100æ¯«ç§’æ£€æŸ¥ä¸€æ¬¡</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Base64 ç¼–ç å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">string2Base64</span>(<span class="params"><span class="attr">src</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> textEncoder = <span class="keyword">new</span> util.<span class="title class_">TextEncoder</span>();</span><br><span class="line">    <span class="keyword">let</span> encodeValue = textEncoder.<span class="title function_">encodeInto</span>(src); <span class="comment">// å­—ç¬¦ä¸²è½¬Uint8Array</span></span><br><span class="line">    <span class="keyword">let</span> tool = <span class="keyword">new</span> util.<span class="title class_">Base64Helper</span>();</span><br><span class="line">    <span class="keyword">return</span> tool.<span class="title function_">encodeToStringSync</span>(encodeValue); <span class="comment">// Base64ç¼–ç </span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Base64 å¤±è´¥:&quot;</span>, e);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ArrayBuffer è½¬å­—ç¬¦ä¸²å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">buf2String</span>(<span class="params"><span class="attr">buf</span>: <span class="title class_">ArrayBuffer</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> msgArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(buf);</span><br><span class="line">    <span class="keyword">let</span> textDecoder = util.<span class="property">TextDecoder</span>.<span class="title function_">create</span>(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> textDecoder.<span class="title function_">decodeWithStream</span>(msgArray); <span class="comment">// UTF-8è§£ç </span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;è§£ç å¤±è´¥:&quot;</span>, e);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;[è§£ç å¤±è´¥]&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥ä¼‘çœ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sleep</span>(<span class="params"><span class="attr">time</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt;(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, time));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤©æ°”"><a class="markdownIt-Anchor" href="#å¤©æ°”"></a> å¤©æ°”</h1>
<p>ä»£ç é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://pan.wo.cn/s/1X1A4u98932">https://pan.wo.cn/s/1X1A4u98932</a>   æå–ç ï¼šFxuX</p>
<p>ä½ç½®å®šä½ï¼š<a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-positioning#section1774418211717">https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-positioning#section1774418211717</a></p>
<p>åœ¨module.json5ä¸­æ·»åŠ ç½‘ç»œè®¿é—®æƒé™ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.INTERNET&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>utils/HttpUtil.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// utils/HttpUtil.ts</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">&#x27;@ohos.util&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ZlibModule</span> &#123;</span><br><span class="line">  <span class="title function_">unzip</span>(<span class="attr">data</span>: <span class="title class_">ArrayBuffer</span>, <span class="attr">callback</span>: <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">Error</span>, <span class="attr">result</span>: <span class="title class_">ArrayBuffer</span></span>) =&gt;</span> <span class="built_in">void</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">requireNapi</span>(<span class="params"><span class="attr">moduleName</span>: <span class="built_in">string</span></span>): <span class="title class_">ZlibModule</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ£€æŸ¥æ•°æ®æ˜¯å¦ä¸º GZIP æ ¼å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isGzipData</span>(<span class="params"><span class="attr">data</span>: <span class="title class_">ArrayBuffer</span> | <span class="title class_">Uint8Array</span></span>): <span class="built_in">boolean</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> uint8Array = data <span class="keyword">instanceof</span> <span class="title class_">Uint8Array</span> ? data : <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(data);</span><br><span class="line">  <span class="keyword">return</span> uint8Array.<span class="property">length</span> &gt;= <span class="number">2</span> &amp;&amp; uint8Array[<span class="number">0</span>] === <span class="number">0x1F</span> &amp;&amp; uint8Array[<span class="number">1</span>] === <span class="number">0x8B</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨é¸¿è’™ç³»ç»Ÿ zlib è§£å‹ GZIP æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">ungzipData</span>(<span class="params"><span class="attr">compressedData</span>: <span class="title class_">ArrayBuffer</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">zlib</span>: <span class="title class_">ZlibModule</span> = <span class="title function_">requireNapi</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line">      zlib.<span class="title function_">unzip</span>(compressedData, <span class="function">(<span class="params"><span class="attr">err</span>: <span class="title class_">Error</span>, <span class="attr">result</span>: <span class="title class_">ArrayBuffer</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="title function_">reject</span>(err);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> decoder = <span class="keyword">new</span> util.<span class="title class_">TextDecoder</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">        <span class="keyword">const</span> uint8Result = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(result);</span><br><span class="line">        <span class="keyword">const</span> output = decoder.<span class="title function_">decodeWithStream</span>(uint8Result);</span><br><span class="line">        <span class="title function_">resolve</span>(output);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;zlib åŠ è½½å¤±è´¥&#x27;</span>, error);</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;zlib è§£å‹å¤±è´¥&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç½‘ç»œè¯·æ±‚å·¥å…·ç±» - ä½¿ç”¨ <span class="doctag">@ohos</span>.net.httpï¼Œæ”¯æŒ GZIP è‡ªåŠ¨è§£å‹æˆ–æ‰‹åŠ¨å¤„ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> url è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> å“åº”æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> request&lt;T&gt;(<span class="attr">url</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;T&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å‘èµ·è¯·æ±‚:&#x27;</span>, url);</span><br><span class="line">    <span class="keyword">const</span> httpRequest = http.<span class="title function_">createHttp</span>();</span><br><span class="line">    httpRequest.<span class="title function_">request</span>(url, &#123;</span><br><span class="line">      <span class="attr">method</span>: http.<span class="property">RequestMethod</span>.<span class="property">GET</span>,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="string">&#x27;gzip&#x27;</span>, <span class="comment">// å…è®¸å‹ç¼©</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// é¸¿è’™httpæ¨¡å—ä¸æ”¯æŒresponseTypeå‚æ•°</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯·æ±‚å“åº”ç :&#x27;</span>, response.<span class="property">responseCode</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å“åº”æ•°æ®ç±»å‹:&#x27;</span>, <span class="keyword">typeof</span> response.<span class="property">result</span>);</span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">responseCode</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> <span class="attr">dataStr</span>: <span class="built_in">string</span>;</span><br><span class="line">          </span><br><span class="line">          <span class="comment">// å¤„ç†æ•°æ®çš„å‡½æ•°</span></span><br><span class="line">          <span class="keyword">const</span> <span class="title function_">processData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="comment">// è§£æ JSON</span></span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å°è¯•è§£æ JSONï¼Œæ•°æ®å‰50å­—ç¬¦:&#x27;</span>, dataStr.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">50</span>));</span><br><span class="line">              <span class="keyword">const</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(dataStr) <span class="keyword">as</span> T;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;JSON è§£ææˆåŠŸ&#x27;</span>);</span><br><span class="line">              <span class="title function_">resolve</span>(result);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å¤„ç†å“åº”å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åŸå§‹æ•°æ®å‰200:&#x27;</span>, (response.<span class="property">result</span> <span class="keyword">as</span> <span class="built_in">string</span>)?.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">200</span>));</span><br><span class="line">              <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;å¤„ç†å“åº”å¤±è´¥: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> response.<span class="property">result</span> === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ”¶åˆ°å­—ç¬¦ä¸²æ•°æ®ï¼Œé•¿åº¦:&#x27;</span>, response.<span class="property">result</span>.<span class="property">length</span>);</span><br><span class="line">            <span class="comment">// ç³»ç»Ÿå·²è‡ªåŠ¨è§£å‹ï¼Œç›´æ¥ä½¿ç”¨</span></span><br><span class="line">            dataStr = response.<span class="property">result</span>;</span><br><span class="line">            <span class="title function_">processData</span>();</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.<span class="property">result</span> <span class="keyword">instanceof</span> <span class="title class_">ArrayBuffer</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ˜¯ ArrayBufferï¼Œæ‰‹åŠ¨å¤„ç†</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ”¶åˆ° ArrayBuffer æ•°æ®ï¼Œé•¿åº¦:&#x27;</span>, response.<span class="property">result</span>.<span class="property">byteLength</span>);</span><br><span class="line">            <span class="keyword">const</span> uint8 = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(response.<span class="property">result</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_">isGzipData</span>(uint8)) &#123;</span><br><span class="line">              <span class="title function_">ungzipData</span>(response.<span class="property">result</span>).<span class="title function_">then</span>(<span class="function"><span class="params">decompressed</span> =&gt;</span> &#123;</span><br><span class="line">                dataStr = decompressed;</span><br><span class="line">                <span class="comment">// ç»§ç»­å¤„ç†é€»è¾‘</span></span><br><span class="line">                <span class="title function_">processData</span>();</span><br><span class="line">              &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">error</span>: <span class="title class_">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è§£å‹å¤±è´¥: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">return</span>; <span class="comment">// ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> decoder = <span class="keyword">new</span> util.<span class="title class_">TextDecoder</span>(<span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">              dataStr = decoder.<span class="title function_">decodeWithStream</span>(uint8);</span><br><span class="line">              <span class="comment">// ç»§ç»­å¤„ç†é€»è¾‘</span></span><br><span class="line">              <span class="title function_">processData</span>();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æœªçŸ¥å“åº”æ•°æ®ç±»å‹&#x27;</span>));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// ArrayBufferæ•°æ®åœ¨å„è‡ªçš„å¤„ç†åˆ†æ”¯ä¸­è°ƒç”¨processData()</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ•°æ®å¤„ç†å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">          <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æ•°æ®å¤„ç†å¤±è´¥: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š<span class="subst">$&#123;response.responseCode&#125;</span>`</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params"><span class="attr">error</span>: <span class="title class_">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç½‘ç»œè¯·æ±‚å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç½‘ç»œè¯·æ±‚å¤±è´¥: &#x27;</span> + error.<span class="property">message</span>));</span><br><span class="line">    &#125;).<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      httpRequest.<span class="title function_">destroy</span>(); <span class="comment">// å¿…é¡»é”€æ¯</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>service/WeatherService.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// service/WeatherService.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">DailyForecast</span>,</span><br><span class="line">  <span class="title class_">RealTimeWeather</span>,</span><br><span class="line">  <span class="title class_">WeatherResponse</span>,</span><br><span class="line">  <span class="title class_">LocationResponse</span>,</span><br><span class="line">  <span class="title class_">RealTimeWeatherResponse</span>,</span><br><span class="line">  <span class="title class_">DailyForecastResponse</span>,</span><br><span class="line">  <span class="title class_">LocationItem</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../model/WeatherModel&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&quot;../utils/HttpUtil&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å’Œé£å¤©æ°”APIé…ç½®</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_KEY</span> = <span class="string">&#x27;dc6b637284d547fb9427f5caf4475554&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">API_HOST</span> = <span class="string">&#x27;https://q53yfrtevq.re.qweatherapi.com&#x27;</span>; <span class="comment">// ä½ çš„ä¸“å±åŸŸå</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®åŸå¸‚è·å–å¤©æ°”æ•°æ®</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> city åŸå¸‚åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getWeatherByCity</span>(<span class="params"><span class="attr">city</span>: <span class="built_in">string</span></span>): <span class="title class_">Promise</span>&lt;<span class="title class_">WeatherResponse</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 1. è·å–åŸå¸‚Location ID - ç§»é™¤ç¦ç”¨å‹ç¼©å‚æ•°ï¼Œè®©æœåŠ¡å™¨æ­£å¸¸ gzipï¼Œfetch è‡ªåŠ¨å¤„ç†</span></span><br><span class="line">    <span class="keyword">const</span> baseParams = <span class="string">`location=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(city)&#125;</span>&amp;key=<span class="subst">$&#123;API_KEY&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">const</span> locationUrl = <span class="string">`<span class="subst">$&#123;API_HOST&#125;</span>/geo/v2/city/lookup?<span class="subst">$&#123;baseParams&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯·æ±‚ä½ç½®URL:&#x27;</span>, locationUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> locationRes = <span class="keyword">await</span> request&lt;<span class="title class_">LocationResponse</span>&gt;(locationUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ä½ç½®å“åº”æˆåŠŸ&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!locationRes.<span class="property">location</span> || locationRes.<span class="property">location</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æœªæ‰¾åˆ°è¯¥åŸå¸‚çš„å¤©æ°”æ•°æ®&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> locationId = locationRes.<span class="property">location</span>[<span class="number">0</span>].<span class="property">id</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ‰¾åˆ°åŸå¸‚ID:&#x27;</span>, locationId, <span class="string">&#x27;åŸå¸‚å:&#x27;</span>, locationRes.<span class="property">location</span>[<span class="number">0</span>].<span class="property">name</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è·å–å®æ—¶å¤©æ°” - ç§»é™¤ç¦ç”¨å‹ç¼©å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> weatherParams = <span class="string">`location=<span class="subst">$&#123;locationId&#125;</span>&amp;key=<span class="subst">$&#123;API_KEY&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">const</span> realTimeUrl = <span class="string">`<span class="subst">$&#123;API_HOST&#125;</span>/v7/weather/now?<span class="subst">$&#123;weatherParams&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯·æ±‚å®æ—¶å¤©æ°”URL:&#x27;</span>, realTimeUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> realTimeRes = <span class="keyword">await</span> request&lt;<span class="title class_">RealTimeWeatherResponse</span>&gt;(realTimeUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®æ—¶å¤©æ°”å“åº”æˆåŠŸ&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. è·å–æœªæ¥3å¤©é¢„æŠ¥</span></span><br><span class="line">    <span class="keyword">const</span> dailyUrl = <span class="string">`<span class="subst">$&#123;API_HOST&#125;</span>/v7/weather/3d?<span class="subst">$&#123;weatherParams&#125;</span>`</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯·æ±‚å¤©æ°”é¢„æŠ¥URL:&#x27;</span>, dailyUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dailyRes = <span class="keyword">await</span> request&lt;<span class="title class_">DailyForecastResponse</span>&gt;(dailyUrl);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¤©æ°”é¢„æŠ¥å“åº”æˆåŠŸ&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®è½¬æ¢ï¼ˆä¿æŒä¸å˜ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">realTime</span>: <span class="title class_">RealTimeWeather</span> = &#123;</span><br><span class="line">      <span class="attr">temp</span>: realTimeRes.<span class="property">now</span>.<span class="property">temp</span>,</span><br><span class="line">      <span class="attr">text</span>: realTimeRes.<span class="property">now</span>.<span class="property">text</span>,</span><br><span class="line">      <span class="attr">windDir</span>: realTimeRes.<span class="property">now</span>.<span class="property">windDir</span>,</span><br><span class="line">      <span class="attr">windScale</span>: realTimeRes.<span class="property">now</span>.<span class="property">windScale</span>,</span><br><span class="line">      <span class="attr">humidity</span>: realTimeRes.<span class="property">now</span>.<span class="property">humidity</span>,</span><br><span class="line">      <span class="attr">updateTime</span>: realTimeRes.<span class="property">updateTime</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">dailyForecasts</span>: <span class="title class_">DailyForecast</span>[] = dailyRes.<span class="property">daily</span>.<span class="title function_">map</span>((<span class="attr">item</span>: <span class="title class_">DailyForecast</span>): <span class="function"><span class="params">DailyForecast</span> =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">fxDate</span>: item.<span class="property">fxDate</span>,</span><br><span class="line">      <span class="attr">tempMax</span>: item.<span class="property">tempMax</span>,</span><br><span class="line">      <span class="attr">tempMin</span>: item.<span class="property">tempMin</span>,</span><br><span class="line">      <span class="attr">textDay</span>: item.<span class="property">textDay</span></span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•°æ®å¤„ç†å®Œæˆ&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123; realTime, dailyForecasts &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–å¤©æ°”å¤±è´¥:&#x27;</span>, error);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(error.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>model/WeatherModel.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// model/WeatherModel.ts</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®æ—¶å¤©æ°”æ•°æ®æ¨¡å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">RealTimeWeather</span> &#123;</span><br><span class="line">  <span class="attr">temp</span>: <span class="built_in">string</span>; <span class="comment">// æ¸©åº¦</span></span><br><span class="line">  <span class="attr">text</span>: <span class="built_in">string</span>; <span class="comment">// å¤©æ°”çŠ¶å†µï¼ˆæ™´/é›¨/å¤šäº‘ï¼‰</span></span><br><span class="line">  <span class="attr">windDir</span>: <span class="built_in">string</span>; <span class="comment">// é£å‘</span></span><br><span class="line">  <span class="attr">windScale</span>: <span class="built_in">string</span>; <span class="comment">// é£åŠ›ç­‰çº§</span></span><br><span class="line">  <span class="attr">humidity</span>: <span class="built_in">string</span>; <span class="comment">// æ¹¿åº¦</span></span><br><span class="line">  <span class="attr">updateTime</span>: <span class="built_in">string</span>; <span class="comment">// æ›´æ–°æ—¶é—´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœªæ¥é¢„æŠ¥æ•°æ®æ¨¡å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">DailyForecast</span> &#123;</span><br><span class="line">  <span class="attr">fxDate</span>: <span class="built_in">string</span>; <span class="comment">// æ—¥æœŸ</span></span><br><span class="line">  <span class="attr">tempMax</span>: <span class="built_in">string</span>; <span class="comment">// æœ€é«˜æ¸©</span></span><br><span class="line">  <span class="attr">tempMin</span>: <span class="built_in">string</span>; <span class="comment">// æœ€ä½æ¸©</span></span><br><span class="line">  <span class="attr">textDay</span>: <span class="built_in">string</span>; <span class="comment">// ç™½å¤©å¤©æ°”çŠ¶å†µ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤©æ°”å“åº”ä½“æ¨¡å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WeatherResponse</span> &#123;</span><br><span class="line">  <span class="attr">realTime</span>: <span class="title class_">RealTimeWeather</span>;</span><br><span class="line">  <span class="attr">dailyForecasts</span>: <span class="title class_">DailyForecast</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½ç½®æŸ¥è¯¢å“åº”æ¨¡å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">LocationItem</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">LocationResponse</span> &#123;</span><br><span class="line">  <span class="attr">location</span>: <span class="title class_">LocationItem</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®æ—¶å¤©æ°”å“åº”æ¨¡å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">RealTimeWeatherResponse</span> &#123;</span><br><span class="line">  <span class="attr">now</span>: <span class="title class_">RealTimeWeather</span>;</span><br><span class="line">  <span class="attr">updateTime</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœªæ¥é¢„æŠ¥å“åº”æ¨¡å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">DailyForecastResponse</span> &#123;</span><br><span class="line">  <span class="attr">daily</span>: <span class="title class_">DailyForecast</span>[];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>pages/WeatherPage.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DailyForecast</span>, <span class="title class_">RealTimeWeather</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/WeatherModel&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getWeatherByCity &#125; <span class="keyword">from</span> <span class="string">&#x27;../service/WeatherService&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">WeatherPage</span> &#123;</span><br><span class="line">  <span class="comment">// çŠ¶æ€ç®¡ç†</span></span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">cityName</span>: <span class="built_in">string</span> = <span class="string">&#x27;åŒ—äº¬&#x27;</span>; <span class="comment">// é»˜è®¤æŸ¥è¯¢åŒ—äº¬</span></span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">inputCity</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">realTimeWeather</span>: <span class="title class_">RealTimeWeather</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">dailyForecasts</span>: <span class="title class_">DailyForecast</span>[] = [];</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">isLoading</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="attr">errorMsg</span>: <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">fetchWeatherData</span>(<span class="variable language_">this</span>.<span class="property">cityName</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">// æ ‡é¢˜åŒºåŸŸ</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;é¸¿è’™å¤©æ°”&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span>, <span class="attr">bottom</span>: <span class="number">15</span> &#125;)</span><br><span class="line">        .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åŸå¸‚æŸ¥è¯¢åŒºåŸŸ</span></span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">placeholder</span>: <span class="string">&#x27;è¯·è¾“å…¥åŸå¸‚åç§°...&#x27;</span>, <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">inputCity</span> &#125;)</span><br><span class="line">          .<span class="title function_">onChange</span>(<span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">inputCity</span> = value;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;70%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">radius</span>: <span class="number">8</span>, <span class="attr">color</span>: <span class="string">&#x27;#E5E5E5&#x27;</span> &#125;)</span><br><span class="line">          .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;æŸ¥è¯¢&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">45</span>)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#007DFF&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          .<span class="title function_">borderRadius</span>(<span class="number">8</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">inputCity</span>.<span class="title function_">trim</span>()) &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">fetchWeatherData</span>(<span class="variable language_">this</span>.<span class="property">inputCity</span>.<span class="title function_">trim</span>());</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span>, <span class="attr">right</span>: <span class="number">15</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åŠ è½½çŠ¶æ€æç¤º</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isLoading</span>) &#123;</span><br><span class="line">        <span class="title class_">LoadingProgress</span>()</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é”™è¯¯æç¤º</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">errorMsg</span>) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">errorMsg</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">          .<span class="title function_">fontColor</span>(<span class="string">&#x27;#FF4D4F&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å®æ—¶å¤©æ°”å±•ç¤º</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">realTimeWeather</span>) &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.cityName&#125;</span> å®æ—¶å¤©æ°”`</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span> &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.temp&#125;</span>Â°C`</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">48</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>);</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">realTimeWeather</span>.<span class="property">text</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">5</span> &#125;);</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`æ›´æ–°æ—¶é—´ï¼š<span class="subst">$&#123;<span class="variable language_">this</span>.formatTime(<span class="variable language_">this</span>.realTimeWeather.updateTime)&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="string">&#x27;#999&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">15</span> &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å¤©æ°”è¯¦æƒ…</span></span><br><span class="line">          <span class="title class_">Grid</span>() &#123;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">buildWeatherInfoItem</span>(<span class="string">&#x27;é£å‘&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.windDir&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">buildWeatherInfoItem</span>(<span class="string">&#x27;é£åŠ›&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.windScale&#125;</span>çº§`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">buildWeatherInfoItem</span>(<span class="string">&#x27;æ¹¿åº¦&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.realTimeWeather.humidity&#125;</span>%`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">30</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="number">12</span>)</span><br><span class="line">        .<span class="title function_">shadow</span>(&#123; <span class="attr">radius</span>: <span class="number">4</span>, <span class="attr">color</span>: <span class="string">&#x27;#00000010&#x27;</span>, <span class="attr">offsetX</span>: <span class="number">0</span>, <span class="attr">offsetY</span>: <span class="number">2</span> &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Center</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æœªæ¥é¢„æŠ¥å±•ç¤º</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">dailyForecasts</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;æœªæ¥3å¤©é¢„æŠ¥&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">          .<span class="title function_">alignSelf</span>(<span class="title class_">ItemAlign</span>.<span class="property">Start</span>)</span><br><span class="line">          .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dailyForecasts</span>, <span class="function">(<span class="params"><span class="attr">item</span>: <span class="title class_">DailyForecast</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="property">fxDate</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>);</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="property">textDay</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>);</span><br><span class="line">                <span class="title class_">Text</span>(<span class="string">`â†‘<span class="subst">$&#123;item.tempMax&#125;</span>Â°C`</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>(<span class="string">&#x27;#FF4D4F&#x27;</span>);</span><br><span class="line">                <span class="title class_">Text</span>(<span class="string">`â†“<span class="subst">$&#123;item.tempMin&#125;</span>Â°C`</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">                  .<span class="title function_">fontColor</span>(<span class="string">&#x27;#007DFF&#x27;</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              .<span class="title function_">padding</span>(<span class="number">15</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">8</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">15</span>, <span class="attr">right</span>: <span class="number">15</span> &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#F8F8F8&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ„å»ºå¤©æ°”ä¿¡æ¯å­é¡¹</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">buildWeatherInfoItem</span>(<span class="params"><span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(title)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="string">&#x27;#999&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">5</span> &#125;);</span><br><span class="line">      <span class="title class_">Text</span>(value)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Medium</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ ¼å¼åŒ–æ—¶é—´</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">formatTime</span>(<span class="attr">timeStr</span>: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> timeStr.<span class="title function_">replace</span>(<span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27; &#x27;</span>).<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">16</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–å¤©æ°”æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">async</span> <span class="title function_">fetchWeatherData</span>(<span class="params"><span class="attr">city</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">errorMsg</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> weatherData = <span class="keyword">await</span> <span class="title function_">getWeatherByCity</span>(city);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cityName</span> = city;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">realTimeWeather</span> = weatherData.<span class="property">realTime</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dailyForecasts</span> = weatherData.<span class="property">dailyForecasts</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">errorMsg</span> = error.<span class="property">message</span> || <span class="string">&#x27;è·å–å¤©æ°”æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•&#x27;</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–å¤©æ°”å¤±è´¥ï¼š&#x27;</span>, error);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isLoading</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="å¤´åƒ"><img class="post-copyright__author_img_back" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">æ˜Ÿä»”</div><div class="post-copyright__author_desc">æ˜Ÿä»”ä¸ªäººåšå®¢</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://www.6673543.xyz/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.6673543.xyz/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/')">9.æ¡ˆä¾‹</span></a></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://www.6673543.xyz" target="_blank">æ˜Ÿä»”æå®¢</a>ï¼</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>åŸç”Ÿé¸¿è’™å¼€å‘<span class="tagsPageCount">10</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2026/01/28/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/C%E8%AF%AD%E8%A8%80/0-C%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/"><img class="prev-cover" src="https://s2.loli.net/2026/01/28/gCKcZoemAiI1wpa.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">0.Cè¯­è¨€æ¦‚è¿°</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>å–œæ¬¢è¿™ç¯‡æ–‡ç« çš„äººä¹Ÿçœ‹äº†</span></div><div class="relatedPosts-list"><div><a href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/8.%E5%AF%BC%E8%88%AA%E3%80%81%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1/" title="8.å¯¼èˆªã€é¡µé¢è·¯ç”±"><img class="cover" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-14</div><div class="title">8.å¯¼èˆªã€é¡µé¢è·¯ç”±</div></div></a></div><div><a href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/7-%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82/" title="7.æ•°æ®è¯·æ±‚"><img class="cover" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-14</div><div class="title">7.æ•°æ®è¯·æ±‚</div></div></a></div><div><a href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/6-%E5%AD%98%E5%82%A8%E3%80%81%E6%9D%83%E9%99%90/" title="6.å­˜å‚¨ã€æƒé™"><img class="cover" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-14</div><div class="title">6.å­˜å‚¨ã€æƒé™</div></div></a></div><div><a href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/5-%E5%BC%B9%E7%AA%97/" title="5.å¼¹çª—"><img class="cover" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-14</div><div class="title">5.å¼¹çª—</div></div></a></div><div><a href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/4-%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80%E3%80%81%E5%8A%A8%E7%94%BB/" title="4.ç•Œé¢å¸ƒå±€ã€åŠ¨ç”»"><img class="cover" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-14</div><div class="title">4.ç•Œé¢å¸ƒå±€ã€åŠ¨ç”»</div></div></a></div><div><a href="/2025/09/14/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/3-UI%E7%BB%84%E4%BB%B6/" title="3.UIç»„ä»¶"><img class="cover" src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-14</div><div class="title">3.UIç»„ä»¶</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">æ—¥å¸¸ç¬”è®°å’Œç”Ÿæ´»åˆ†äº«ï¼</div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#163%E9%82%AE%E7%AE%B1%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81"><span class="toc-number">1.</span> <span class="toc-text"> 163é‚®ç®±é‚®ä»¶å‘é€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%A9%E6%B0%94"><span class="toc-number">2.</span> <span class="toc-text"> å¤©æ°”</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/" title="9.æ¡ˆä¾‹"><img src="https://s2.loli.net/2025/12/28/FZgRoYaPr1N8WVc.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="9.æ¡ˆä¾‹"/></a><div class="content"><a class="title" href="/2026/02/01/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/9-%E6%A1%88%E4%BE%8B/" title="9.æ¡ˆä¾‹">9.æ¡ˆä¾‹</a><time datetime="2026-02-01T07:08:25.000Z" title="å‘è¡¨äº 2026-02-01 15:08:25">2026-02-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/28/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/C%E8%AF%AD%E8%A8%80/0-C%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" title="0.Cè¯­è¨€æ¦‚è¿°"><img src="https://s2.loli.net/2026/01/28/gCKcZoemAiI1wpa.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="0.Cè¯­è¨€æ¦‚è¿°"/></a><div class="content"><a class="title" href="/2026/01/28/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6/C%E8%AF%AD%E8%A8%80/0-C%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0/" title="0.Cè¯­è¨€æ¦‚è¿°">0.Cè¯­è¨€æ¦‚è¿°</a><time datetime="2026-01-28T05:41:10.000Z" title="å‘è¡¨äº 2026-01-28 13:41:10">2026-01-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/19/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E5%AD%A6%E6%9C%AF%E6%96%87%E7%8C%AE%E5%A4%A7%E5%85%A8/" title="å­¦æœ¯æ–‡çŒ®å¤§å…¨"><img src="https://s2.loli.net/2025/12/28/dhVaA6NUC8DO5Te.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å­¦æœ¯æ–‡çŒ®å¤§å…¨"/></a><div class="content"><a class="title" href="/2025/10/19/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/%E5%AD%A6%E6%9C%AF%E6%96%87%E7%8C%AE%E5%A4%A7%E5%85%A8/" title="å­¦æœ¯æ–‡çŒ®å¤§å…¨">å­¦æœ¯æ–‡çŒ®å¤§å…¨</a><time datetime="2025-10-19T06:49:50.000Z" title="å‘è¡¨äº 2025-10-19 14:49:50">2025-10-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/05/%E6%9D%82%E9%A1%B9/TOS/" title="æ˜Ÿæµ·ç‰©è”ç”¨æˆ·æœåŠ¡åè®®">æ˜Ÿæµ·ç‰©è”ç”¨æˆ·æœåŠ¡åè®®</a><time datetime="2025-10-05T05:42:28.000Z" title="å‘è¡¨äº 2025-10-05 13:42:28">2025-10-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/25/%E8%BD%AF%E6%B5%8B/2-%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/" title="2.åŠŸèƒ½æµ‹è¯•"><img src="https://s2.loli.net/2025/12/28/t2mAjy3aJKMopqH.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2.åŠŸèƒ½æµ‹è¯•"/></a><div class="content"><a class="title" href="/2025/09/25/%E8%BD%AF%E6%B5%8B/2-%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/" title="2.åŠŸèƒ½æµ‹è¯•">2.åŠŸèƒ½æµ‹è¯•</a><time datetime="2025-09-25T06:28:25.000Z" title="å‘è¡¨äº 2025-09-25 14:28:25">2025-09-25</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2026 By <a class="footer-bar-link" href="/" title="æ˜Ÿä»”" target="_blank">æ˜Ÿä»”</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="ä¸»é¢˜">ä¸»é¢˜</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">24</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">12</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="æ˜¾ç¤ºæ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><span> ç¬”è®°</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> æ ‡ç­¾</span></a></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">Cè¯­è¨€<sup>1</sup></a><a href="/tags/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">LinuxåŸºç¡€å‘½ä»¤<sup>1</sup></a><a href="/tags/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">MySQLæ•°æ®åº“<sup>3</sup></a><a href="/tags/Windows%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/" style="font-size: 0.88rem;">Windowsç›¸å…³è®¾ç½®<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2CDN%E8%A7%A3%E6%9E%90/" style="font-size: 0.88rem;">åšå®¢CDNè§£æ<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9B%B8%E5%85%B3/" style="font-size: 0.88rem;">åšå®¢æ­å»ºç›¸å…³<sup>1</sup></a><a href="/tags/%E5%8E%9F%E7%94%9F%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">åŸç”Ÿé¸¿è’™å¼€å‘<sup>10</sup></a><a href="/tags/%E5%AD%A6%E6%9C%AF%E6%96%87%E7%8C%AE/" style="font-size: 0.88rem;">å­¦æœ¯æ–‡çŒ®<sup>1</sup></a><a href="/tags/%E6%98%9F%E6%B5%B7%E7%89%A9%E8%81%94%E5%8D%8F%E8%AE%AE/" style="font-size: 0.88rem;">æ˜Ÿæµ·ç‰©è”åè®®<sup>1</sup></a><a href="/tags/%E7%A7%98%E5%AF%86%E7%A7%91%E6%8A%80/" style="font-size: 0.88rem;">ç§˜å¯†ç§‘æŠ€<sup>1</sup></a><a href="/tags/%E8%B5%84%E6%BA%90%E5%BA%93/" style="font-size: 0.88rem;">èµ„æºåº“<sup>1</sup></a><a href="/tags/%E8%BD%AF%E6%B5%8B/" style="font-size: 0.88rem;">è½¯æµ‹<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="anzhiyu.scrollToDest(document.body.scrollHeight, 500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div></div></body></html>